"use strict";(self.webpackChunkBrainDriveChatWithDocs=self.webpackChunkBrainDriveChatWithDocs||[]).push([[84],{6084:(e,n,t)=>{t.r(n),t.d(n,{default:()=>va,version:()=>ba});var r=t(4848),o=t(2769),a=t.n(o),s=t(5072),i=t.n(s),l=t(7825),c=t.n(l),d=t(7659),u=t.n(d),p=t(5056),h=t.n(p),m=t(540),g=t.n(m),f=t(1113),v=t.n(f),b=t(7553),x={};x.styleTagTransform=v(),x.setAttributes=h(),x.insert=u().bind(null,"head"),x.domAPI=c(),x.insertStyleElement=g(),i()(b.A,x),b.A&&b.A.locals&&b.A.locals;var y,w=t(8723),k=t(7946),S=t(697),j={DEFINITION_ID:"braindrive_chat_with_documents_settings",NAME:"Chat with Document Processor Settings",PLUGIN_SLUG:"BrainDriveChatWithDocs",DEFAULT_VALUE:{LLM_PROVIDER:"ollama",EMBEDDING_PROVIDER:"ollama",ENABLE_CONTEXTUAL_RETRIEVAL:!0,OLLAMA_CONTEXTUAL_LLM_BASE_URL:"http://host.docker.internal:11434",OLLAMA_CONTEXTUAL_LLM_MODEL:"",OLLAMA_LLM_BASE_URL:"http://host.docker.internal:11434",OLLAMA_LLM_MODEL:"",OLLAMA_EMBEDDING_BASE_URL:"http://host.docker.internal:11434",OLLAMA_EMBEDDING_MODEL:"",DOCUMENT_PROCESSOR_API_URL:"http://host.docker.internal:8080/documents/",DOCUMENT_PROCESSOR_API_KEY:"default_api_key",DOCUMENT_PROCESSOR_TIMEOUT:300,DOCUMENT_PROCESSOR_MAX_RETRIES:3,OPENAI_EVALUATION_API_KEY:"",OPENAI_EVALUATION_MODEL:"gpt-5-mini"}},C={ollama:"ollama_servers_settings",openai:"openai_api_keys_settings",openrouter:"openrouter_api_keys_settings",claude:"claude_api_keys_settings",groq:"groq_api_keys_settings"},N=[{name:"cwyd_service",healthcheck_url:"http://localhost:8000/health"},{name:"document_processing_service",healthcheck_url:"http://localhost:8080/health"}],_="http://127.0.0.1:8000",O="http://localhost:8005",P=[".pdf",".doc",".docx",".md",".html",".htm",".pptx",".ppt"],M=function(){return M=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},M.apply(this,arguments)},I=function(){function e(e,n,t){var r=this;this.handleFormChange=function(e,n){var t;r.updateState({newCollection:M(M({},r.state.newCollection),(t={},t[e]=n,t))})},this.handleToggleCreateForm=function(){var e=r.state.showCreateForm;r.updateState({showCreateForm:!e,newCollection:e?{name:"",description:"",color:"#3B82F6"}:r.state.newCollection})},this.handleViewModeChange=function(e){r.updateState({currentViewMode:e})},this.handleCreateCollection=function(){return e=r,n=void 0,o=function(){var e,n,t,r,o;return function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(a){switch(a.label){case 0:if(!(null===(o=this.state.newCollection.name)||void 0===o?void 0:o.trim()))return[2];this.updateState({isCreating:!0}),this.deps.setError(null),a.label=1;case 1:return a.trys.push([1,6,7,8]),e=this.state.newCollection,[4,fetch("".concat(_,"/collections/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})];case 2:return(n=a.sent()).ok?[3,4]:[4,n.json()];case 3:throw t=a.sent(),new Error(t.message||"Failed to create collection");case 4:return this.updateState({newCollection:{name:"",description:"",color:"#3B82F6"},showCreateForm:!1}),[4,this.deps.onCollectionsUpdated()];case 5:return a.sent(),[3,8];case 6:return r=a.sent(),this.deps.setError(r.message||"An unknown error occurred during collection creation."),[3,8];case 7:return this.updateState({isCreating:!1}),[7];case 8:return[2]}}))},new((t=void 0)||(t=Promise))((function(r,a){function s(e){try{l(o.next(e))}catch(e){a(e)}}function i(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((o=o.apply(e,n||[])).next())}));var e,n,t,o},this.state=e,this.deps=n,this.updateShellState=t}return e.prototype.updateState=function(e){this.state=M(M({},this.state),e),this.updateShellState(e)},e}(),E=function(e){var n,t,o=e.newCollection,a=e.isCreating,s=e.handleNameChange,i=e.handleDescriptionChange,l=e.handleColorChange,c=e.handleCreateCollection,d=e.handleCancelCreateForm,u=(null===(n=o.name)||void 0===n?void 0:n.trim().length)>0&&(null===(t=o.description)||void 0===t?void 0:t.trim().length)>0;return(0,r.jsxs)("div",{className:"collection-form-container rounded-lg shadow-sm border p-6 mb-6",children:[(0,r.jsx)("h3",{className:"collection-form-title text-lg font-medium mb-4",children:"Create New Collection"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"collection-form-label block text-sm font-medium mb-1",children:"Name"}),(0,r.jsx)("input",{type:"text",value:o.name,onChange:s,className:"collection-form-input w-full px-3 py-2 border rounded-lg",placeholder:"Enter collection name",disabled:a})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"collection-form-label block text-sm font-medium mb-1",children:"Description"}),(0,r.jsx)("textarea",{value:o.description,onChange:i,className:"collection-form-input w-full px-3 py-2 border rounded-lg",rows:3,placeholder:"Enter collection description",disabled:a})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"collection-form-label block text-sm font-medium mb-1",children:"Color"}),(0,r.jsx)("input",{type:"color",value:o.color,onChange:l,className:"collection-form-input w-20 h-10 border rounded-lg",disabled:a})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("button",{onClick:c,disabled:!u||a,className:"text-white px-4 py-2 rounded-lg transition-colors disabled:opacity-50 flex items-center",style:{backgroundColor:"var(--button-primary-bg)"},onMouseEnter:function(e){return!a&&!u&&(e.currentTarget.style.opacity="0.9")},onMouseLeave:function(e){return e.currentTarget.style.opacity="1"},children:a?(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Create Collection"}),(0,r.jsx)("button",{onClick:d,className:"collection-form-button-cancel px-4 py-2 rounded-lg transition-colors",disabled:a,children:"Cancel"})]})]})]})},T=t(7677);function R(e){if(!e)return"";if("string"==typeof e)return e;if("object"==typeof e){if(e.text&&"string"==typeof e.text)return e.text;if(e.choices&&Array.isArray(e.choices)&&e.choices.length>0){var n=e.choices[0];if(n.delta&&n.delta.content)return n.delta.content;if(n.message&&n.message.content)return n.message.content;if(n.text)return n.text}for(var t=0,r=["content","message","response","output","result","answer"];t<r.length;t++){var o=r[t];if(e[o]&&"string"==typeof e[o])return e[o]}if(e.delta&&e.delta.content)return e.delta.content;if(e.message&&e.message.content)return e.message.content}return""}!function(e){e.GRID="grid",e.LIST="list"}(y||(y={}));var A=function(){return A=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},A.apply(this,arguments)};function D(e,n){return void 0===n&&(n={}),("string"==typeof e?new Date(e):e).toLocaleDateString(void 0,A({year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"},n))}function L(e){try{var n=new Date(e),t=(new Date).getTime()-n.getTime(),r=Math.floor(t/6e4),o=Math.floor(r/60),a=Math.floor(o/24);return r<1?"Just now":r<60?"".concat(r," min").concat(1!==r?"s":""," ago"):o<24?"".concat(o," hour").concat(1!==o?"s":""," ago"):a<7?"".concat(a," day").concat(1!==a?"s":""," ago"):n.toLocaleDateString()}catch(e){return""}}function z(e){var n="string"==typeof e?new Date(e):e,t=new Date,r=Math.floor((t.getTime()-n.getTime())/1e3);return r<60?"just now":r<3600?"".concat(Math.floor(r/60)," minutes ago"):r<86400?"".concat(Math.floor(r/3600)," hours ago"):r<2592e3?"".concat(Math.floor(r/86400)," days ago"):D(n)}function F(e){try{return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch(e){return""}}function U(e){return void 0===e&&(e="id"),"".concat(e,"_").concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}var B,G=function(e){var n=e.collections,t=e.onCollectionSelect,o=e.viewMode,a=e.maxHeight,s=void 0===a?"max-h-96":a;return o===y.GRID?(0,r.jsx)("div",{className:"h-full ".concat(s," overflow-y-auto overflow-x-hidden collection-list-bg"),children:(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-4",children:n.map((function(e){return function(e){var n={backgroundColor:e.color};return(0,r.jsx)("div",{className:"collection-list-item rounded-lg border hover:shadow-lg transition-all duration-200 cursor-pointer",onClick:function(){return t(e)},children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full mr-3 flex-shrink-0",style:n,"aria-label":"Collection color indicator"}),(0,r.jsx)("h3",{className:"text-lg font-medium collection-item-title",children:e.name})]}),(0,r.jsx)("p",{className:"text-sm collection-item-description mb-4 line-clamp-2",children:e.description||"No description"}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm collection-item-meta",children:[(0,r.jsxs)("span",{className:"font-medium collection-item-title",children:[e.document_count||0," documents"]}),(0,r.jsx)("span",{className:"collection-item-meta",children:D(e.created_at)})]})]})},e.id)}(e)}))})}):(0,r.jsx)("div",{className:"h-full ".concat(s," overflow-y-auto collection-list-bg"),children:(0,r.jsx)("ul",{id:"collections-list",className:"divide-y collection-list-divider collection-list-bg",children:n.map((function(e){return function(e){var n={backgroundColor:e.color};return(0,r.jsx)("li",{className:"cursor-pointer transition-all duration-200",onClick:function(){return t(e)},children:(0,r.jsxs)("div",{className:"px-4 py-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full mr-3 flex-shrink-0",style:n,"aria-label":"Collection color indicator"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium collection-item-title",children:e.name}),(0,r.jsx)("p",{className:"text-sm collection-item-description",children:e.description||"No description"})]})]}),(0,r.jsxs)("div",{className:"flex flex-col items-start space-y-1 text-left",children:[(0,r.jsxs)("span",{className:"text-xs collection-item-meta",children:[e.document_count||0," documents"]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-xs collection-item-meta",children:D(e.created_at)}),(0,r.jsx)(T.A,{className:"h-4 w-4 collection-item-meta transition-colors"})]})]})]})},e.id)}(e)}))})})},q=t(3128),H=t(6108),V=function(e){var n=e.currentViewMode,t=e.onViewModeChange;return(0,r.jsxs)("div",{className:"cv-toggle",children:[(0,r.jsx)("button",{onClick:function(){return t(y.LIST)},className:"cv-toggle-btn ".concat(n===y.LIST?"cv-toggle-btn--active":""),"aria-label":"List view",children:(0,r.jsx)(q.A,{className:"h-4 w-4"})}),(0,r.jsx)("button",{onClick:function(){return t(y.GRID)},className:"cv-toggle-btn ".concat(n===y.GRID?"cv-toggle-btn--active":""),"aria-label":"Grid view",children:(0,r.jsx)(H.A,{className:"h-4 w-4"})})]})},K=t(3242),W=function(){return(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(K.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No collections yet"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Create your first collection to get started"})]})},Q=(B=function(e,n){return B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},B(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=e}B(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),Y=function(){return Y=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},Y.apply(this,arguments)},X={showCreateForm:!1,newCollection:{name:"",description:"",color:"#3B82F6"},isCreating:!1,currentViewMode:y.LIST},J=function(e){function n(n){var t=e.call(this,n)||this;return t.state=X,t.collectionService=new I(X,{dataRepository:n.dataRepository,setError:n.setError,onCollectionsUpdated:n.onCollectionCreate},(function(e){return t.setState((function(n){return Y(Y({},n),e)}))})),t}return Q(n,e),n.prototype.renderCreateForm=function(){var e=this,n=this.state,t=n.showCreateForm,o=n.newCollection,a=n.isCreating;return t?(0,r.jsx)(E,{newCollection:o,isCreating:a,handleNameChange:function(n){return e.collectionService.handleFormChange("name",n.target.value)},handleDescriptionChange:function(n){return e.collectionService.handleFormChange("description",n.target.value)},handleColorChange:function(n){return e.collectionService.handleFormChange("color",n.target.value)},handleCreateCollection:this.collectionService.handleCreateCollection,handleCancelCreateForm:this.collectionService.handleToggleCreateForm}):null},n.prototype.render=function(){var e=this.props,n=e.collections,t=e.onCollectionSelect,o=this.state.currentViewMode,a=this.collectionService,s=a.handleToggleCreateForm,i=a.handleViewModeChange;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("div",{className:"px-4 sm:px-6",children:[(0,r.jsx)("h2",{className:"text-lg leading-6 font-medium collection-item-title",children:"Your Collections"}),(0,r.jsx)("p",{className:"max-w-2xl text-sm collection-item-description",children:"Organize your documents into collections for better management"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(V,{currentViewMode:o,onViewModeChange:i}),(0,r.jsxs)("button",{onClick:s,className:"text-white px-4 py-2 rounded-lg transition-colors flex items-center text-sm",style:{backgroundColor:"var(--button-primary-bg)"},onMouseEnter:function(e){return e.currentTarget.style.opacity="0.9"},onMouseLeave:function(e){return e.currentTarget.style.opacity="1"},children:[(0,r.jsx)(S.A,{className:"h-4 w-4 mr-2"}),"New Collection"]})]})]}),this.renderCreateForm(),0===n.length?(0,r.jsx)(W,{}):(0,r.jsx)(G,{collections:n,onCollectionSelect:t,viewMode:o})]})},n}(a().Component),Z=t(7669),$={};$.styleTagTransform=v(),$.setAttributes=h(),$.insert=u().bind(null,"head"),$.domAPI=c(),$.insertStyleElement=g(),i()(Z.A,$),Z.A&&Z.A.locals&&Z.A.locals;var ee=function(){return ee=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},ee.apply(this,arguments)},ne=function(e){var n=e.size,t=void 0===n?16:n;return(0,r.jsx)("svg",{"data-testid":"geist-icon",height:t,strokeLinejoin:"round",style:{color:"currentcolor"},viewBox:"0 0 16 16",width:t,children:(0,r.jsx)("path",{clipRule:"evenodd",d:"M1.5 4.875C1.5 3.01104 3.01104 1.5 4.875 1.5C6.20018 1.5 7.34838 2.26364 7.901 3.37829C8.1902 3.96162 8.79547 4.5 9.60112 4.5H12.25C13.4926 4.5 14.5 5.50736 14.5 6.75C14.5 7.42688 14.202 8.03329 13.7276 8.44689L13.1622 8.93972L14.1479 10.0704L14.7133 9.57758C15.5006 8.89123 16 7.8785 16 6.75C16 4.67893 14.3211 3 12.25 3H9.60112C9.51183 3 9.35322 2.93049 9.2449 2.71201C8.44888 1.1064 6.79184 0 4.875 0C2.18261 0 0 2.18261 0 4.875V6.40385C0 7.69502 0.598275 8.84699 1.52982 9.59656L2.11415 10.0667L3.0545 8.89808L2.47018 8.42791C1.87727 7.95083 1.5 7.22166 1.5 6.40385V4.875ZM7.29289 7.39645C7.68342 7.00592 8.31658 7.00592 8.70711 7.39645L11.7803 10.4697L12.3107 11L11.25 12.0607L10.7197 11.5303L8.75 9.56066V15.25V16H7.25V15.25V9.56066L5.28033 11.5303L4.75 12.0607L3.68934 11L4.21967 10.4697L7.29289 7.39645Z",fill:"currentColor",fillRule:"evenodd"})})},te=function(e){var n=e.size,t=void 0===n?16:n,o=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t}(e,["size"]);return(0,r.jsx)("svg",ee({height:t,style:ee({color:"currentcolor"},o.style),viewBox:"0 0 16 16",width:t},o,{children:(0,r.jsx)("path",{clipRule:"evenodd",d:"M3 3H13V13H3V3Z",fill:"currentColor",fillRule:"evenodd"})}))},re=function(){return(0,r.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"stroke-[2]",children:[(0,r.jsx)("path",{d:"M10 4V4C8.13623 4 7.20435 4 6.46927 4.30448C5.48915 4.71046 4.71046 5.48915 4.30448 6.46927C4 7.20435 4 8.13623 4 10V13.6C4 15.8402 4 16.9603 4.43597 17.816C4.81947 18.5686 5.43139 19.1805 6.18404 19.564C7.03968 20 8.15979 20 10.4 20H14C15.8638 20 16.7956 20 17.5307 19.6955C18.5108 19.2895 19.2895 18.5108 19.6955 17.5307C20 16.7956 20 15.8638 20 14V14",stroke:"currentColor",strokeLinecap:"square"}),(0,r.jsx)("path",{d:"M12.4393 14.5607L19.5 7.5C20.3284 6.67157 20.3284 5.32843 19.5 4.5C18.6716 3.67157 17.3284 3.67157 16.5 4.5L9.43934 11.5607C9.15804 11.842 9 12.2235 9 12.6213V15H11.3787C11.7765 15 12.158 14.842 12.4393 14.5607Z",stroke:"currentColor",strokeLinecap:"square"})]})},oe=function(){return(0,r.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:(0,r.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})})},ae=function(){return(0,r.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:(0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})},se=function(){return(0,r.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:(0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})},ie=function(){return(0,r.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:(0,r.jsx)("path",{d:"M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"})})},le=function(){return(0,r.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:(0,r.jsx)("path",{d:"M8 5v14l11-7z"})})},ce=function(){return(0,r.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:(0,r.jsx)("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})})},de=function(){return(0,r.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:(0,r.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"})})},ue=function(){return(0,r.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:(0,r.jsx)("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})})},pe=function(e){var n=e.isActive;return(0,r.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",className:n?"text-blue-500":"",children:(0,r.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})})},he=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),me=function(e){function n(n){var t=e.call(this,n)||this;return t.buttonRef=a().createRef(),t.inputRef=a().createRef(),t.listRef=a().createRef(),t.handleDocumentClick=function(e){if(t.state.isOpen){var n=e.target,r=t.buttonRef.current,o=t.listRef.current;r&&r.contains(n)||o&&o.contains(n)||t.closeMenu()}},t.openMenu=function(){t.props.disabled||t.props.loading||t.state.isOpen||t.setState({isOpen:!0})},t.closeMenu=function(){(t.state.isOpen||""!==t.state.query)&&t.setState({isOpen:!1,query:"",activeIndex:-1},(function(){var e=t.buttonRef.current;e&&e.focus({preventScroll:!0})}))},t.toggleMenu=function(){t.state.isOpen?t.closeMenu():t.openMenu()},t.handleSelect=function(e){e.disabled||(t.props.onSelect(e.value),t.closeMenu())},t.handleButtonKeyDown=function(e){if(!t.props.disabled&&!t.props.loading)return"ArrowDown"===e.key||"ArrowUp"===e.key?(e.preventDefault(),void(t.state.isOpen||t.openMenu())):"Enter"===e.key||" "===e.key?(e.preventDefault(),void t.toggleMenu()):void(1!==e.key.length||e.altKey||e.ctrlKey||e.metaKey||(e.preventDefault(),t.setState((function(n){return{isOpen:!0,query:"".concat(n.isOpen?n.query:"").concat(e.key)}}))))},t.handleInputChange=function(e){t.setState({query:e.target.value})},t.handleInputKeyDown=function(e){if(t.state.isOpen){var n=t.getFilteredOptions(),r=n.length;if("ArrowDown"!==e.key)if("ArrowUp"!==e.key)if("Enter"!==e.key)"Escape"===e.key&&(e.preventDefault(),t.closeMenu());else{e.preventDefault();var o=t.state.activeIndex;o>=0&&o<r&&t.handleSelect(n[o])}else{if(e.preventDefault(),0===r)return;t.setState((function(e){var n=e.activeIndex-1;return{activeIndex:n<0?r-1:n}}))}else{if(e.preventDefault(),0===r)return;t.setState((function(e){var n=e.activeIndex+1;return{activeIndex:n>=r?0:n}}))}}},t.handleOptionMouseEnter=function(e){e!==t.state.activeIndex&&t.setState({activeIndex:e})},t.handleOptionMouseDown=function(e,n){e.preventDefault(),t.handleSelect(n)},t.state={isOpen:!1,query:"",activeIndex:-1},t}return he(n,e),n.prototype.componentDidMount=function(){document.addEventListener("mousedown",this.handleDocumentClick)},n.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.handleDocumentClick)},n.prototype.componentDidUpdate=function(e,n){!n.isOpen&&this.state.isOpen&&this.focusInput(),n.isOpen===this.state.isOpen&&n.query===this.state.query&&e.options===this.props.options&&e.value===this.props.value||this.syncActiveIndex()},n.prototype.focusInput=function(){var e=this.inputRef.current;e&&(e.focus({preventScroll:!0}),e.select())},n.prototype.getFilteredOptions=function(){var e=this.props.options,n=this.state.query.trim().toLowerCase();return n?e.filter((function(e){return function(e,n,t){if(t||2===arguments.length)for(var r,o=0,a=n.length;o<a;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))}([e.label,e.description],e.keywords||[],!0).filter(Boolean).join(" ").toLowerCase().includes(n)})):e},n.prototype.syncActiveIndex=function(){var e=this;if(this.state.isOpen){var n=this.getFilteredOptions();if(0!==n.length){var t=n.findIndex((function(n){return n.value===e.props.value})),r=t>=0?t:this.state.activeIndex;(r<0||r>=n.length)&&(r=0),r!==this.state.activeIndex&&this.setState({activeIndex:r})}else-1!==this.state.activeIndex&&this.setState({activeIndex:-1})}else-1!==this.state.activeIndex&&this.setState({activeIndex:-1})},n.prototype.render=function(){var e=this,n=this.props,t=n.id,o=n.value,a=n.placeholder,s=n.searchPlaceholder,i=n.noResultsText,l=n.disabled,c=n.loading,d=n.className,u=n.triggerClassName,p=n.menuClassName,h=n.inputClassName,m=n.renderOption,g=n.renderValue,f=this.state,v=f.isOpen,b=f.activeIndex,x=f.query,y=this.getFilteredOptions(),w=this.props.options.find((function(e){return e.value===o}))||null,k="".concat(t,"-listbox"),S=v&&b>=0?"".concat(t,"-option-").concat(b):void 0;return(0,r.jsxs)("div",{className:"searchable-dropdown ".concat(d," ").concat(v?"open":""," ").concat(l||c?"disabled":"").trim(),role:"combobox","aria-haspopup":"listbox","aria-owns":k,"aria-expanded":v,"aria-controls":v?k:void 0,children:[(0,r.jsxs)("button",{ref:this.buttonRef,type:"button",className:"searchable-dropdown-trigger ".concat(u).trim(),"aria-haspopup":"listbox","aria-expanded":v,"aria-controls":v?k:void 0,"aria-disabled":l||c,onClick:this.toggleMenu,onKeyDown:this.handleButtonKeyDown,disabled:l||c,children:[(0,r.jsx)("span",{className:"searchable-dropdown-value",children:c?"Loading...":g?g(w):(null==w?void 0:w.label)||a}),(0,r.jsx)("span",{className:"searchable-dropdown-icon","aria-hidden":"true",children:"â–¾"})]}),v&&(0,r.jsxs)("div",{ref:this.listRef,className:"searchable-dropdown-menu ".concat(p).trim(),children:[(0,r.jsx)("div",{className:"searchable-dropdown-search",children:(0,r.jsx)("input",{ref:this.inputRef,type:"text",className:"searchable-dropdown-input ".concat(h).trim(),placeholder:s,value:x,onChange:this.handleInputChange,onKeyDown:this.handleInputKeyDown,"aria-controls":k,"aria-activedescendant":S})}),(0,r.jsx)("div",{className:"searchable-dropdown-options",role:"listbox",id:k,children:0===y.length?(0,r.jsx)("div",{className:"searchable-dropdown-empty",role:"alert",children:i}):y.map((function(n,a){var s="".concat(t,"-option-").concat(a),i=n.value===o,l=a===b;return(0,r.jsx)("div",{id:s,role:"option","aria-selected":i,"aria-disabled":n.disabled,className:"searchable-dropdown-option ".concat(i?"selected":""," ").concat(l?"active":""," ").concat(n.disabled?"disabled":"").trim(),onMouseDown:function(t){return e.handleOptionMouseDown(t,n)},onMouseEnter:function(){return e.handleOptionMouseEnter(a)},children:m?m(n,{isActive:l,isSelected:i}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"searchable-dropdown-option-label",children:n.label}),n.description&&(0,r.jsx)("span",{className:"searchable-dropdown-option-description",children:n.description})]})},s)}))})]})]})},n.defaultProps={placeholder:"Select...",searchPlaceholder:"Type to search...",noResultsText:"No results found",disabled:!1,loading:!1,className:"",triggerClassName:"",menuClassName:"",inputClassName:""},n}(a().Component);const ge=me;var fe=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),ve=function(e,n,t){if(t||2===arguments.length)for(var r,o=0,a=n.length;o<a;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))};const be=function(e){function n(n){var t=e.call(this,n)||this;return t.menuButtonRef=null,t.menuRef=null,t.handleDocumentClick=function(e){var n,r,o=e.target;t.state.isMenuOpen&&o&&!(null===(n=t.menuRef)||void 0===n?void 0:n.contains(o))&&!(null===(r=t.menuButtonRef)||void 0===r?void 0:r.contains(o))&&t.setState({isMenuOpen:!1})},t.handleModelSelect=function(e){var n=t.props.onModelChange;n&&n(t.emitSelectEvent(e))},t.handlePersonaSelect=function(e){var n=t.props.onPersonaChange;n&&n(t.emitSelectEvent(e))},t.handleConversationSelect=function(e){var n=t.props,r=n.onConversationSelect,o=n.onNewChatClick;if(!e)return o(),void t.setState({isMenuOpen:!1});r(t.emitSelectEvent(e)),t.setState({isMenuOpen:!1})},t.state={isMenuOpen:!1},t}return fe(n,e),n.prototype.componentDidMount=function(){document.addEventListener("mousedown",this.handleDocumentClick)},n.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.handleDocumentClick)},n.prototype.emitSelectEvent=function(e){return{target:{value:e},currentTarget:{value:e}}},n.prototype.render=function(){var e=this,n=this.props,t=n.models,o=n.selectedModel,a=n.isLoadingModels,s=(n.onModelChange,n.showModelSelection),i=(n.selectedCollection,n.personas),l=n.selectedPersona,c=(n.onPersonaChange,n.showPersonaSelection),d=n.conversations,u=n.selectedConversation,p=(n.onConversationSelect,n.onNewChatClick),h=n.showConversationHistory,m=n.isLoading,g=n.isLoadingHistory,f=t.map((function(e){return{value:"".concat(e.provider,"_").concat(e.serverId,"_").concat(e.name),label:"".concat(e.name," (").concat(e.serverName,")"),keywords:[e.provider,e.serverName,e.name]}})),v=ve([{value:"",label:"No Persona"}],i.map((function(e){return{value:e.id,label:e.name,keywords:[e.description||"",e.name]}})),!0),b=ve([{value:"",label:"Start New Chat"}],d.map((function(e){return{value:e.id,label:e.title||"Untitled",description:e.updated_at||e.created_at?L(e.updated_at||e.created_at):void 0,keywords:[e.title||"",e.id]}})),!0),x=o?"".concat(o.provider,"_").concat(o.serverId,"_").concat(o.name):"",y=(null==l?void 0:l.id)||"",w=(null==u?void 0:u.id)||"";return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"chat-header-redesigned",children:[s&&(0,r.jsxs)("div",{className:"header-model-section",children:[(0,r.jsx)("label",{className:"header-label",children:"Models"}),(0,r.jsx)(ge,{id:"model-selection",value:x,options:f,onSelect:this.handleModelSelect,placeholder:0===t.length?"No models available":"Select model",searchPlaceholder:"Search models",noResultsText:"No models found",disabled:0===t.length,loading:a,triggerClassName:"header-select"})]}),c&&(0,r.jsxs)("div",{className:"header-persona-section",children:[(0,r.jsx)("label",{className:"header-label",children:"Persona"}),(0,r.jsx)(ge,{id:"persona-selection",value:y,options:v,onSelect:this.handlePersonaSelect,placeholder:"No Persona",searchPlaceholder:"Search personas",noResultsText:"No personas found",disabled:this.props.isLoading||this.props.isLoadingHistory,triggerClassName:"header-select"})]}),h&&(0,r.jsxs)("div",{className:"header-history-section",children:[(0,r.jsx)("label",{className:"header-label",children:"History"}),(0,r.jsx)(ge,{id:"conversation-selection",value:w,options:b,onSelect:this.handleConversationSelect,placeholder:"Start New Chat",searchPlaceholder:"Search conversations",noResultsText:"No conversations found",disabled:m||g,loading:g,triggerClassName:"header-select header-select-history",renderOption:function(e,n){var t=n.isSelected;return(0,r.jsxs)("div",{className:"searchable-dropdown-option-content",children:[(0,r.jsxs)("span",{className:"searchable-dropdown-option-label",children:[e.label,t?" (current)":""]}),e.description&&(0,r.jsx)("span",{className:"searchable-dropdown-option-description",children:e.description})]})},renderValue:function(e){return e?e.description?"".concat(e.label," â€¢ ").concat(e.description):e.label:"Start New Chat"}}),(0,r.jsxs)("div",{className:"history-actions-wrapper",style:{position:"relative"},children:[(0,r.jsx)("button",{className:"header-icon-only",ref:function(n){return e.menuButtonRef=n},onClick:function(){return e.setState({isMenuOpen:!e.state.isMenuOpen})},title:"Conversation actions",disabled:!u||m||g,"aria-haspopup":"menu","aria-expanded":this.state.isMenuOpen,children:(0,r.jsx)(oe,{})}),this.state.isMenuOpen&&u&&(0,r.jsxs)("div",{className:"conversation-menu",ref:function(n){return e.menuRef=n},role:"menu",style:{top:"calc(100% + 6px)"},children:[(0,r.jsx)("div",{className:"conversation-menu-item datetime",children:u.updated_at?"Updated ".concat(L(u.updated_at)):"Created ".concat(L(u.created_at))}),(0,r.jsxs)("button",{className:"conversation-menu-item",role:"menuitem",onClick:function(){var n,t;e.setState({isMenuOpen:!1}),null===(t=(n=e.props).onRenameSelectedConversation)||void 0===t||t.call(n,u.id)},children:[(0,r.jsx)(ae,{}),(0,r.jsx)("span",{children:"Rename"})]}),(0,r.jsxs)("button",{className:"conversation-menu-item danger",role:"menuitem",onClick:function(){var n,t;e.setState({isMenuOpen:!1}),null===(t=(n=e.props).onDeleteSelectedConversation)||void 0===t||t.call(n,u.id)},children:[(0,r.jsx)(se,{}),(0,r.jsx)("span",{children:"Delete"})]})]})]})]}),(0,r.jsx)("div",{className:"header-actions-section",children:(0,r.jsx)("button",{className:"header-new-chat-button",onClick:p,disabled:m,title:"Start New Chat",children:(0,r.jsx)(re,{})})})]})})},n}(a().Component);var xe=t(2391),ye=t(8969),we=function(e,n){if(void 0===n&&(n=280),!e)return"";var t=e.replace(/\s+/g," ").trim();return t.length<=n?t:t.slice(0,n)+"â€¦"},ke=function(e,n){var t="number"==typeof e.chunk_index?"#".concat(e.chunk_index):"#".concat(n);return"Excerpt ".concat(t)};const Se=function(e){var n=e.chunks,t=e.intent,o=e.metadata;return Array.isArray(n)&&0!==n.length?(0,r.jsxs)("div",{className:"retrieved-chunks-preview",children:[(0,r.jsxs)("div",{className:"retrieved-chunks-header",children:[t&&(0,r.jsxs)("div",{className:"retrieved-intent",children:[(0,r.jsxs)("div",{className:"retrieved-intent-type",children:["Intent: ",(0,r.jsx)("strong",{children:t.type})]}),t.reasoning&&(0,r.jsx)("div",{className:"retrieved-intent-reasoning",children:t.reasoning})]}),o&&Array.isArray(o.transformed_queries)&&o.transformed_queries.length>0&&(0,r.jsxs)("div",{className:"retrieved-transformed-queries",children:[(0,r.jsx)("div",{className:"retrieved-queries-title",children:"Transformed queries:"}),(0,r.jsx)("ul",{className:"retrieved-queries-list",children:o.transformed_queries.slice(0,5).map((function(e,n){return(0,r.jsx)("li",{className:"retrieved-query-item",children:e},n)}))})]})]}),(0,r.jsx)("div",{className:"retrieved-chunks-list",children:n.map((function(e,n){return(0,r.jsxs)("div",{className:"retrieved-chunk-item",children:[(0,r.jsx)("div",{className:"retrieved-chunk-header",children:(0,r.jsx)("span",{className:"retrieved-chunk-source",children:ke(e,n)})}),(0,r.jsx)("div",{className:"retrieved-chunk-content",children:(0,r.jsx)(xe.oz,{remarkPlugins:[ye.A],children:we(e.content,1200)})})]},e.id||n)}))})]}):null};var je=t(7622),Ce=t(1213),Ne=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const _e=function(e){function n(n){var t=e.call(this,n)||this;t.copyToClipboard=function(){return e=t,n=void 0,o=function(){var e,n=this;return function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,navigator.clipboard.writeText(this.props.children)];case 1:return t.sent(),this.setState({isCopied:!0}),setTimeout((function(){n.setState({isCopied:!1})}),2e3),[3,3];case 2:return e=t.sent(),console.error("Failed to copy code:",e),[3,3];case 3:return[2]}}))},new((r=void 0)||(r=Promise))((function(t,a){function s(e){try{l(o.next(e))}catch(e){a(e)}}function i(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(e){e(n)}))).then(s,i)}l((o=o.apply(e,n||[])).next())}));var e,n,r,o},t.toggleCollapse=function(){console.log("ðŸ”§ EnhancedCodeBlock toggleCollapse called, current state: ".concat(t.state.isCollapsed)),t.setState((function(e){var n=!e.isCollapsed;return console.log("ðŸ”§ EnhancedCodeBlock setting isCollapsed to: ".concat(n)),{isCollapsed:n}}))};var r=n.children.split("\n");return t.contentHash=t.generateContentHash(n.children),t.state={isCollapsed:!1,isCopied:!1},console.log("ðŸ”§ EnhancedCodeBlock created with hash: ".concat(t.contentHash.substring(0,8),", ").concat(r.length," lines, collapsible: ").concat(r.length>3)),t}return Ne(n,e),n.prototype.componentDidMount=function(){console.log("ðŸ”§ EnhancedCodeBlock mounted, isCollapsed: ".concat(this.state.isCollapsed))},n.prototype.componentDidUpdate=function(e,n){n.isCollapsed!==this.state.isCollapsed&&console.log("ðŸ”§ EnhancedCodeBlock collapse state changed: ".concat(n.isCollapsed," -> ").concat(this.state.isCollapsed))},n.prototype.generateContentHash=function(e){for(var n=0,t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n&=n;return Math.abs(n).toString(16)},Object.defineProperty(n.prototype,"detectedLanguage",{get:function(){var e,n;return this.props.language||(null===(n=null===(e=this.props.className)||void 0===e?void 0:e.match(/language-(\w+)/))||void 0===n?void 0:n[1])||"text"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lines",{get:function(){return this.props.children.split("\n")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isCollapsible",{get:function(){return this.lines.length>3},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"displayLines",{get:function(){return this.state.isCollapsed?this.lines.slice(0,3):this.lines},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"displayContent",{get:function(){return this.displayLines.join("\n")},enumerable:!1,configurable:!0}),n.prototype.render=function(){this.props.className;var e=this.state,n=e.isCollapsed,t=e.isCopied;return(0,r.jsxs)("div",{className:"enhanced-code-block",children:[(0,r.jsxs)("div",{className:"code-block-header",children:[(0,r.jsxs)("div",{className:"code-block-info",children:[(0,r.jsx)("span",{className:"code-language",children:this.detectedLanguage}),(0,r.jsxs)("span",{className:"code-lines",children:[this.lines.length," line",1!==this.lines.length?"s":""]})]}),(0,r.jsxs)("div",{className:"code-block-actions",children:[this.isCollapsible&&(0,r.jsx)("button",{onClick:this.toggleCollapse,className:"code-action-btn",title:n?"Expand code":"Collapse code",children:(0,r.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n?(0,r.jsx)("polyline",{points:"6,9 12,15 18,9"}):(0,r.jsx)("polyline",{points:"18,15 12,9 6,15"})})}),(0,r.jsx)("button",{onClick:this.copyToClipboard,className:"code-action-btn ".concat(t?"copied":""),title:t?"Copied!":"Copy code",children:(0,r.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t?(0,r.jsx)("polyline",{points:"20,6 9,17 4,12"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),(0,r.jsx)("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})})]})]}),(0,r.jsxs)("div",{className:"code-block-content ".concat(n?"collapsed":""),children:[(0,r.jsx)(je.A,{language:this.detectedLanguage,style:Ce.A,customStyle:{margin:0,borderRadius:0,fontSize:"0.875rem",lineHeight:1.5,fontFamily:"'Monaco', 'Menlo', 'Ubuntu Mono', monospace"},showLineNumbers:this.lines.length>1,wrapLines:!0,lineNumberStyle:{minWidth:"2.5em",paddingRight:"1em",textAlign:"right",userSelect:"none",color:"#6c757d"},children:this.displayContent}),n&&(0,r.jsx)("button",{className:"code-collapse-indicator",onClick:this.toggleCollapse,title:"Click to expand",children:(0,r.jsxs)("span",{children:["... ",this.lines.length-3," more lines"]})})]})]})},n}(a().Component);var Oe=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const Pe=function(e){function n(n){var t=e.call(this,n)||this;return t.ellipsisTimer=null,t.toggleExpanded=function(){t.setState((function(e){return{isExpanded:!e.isExpanded}}))},t.startEllipsisLoop=function(){null===t.ellipsisTimer&&(t.ellipsisTimer=window.setInterval((function(){t.setState((function(e){return{ellipsisStage:e.ellipsisStage>=0?(e.ellipsisStage+1)%3:0}}))}),500))},t.stopEllipsisLoop=function(e){null!==t.ellipsisTimer&&(window.clearInterval(t.ellipsisTimer),t.ellipsisTimer=null),e&&-1!==t.state.ellipsisStage&&t.setState({ellipsisStage:-1})},t.state={isExpanded:!1,ellipsisStage:-1},t}return Oe(n,e),n.prototype.componentDidMount=function(){this.props.isStreaming&&this.setState({ellipsisStage:0},this.startEllipsisLoop)},n.prototype.componentDidUpdate=function(e){!e.isStreaming&&this.props.isStreaming&&this.setState({isExpanded:!1,ellipsisStage:0},this.startEllipsisLoop),e.isStreaming&&!this.props.isStreaming&&this.stopEllipsisLoop(!0)},n.prototype.componentWillUnmount=function(){this.stopEllipsisLoop(!1)},n.prototype.render=function(){var e=this.props,n=e.children,t=e.isStreaming,o=this.state,a=o.isExpanded,s=o.ellipsisStage,i=n.replace(/<\/?think>/g,"").trim(),l=t&&s>=0?" ".concat(".".repeat(s+1)):"",c="Thinking".concat(l);return(0,r.jsxs)("div",{className:"thinking-block ".concat(a?"expanded":"collapsed"," ").concat(t?"thinking-streaming":""),children:[(0,r.jsxs)("button",{type:"button",className:"thinking-header",onClick:this.toggleExpanded,"aria-expanded":a,children:[(0,r.jsx)("span",{className:"thinking-title",children:c}),(0,r.jsx)("span",{className:"thinking-toggle","aria-hidden":"true",children:a?"â–¼":"â–¶"})]}),(0,r.jsx)("div",{className:"thinking-panel","aria-hidden":!a,children:a&&(0,r.jsx)("div",{className:"thinking-content",children:i})})]})},n}(a().Component);var Me=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ie=function(){return Ie=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},Ie.apply(this,arguments)},Ee=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t},Te=new Set(["ArrowUp","ArrowDown","PageUp","PageDown","Home","End","Space"]);const Re=function(e){function n(n){var t=e.call(this,n)||this;return t.emitScrollIntent=function(e){t.props.onUserScrollIntent&&t.props.onUserScrollIntent(e)},t.handlePointerDown=function(){t.emitScrollIntent("pointer")},t.handleWheel=function(){t.emitScrollIntent("wheel")},t.handleTouchStart=function(){t.emitScrollIntent("touch")},t.handleKeyDown=function(e){Te.has(e.key)&&t.emitScrollIntent("key")},t.toggleSearchResults=function(e){t.setState((function(n){var t=new Set(n.expandedSearchResults);return t.has(e)?t.delete(e):t.add(e),{expandedSearchResults:t}}))},t.toggleDocumentContext=function(e){t.setState((function(n){var t=new Set(n.expandedDocumentContext);return t.has(e)?t.delete(e):t.add(e),{expandedDocumentContext:t}}))},t.toggleRetrievedContext=function(e){t.setState((function(n){var t=new Set(n.expandedRetrievedContext);return t.has(e)?t.delete(e):t.add(e),{expandedRetrievedContext:t}}))},t.renderSearchResult=function(e,n){return(0,r.jsxs)("div",{className:"search-result-item",children:[(0,r.jsxs)("div",{className:"search-result-header",children:[(0,r.jsxs)("span",{className:"search-result-number",children:[n+1,"."]}),(0,r.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"search-result-title",children:e.title})]}),(0,r.jsx)("div",{className:"search-result-url",children:e.url}),e.content&&(0,r.jsx)("div",{className:"search-result-content",children:e.content})]},n)},t.renderDocumentContext=function(e){var n=e.documentData;if(!n)return null;var o=t.state.expandedDocumentContext.has(e.id),a=n.results;return(0,r.jsx)("div",{className:"message message-ai message-document-context",children:(0,r.jsxs)("div",{className:"message-bubble",children:[(0,r.jsxs)("div",{className:"message-body",children:[(0,r.jsxs)("div",{className:"document-context-header",children:[(0,r.jsxs)("div",{className:"document-context-summary",children:[(0,r.jsx)("span",{className:"document-icon",children:"ðŸ“„"}),(0,r.jsx)("span",{className:"document-filename",children:1===a.length?a[0].filename:"".concat(a.length," documents")}),(0,r.jsx)("span",{className:"document-info",children:1===a.length?"".concat(a[0].file_type.toUpperCase()," â€¢ ").concat(a[0].text_length," chars"):"".concat(a.length," files processed")})]}),(0,r.jsxs)("button",{onClick:function(){return t.toggleDocumentContext(e.id)},className:"document-toggle-btn",title:o?"Hide document content":"Show document content",children:[(0,r.jsx)("span",{className:"document-toggle-text",children:o?"Hide":"Show"}),(0,r.jsx)("span",{className:"document-toggle-icon ".concat(o?"expanded":""),children:o?"â–¼":"â–¶"})]})]}),o&&(0,r.jsx)("div",{className:"document-context-content",children:(0,r.jsx)("div",{className:"document-content",children:n.context})})]}),(0,r.jsx)("div",{className:"message-meta",children:(0,r.jsx)("span",{className:"message-timestamp",children:F(e.timestamp)})})]})},e.id)},t.renderRetrievedContext=function(e){var n,o,a=e.retrievalData;if(!a)return null;var s=t.state.expandedRetrievedContext.has(e.id),i=a.chunks;return(0,r.jsx)("div",{className:"message message-ai message-retrieved-context",children:(0,r.jsxs)("div",{className:"message-bubble",children:[(0,r.jsxs)("div",{className:"message-body",children:[(0,r.jsxs)("div",{className:"retrieved-context-header",children:[(0,r.jsxs)("div",{className:"retrieved-context-summary",children:[(0,r.jsx)("span",{className:"retrieved-icon",children:"ðŸ”Ž"}),(0,r.jsxs)("span",{className:"retrieved-count",children:[i.length," retrieved excerpt",1===i.length?"":"s"]})]}),(0,r.jsxs)("button",{onClick:function(){return t.toggleRetrievedContext(e.id)},className:"retrieved-toggle-btn",title:s?"Hide retrieved context":"Show retrieved context",children:[(0,r.jsx)("span",{className:"retrieved-toggle-text",children:s?"Hide":"Show"}),(0,r.jsx)("span",{className:"retrieved-toggle-icon ".concat(s?"expanded":""),children:s?"â–¼":"â–¶"})]})]}),s&&(0,r.jsx)("div",{className:"retrieved-context-content",children:(0,r.jsx)(Se,{chunks:i,intent:null===(n=e.retrievalData)||void 0===n?void 0:n.intent,metadata:null===(o=e.retrievalData)||void 0===o?void 0:o.metadata})})]}),(0,r.jsx)("div",{className:"message-meta",children:(0,r.jsx)("span",{className:"message-timestamp",children:F(e.timestamp)})})]})},e.id)},t.renderSearchResultsMessage=function(e){var n=e.searchData;if(!n)return null;var o=t.state.expandedSearchResults.has(e.id),a=n.scrapedContent&&n.successfulScrapes&&n.successfulScrapes>0;return(0,r.jsx)("div",{className:"message message-ai message-search-results",children:(0,r.jsxs)("div",{className:"message-bubble",children:[(0,r.jsxs)("div",{className:"message-body",children:[(0,r.jsxs)("div",{className:"search-results-header",children:[(0,r.jsxs)("div",{className:"search-results-summary",children:[(0,r.jsx)("span",{className:"search-icon",children:(0,r.jsx)(pe,{})}),(0,r.jsxs)("span",{className:"search-query",children:['"',n.query,'"']}),(0,r.jsxs)("span",{className:"search-count",children:["(",n.totalResults," results)"]}),a&&(0,r.jsxs)("span",{className:"scraping-info",children:["+ ",n.successfulScrapes," pages scraped"]})]}),(0,r.jsxs)("button",{className:"search-toggle-btn",onClick:function(){return t.toggleSearchResults(e.id)},"aria-label":o?"Collapse search results":"Expand search results",children:[(0,r.jsx)("span",{className:"search-toggle-icon",children:o?"â–¼":"â–¶"}),(0,r.jsx)("span",{className:"search-toggle-text",children:o?"Hide sources":"Show sources"})]})]}),o&&(0,r.jsxs)("div",{className:"search-results-content",children:[(0,r.jsx)("div",{className:"search-results-list",children:n.results.map((function(e,n){return t.renderSearchResult(e,n)}))}),a&&(0,r.jsx)("div",{className:"scraping-summary",children:(0,r.jsxs)("div",{className:"scraping-header",children:[(0,r.jsx)("span",{className:"scraping-icon",children:"ðŸ“„"}),(0,r.jsxs)("span",{children:["Detailed content scraped from ",n.successfulScrapes," web page(s)"]})]})})]})]}),(0,r.jsx)("div",{className:"message-meta",children:(0,r.jsx)("span",{className:"message-timestamp",children:F(e.timestamp)})})]})},e.id)},t.renderMessage=function(e){if(e.isSearchResults)return t.renderSearchResultsMessage(e);if(e.isDocumentContext)return t.renderDocumentContext(e);if(e.isRetrievedContext)return t.renderRetrievedContext(e);var n=e.sender,o=e.content,a=e.timestamp,s=e.isStreaming,i=e.isEditable,l=e.isEdited,c=e.canRegenerate,d=e.canContinue,u=e.showRawMarkdown,p=o.indexOf("<think>"),h=o,m=null;if(-1!==p){var g=o.slice(0,p),f=o.slice(p+7),v=f.indexOf("</think>");if(-1!==v){m=f.slice(0,v);var b=f.slice(v+8);h="".concat(g).concat(b)}else m=f,h=g;h=h.trim(),null!==m&&(m=m.trim())}var x,y=t.props.editingMessageId===e.id,w=["message","message-".concat(n),s?"message-streaming":"",y?"message-is-editing":"",u?"message-raw":""].filter(Boolean).join(" ");x=y?(0,r.jsxs)("div",{className:"message-edit-container",children:[(0,r.jsx)("textarea",{value:t.props.editingContent,onChange:function(e){return t.props.onEditingContentChange(e.target.value)},className:"message-edit-input",rows:Math.max(1,t.props.editingContent.split("\n").length),autoFocus:!0}),(0,r.jsxs)("div",{className:"message-edit-actions",children:[(0,r.jsx)("button",{onClick:t.props.onSaveEditing,className:"btn btn-primary btn-sm",disabled:!t.props.editingContent.trim(),children:"Save"}),(0,r.jsx)("button",{onClick:t.props.onCancelEditing,className:"btn btn-secondary btn-sm",children:"Cancel"})]})]}):"user"===n?(0,r.jsx)("div",{className:"message-text user-message-text",children:h}):u?(0,r.jsx)("pre",{className:"raw-markdown-content",children:(0,r.jsx)("code",{children:h})}):(0,r.jsx)(xe.oz,{remarkPlugins:[ye.A],components:{a:function(e){e.node;var n=Ee(e,["node"]);return(0,r.jsx)("a",Ie({},n,{target:"_blank",rel:"noopener noreferrer",className:"markdown-link"}))},code:function(n){n.node;var t=n.inline,o=n.className,a=n.children,s=Ee(n,["node","inline","className","children"]),i=/language-(\w+)/.exec(o||""),l=String(a).replace(/\n$/,"");if(!t&&(l.includes("\n")||o)){var c="".concat(e.id,"-").concat(l.slice(0,50).replace(/\s/g,""),"-").concat(l.length);return(0,r.jsx)(_e,{className:o,language:null==i?void 0:i[1],children:l},c)}return(0,r.jsx)("code",Ie({className:"markdown-inline-code"},s,{children:l}))},blockquote:function(e){e.node;var n=Ee(e,["node"]);return(0,r.jsx)("blockquote",Ie({className:"markdown-blockquote"},n))},table:function(e){e.node;var n=Ee(e,["node"]);return(0,r.jsx)("div",{className:"markdown-table-wrapper",children:(0,r.jsx)("table",Ie({className:"markdown-table"},n))})},th:function(e){e.node;var n=Ee(e,["node"]);return(0,r.jsx)("th",Ie({className:"markdown-table-header"},n))},td:function(e){e.node;var n=Ee(e,["node"]);return(0,r.jsx)("td",Ie({className:"markdown-table-cell"},n))}},children:h});var k="user"===n&&i&&!y?(0,r.jsx)("button",{onClick:function(){return t.props.onStartEditing(e.id,o)},className:"message-action-btn",title:"Edit message",children:(0,r.jsx)(ae,{})}):null,S="ai"!==n||s?null:(0,r.jsxs)("div",{className:"ai-message-actions",children:[(0,r.jsx)("button",{onClick:function(){var n,r;return null===(r=(n=t.props).onToggleMarkdown)||void 0===r?void 0:r.call(n,e.id)},className:"message-action-btn",title:u?"Show formatted view":"Show raw markdown",children:(0,r.jsx)(de,{})}),c&&(0,r.jsx)("button",{onClick:t.props.onRegenerateResponse,className:"message-action-btn",title:"Regenerate response",children:(0,r.jsx)(ie,{})}),d&&(0,r.jsx)("button",{onClick:t.props.onContinueGeneration,className:"message-action-btn",title:"Continue generation",children:(0,r.jsx)(le,{})})]}),j=Boolean(k||S);return(0,r.jsx)("div",{className:w,"data-message-id":e.id,children:(0,r.jsxs)("div",{className:"message-bubble",children:[(0,r.jsxs)("div",{className:"message-body",children:["ai"===n&&m&&(0,r.jsx)(Pe,{isStreaming:s,children:m}),(0,r.jsx)("div",{className:"message-content",children:x}),s&&0===h.length&&(0,r.jsxs)("span",{className:"typing-indicator",role:"status","aria-live":"polite",children:[(0,r.jsx)("span",{className:"typing-dot"}),(0,r.jsx)("span",{className:"typing-dot"}),(0,r.jsx)("span",{className:"typing-dot"})]})]}),(0,r.jsxs)("div",{className:"message-meta",children:[(0,r.jsx)("span",{className:"message-timestamp",children:F(a)}),l&&(0,r.jsx)("span",{className:"message-edited-indicator",children:"Edited"}),j&&(0,r.jsxs)("div",{className:"message-actions",children:[k,S]})]})]})},e.id)},t.renderLoadingIndicator=function(){return(0,r.jsx)("div",{className:"loading-indicator",children:(0,r.jsxs)("div",{className:"loading-dots",children:[(0,r.jsx)("div",{className:"loading-dot"}),(0,r.jsx)("div",{className:"loading-dot"}),(0,r.jsx)("div",{className:"loading-dot"})]})})},t.renderError=function(){return t.props.error?(0,r.jsx)("div",{className:"error-message",children:t.props.error}):null},t.renderEmptyState=function(){return t.props.messages.length>0?null:(0,r.jsxs)("div",{className:"empty-state",children:[(0,r.jsx)("div",{className:"empty-state-icon",children:"ðŸ’¬"}),(0,r.jsx)("div",{className:"empty-state-text",children:"Start a conversation by typing a message below."})]})},t.renderScrollToBottomButton=function(){var e=t.props,n=e.showScrollToBottom,o=e.onScrollToBottom;return n&&o?(0,r.jsx)("button",{type:"button",onClick:o,className:"scroll-to-bottom-button",title:"Scroll to bottom","aria-label":"Scroll to bottom",children:(0,r.jsx)(ce,{})}):null},t.state={expandedSearchResults:new Set,expandedDocumentContext:new Set,expandedRetrievedContext:new Set},t}return Me(n,e),n.prototype.render=function(){var e=this,n=this.props,t=n.messages,o=n.isLoadingHistory,a=n.chatHistoryRef;return(0,r.jsxs)("div",{className:"relative flex-1 flex flex-col min-h-0 max-h-full overflow-hidden",children:[(0,r.jsxs)("div",{ref:a,className:"flex-1 overflow-y-auto overflow-x-hidden px-4 pt-4 pb-24 flex flex-col space-y-4 min-h-0",onScroll:this.props.onScroll,onPointerDown:this.handlePointerDown,onWheel:this.handleWheel,onTouchStart:this.handleTouchStart,onKeyDown:this.handleKeyDown,tabIndex:0,children:[this.renderError(),o&&this.renderLoadingIndicator(),o||0!==t.length?t.map((function(n){return e.renderMessage(n)})):this.renderEmptyState()]}),this.renderScrollToBottomButton()]})},n}(a().Component);var Ae=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const De=function(e){function n(n){var t=e.call(this,n)||this;return t.menuRef=a().createRef(),t.handleClickOutside=function(e){t.menuRef.current&&!t.menuRef.current.contains(e.target)&&t.setState({isMenuOpen:!1})},t.updateMultilineState=function(){var e,n=null===(e=t.props.inputRef)||void 0===e?void 0:e.current;if(n){var r=window.getComputedStyle(n),o=parseFloat(r.lineHeight||"0")||24,a=n.scrollHeight>1.6*o;a!==t.state.isMultiline&&t.setState({isMultiline:a})}},t.handleInputChangeProxy=function(e){t.props.onInputChange(e),requestAnimationFrame(t.updateMultilineState)},t.toggleMenu=function(){t.setState((function(e){return{isMenuOpen:!e.isMenuOpen}}))},t.handleFileUpload=function(){t.props.onFileUpload&&t.props.onFileUpload(),t.setState({isMenuOpen:!1})},t.handlePersonaToggle=function(){t.setState((function(e){var n=!e.showPersonaSelector;return!n&&t.props.onPersonaToggle&&t.props.onPersonaToggle(),console.log("ðŸŽ­ ChatInput: Persona toggle - newShowPersonaSelector: ".concat(n)),{showPersonaSelector:n,isMenuOpen:!1}}))},t.state={isMenuOpen:!1,showPersonaSelector:!1,isMultiline:!1},t}return Ae(n,e),n.prototype.componentDidMount=function(){var e;document.addEventListener("mousedown",this.handleClickOutside),console.log("ðŸŽ­ ChatInput mounted - showPersonaSelection: ".concat(this.props.showPersonaSelection,", selectedPersona: ").concat((null===(e=this.props.selectedPersona)||void 0===e?void 0:e.name)||"null")),this.updateMultilineState()},n.prototype.componentDidUpdate=function(e){var n,t;e.selectedPersona!==this.props.selectedPersona&&console.log("ðŸŽ­ ChatInput: Persona changed from ".concat((null===(n=e.selectedPersona)||void 0===n?void 0:n.name)||"null"," to ").concat((null===(t=this.props.selectedPersona)||void 0===t?void 0:t.name)||"null")),e.showPersonaSelection!==this.props.showPersonaSelection&&(console.log("ðŸŽ­ ChatInput: showPersonaSelection changed from ".concat(e.showPersonaSelection," to ").concat(this.props.showPersonaSelection)),!this.props.showPersonaSelection&&this.state.showPersonaSelector&&(console.log("ðŸŽ­ ChatInput: Syncing local state - turning off persona selector because personas are globally disabled"),this.setState({showPersonaSelector:!1}))),e.inputText!==this.props.inputText&&this.updateMultilineState()},n.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.handleClickOutside)},n.prototype.render=function(){var e=this,n=this.props,t=n.inputText,o=n.isLoading,a=n.isLoadingHistory,s=n.isStreaming,i=n.selectedModel,l=n.promptQuestion,c=(n.onInputChange,n.onKeyPress),d=n.onSendMessage,u=n.onStopGeneration,p=n.inputRef,h=n.personas,m=n.selectedPersona,g=n.onPersonaChange,f=n.showPersonaSelection;return(0,r.jsx)("div",{className:"chat-input-container",children:(0,r.jsx)("div",{className:"chat-input-wrapper",children:(0,r.jsx)("div",{className:"input-with-buttons",children:(0,r.jsxs)("div",{className:"chat-input-row ".concat(this.state.isMultiline?"multiline":""),children:[f&&(0,r.jsxs)("select",{value:(null==m?void 0:m.id)||"",onChange:g,className:"persona-selector",disabled:o||a,title:"Select persona",children:[(0,r.jsx)("option",{value:"",children:"No Persona"}),h.map((function(e){return(0,r.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),(0,r.jsx)("textarea",{ref:p,value:t,onChange:this.handleInputChangeProxy,onKeyDown:function(n){c(n),requestAnimationFrame(e.updateMultilineState)},placeholder:l||"Type your message here...",className:"chat-input",disabled:o||a,rows:1}),(0,r.jsx)("button",{onClick:s?u:d,disabled:!t.trim()&&!s||a||!i,className:"input-button send-button ".concat(s?"stop-button":""),title:s?"Stop generation":"Send message",children:s?(0,r.jsx)(te,{}):(0,r.jsx)(ue,{})})]})})})})},n}(a().Component),Le=function(e){return e.isInitializing?(0,r.jsxs)("div",{className:"loading-indicator",children:[(0,r.jsxs)("div",{className:"loading-dots",children:[(0,r.jsx)("div",{className:"loading-dot"}),(0,r.jsx)("div",{className:"loading-dot"}),(0,r.jsx)("div",{className:"loading-dot"})]}),(0,r.jsx)("div",{className:"loading-text",children:"Initializing chat..."})]}):null};var ze=function(){return ze=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},ze.apply(this,arguments)},Fe=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}))},Ue=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},Be=function(){function e(e){this.currentUserId=null,this.apiService=e,this.initializeUserId()}return e.prototype.initializeUserId=function(){return Fe(this,void 0,void 0,(function(){var e,n;return Ue(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),this.apiService?[4,this.apiService.get("/api/v1/auth/me")]:[3,2];case 1:(e=t.sent())&&e.id&&(this.currentUserId=e.id),t.label=2;case 2:return[3,4];case 3:return n=t.sent(),console.error("Error getting current user ID:",n),[3,4];case 4:return[2]}}))}))},e.prototype.sendPrompt=function(e,n,t,r){return Fe(this,arguments,void 0,(function(e,n,t,r,o,a,s,i,l,c){var d,u,p,h,m,g,f,v,b,x,y;return void 0===o&&(o="chat"),Ue(this,(function(w){switch(w.label){case 0:if(!this.apiService)throw new Error("API service not available");d=[{role:"user",content:e}],u="/api/v1/ai/providers/chat",p={provider:n.provider||"ollama",settings_id:n.providerId||"ollama_servers_settings",server_id:n.serverId,model:n.name,messages:d.map((function(e){return{role:e.role||"user",content:e.content}})),params:{temperature:.7,max_tokens:2048},stream:t,user_id:this.currentUserId||"current",conversation_id:r,conversation_type:o},console.log("ðŸ“¤ AIService sending request with conversation_id: ".concat(r||"null")),i&&(p.page_id=i.pageId,p.page_context=JSON.stringify({pageName:i.pageName,pageRoute:i.pageRoute,isStudioPage:i.isStudioPage})),l&&(p.persona_id=l.id,p.persona_system_prompt=l.system_prompt,p.persona_model_settings=l.model_settings,p.persona_sample_greeting=l.sample_greeting,l.model_settings&&(p.params=ze(ze({},p.params),l.model_settings))),w.label=1;case 1:if(w.trys.push([1,10,,11]),h=!1,!t||"function"!=typeof(null===(y=this.apiService)||void 0===y?void 0:y.postStreaming))return[3,6];w.label=2;case 2:return w.trys.push([2,4,,5]),[4,this.apiService.postStreaming(u,p,(function(e){try{if(null==c?void 0:c.signal.aborted)return;var n=e;if(e.startsWith("data: ")&&(n=e.substring(6)),!n.trim()||"[DONE]"===n.trim())return;var t=JSON.parse(n);t.conversation_id&&!r&&s(t.conversation_id);var o=R(t);o&&a(o)}catch(e){console.error("Error processing streaming chunk:",e)}}),{timeout:12e4,signal:null==c?void 0:c.signal})];case 3:return w.sent(),h=!0,[3,5];case 4:if(m=w.sent(),console.error("Streaming error:",m),m instanceof Error&&"AbortError"!==m.name)throw m;return[3,5];case 5:return[3,9];case 6:return w.trys.push([6,8,,9]),[4,this.apiService.post(u,p,{timeout:6e4})];case 7:if(g=w.sent(),(f=g.data||g).conversation_id&&!r&&s(f.conversation_id),!(v=R(f)))throw new Error("No response text received");return a(v),h=!0,[3,9];case 8:throw b=w.sent(),console.error("Non-streaming error:",b),b;case 9:return[2,h];case 10:return x=w.sent(),console.error("Error in sendPrompt:",x),a("Error: ".concat(x instanceof Error?x.message:"Unknown error occurred")),[2,!1];case 11:return[2]}}))}))},e.prototype.getCurrentUserId=function(){return this.currentUserId},e.prototype.loadConversationWithPersona=function(e){return Fe(this,void 0,void 0,(function(){var n;return Ue(this,(function(t){switch(t.label){case 0:if(!this.apiService)throw new Error("API service not available");t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.apiService.get("/api/v1/conversations/".concat(e,"/with-persona"))];case 2:return[2,t.sent()];case 3:throw n=t.sent(),console.error("Error loading conversation with persona:",n),n;case 4:return[2]}}))}))},e.prototype.updateConversationPersona=function(e,n){return Fe(this,void 0,void 0,(function(){var t;return Ue(this,(function(r){switch(r.label){case 0:if(!this.apiService)throw new Error("API service not available");r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.apiService.put("/api/v1/conversations/".concat(e,"/persona"),{persona_id:n})];case 2:return r.sent(),[3,4];case 3:throw t=r.sent(),console.error("Error updating conversation persona:",t),t;case 4:return[2]}}))}))},e.prototype.cancelGeneration=function(e){return Fe(this,void 0,void 0,(function(){var n;return Ue(this,(function(t){switch(t.label){case 0:if(!this.apiService||!e)return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.apiService.post("/api/v1/ai/providers/cancel",{conversation_id:e})];case 2:return t.sent(),[3,4];case 3:return n=t.sent(),console.error("Error canceling generation:",n),[3,4];case 4:return[2]}}))}))},e}(),Ge=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}))},qe=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},He=function(){function e(e){this.apiService=e||null}return e.prototype.extractData=function(e){return void 0!==e.data?e.data:e},e.prototype.setApiService=function(e){this.apiService=e},e.prototype.getApiService=function(){return this.apiService},e.prototype.getSupportedFileTypes=function(){return Ge(this,void 0,void 0,(function(){var e,n;return qe(this,(function(t){switch(t.label){case 0:if(!this.apiService)throw new Error("API service not available");t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.apiService.get("/api/v1/documents/supported-types")];case 2:return e=t.sent(),[2,this.extractData(e)];case 3:throw n=t.sent(),console.error("Error getting supported file types:",n),n;case 4:return[2]}}))}))},e.prototype.processDocument=function(e){return Ge(this,void 0,void 0,(function(){var n,t,r;return qe(this,(function(o){switch(o.label){case 0:if(!this.apiService)throw new Error("API service not available");o.label=1;case 1:return o.trys.push([1,3,,4]),(n=new FormData).append("file",e),console.log("ðŸ“„ Processing document: ".concat(e.name," (").concat(e.type,", ").concat(e.size," bytes)")),[4,this.apiService.post("/api/v1/documents/process",n,{headers:{"Content-Type":"multipart/form-data"}})];case 2:return t=o.sent(),console.log("âœ… Document processed successfully: ".concat(e.name)),[2,this.extractData(t)];case 3:throw r=o.sent(),console.error("âŒ Error processing document ".concat(e.name,":"),r),r;case 4:return[2]}}))}))},e.prototype.processMultipleDocuments=function(e){return Ge(this,void 0,void 0,(function(){var n,t,r,o;return qe(this,(function(a){switch(a.label){case 0:if(!this.apiService)throw new Error("API service not available");if(0===e.length)throw new Error("No files provided");if(e.length>10)throw new Error("Too many files. Maximum is 10 files");a.label=1;case 1:return a.trys.push([1,3,,4]),n=new FormData,e.forEach((function(e){n.append("files",e)})),console.log("ðŸ“„ Processing ".concat(e.length," documents")),[4,this.apiService.post("/api/v1/documents/process-multiple",n,{headers:{"Content-Type":"multipart/form-data"}})];case 2:return t=a.sent(),r=this.extractData(t),console.log("âœ… Documents processed: ".concat(r.successful_files,"/").concat(r.total_files," successful")),[2,r];case 3:throw o=a.sent(),console.error("âŒ Error processing multiple documents:",o),o;case 4:return[2]}}))}))},e.prototype.isFileTypeSupported=function(e){return Ge(this,void 0,void 0,(function(){var n,t;return qe(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.getSupportedFileTypes()];case 1:return n=r.sent(),[2,e.type in n.supported_types];case 2:return t=r.sent(),console.error("Error checking file type support:",t),[2,!1];case 3:return[2]}}))}))},e.prototype.isFileSizeValid=function(e){return Ge(this,void 0,void 0,(function(){var n,t,r;return qe(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.getSupportedFileTypes()];case 1:return n=o.sent(),t=1024*n.max_file_size_mb*1024,[2,e.size<=t];case 2:return r=o.sent(),console.error("Error checking file size:",r),[2,!1];case 3:return[2]}}))}))},e.prototype.validateFile=function(e){return Ge(this,void 0,void 0,(function(){var n,t,r;return qe(this,(function(o){switch(o.label){case 0:return o.trys.push([0,7,,8]),[4,this.isFileTypeSupported(e)];case 1:return o.sent()?[3,3]:[4,this.getSupportedFileTypes()];case 2:return t=o.sent(),n=Object.keys(t.supported_types).join(", "),[2,{valid:!1,error:"Unsupported file type. Supported types: ".concat(n)}];case 3:return[4,this.isFileSizeValid(e)];case 4:return o.sent()?[3,6]:[4,this.getSupportedFileTypes()];case 5:return t=o.sent(),[2,{valid:!1,error:"File too large. Maximum size is ".concat(t.max_file_size_mb,"MB")}];case 6:return[2,{valid:!0}];case 7:return r=o.sent(),[2,{valid:!1,error:"Error validating file: ".concat(r instanceof Error?r.message:"Unknown error")}];case 8:return[2]}}))}))},e.prototype.formatTextForChatContext=function(e){var n=e.filename,t=e.file_type,r=e.extracted_text,o=e.text_length,a="[DOCUMENT CONTEXT - ".concat(n.toUpperCase(),"]\n");return a+="File Type: ".concat(t,"\n"),a+="Text Length: ".concat(o," characters\n"),(a+="Content:\n\n".concat(r,"\n\n"))+"[END DOCUMENT CONTEXT]"},e.prototype.formatMultipleTextsForChatContext=function(e){var n="[MULTIPLE DOCUMENTS CONTEXT]\n";return n+="Total Documents: ".concat(e.length,"\n\n"),e.forEach((function(e,t){n+="--- Document ".concat(t+1,": ").concat(e.filename," ---\n"),n+="Type: ".concat(e.file_type,"\n"),n+="Length: ".concat(e.text_length," characters\n"),n+="Content:\n".concat(e.extracted_text,"\n\n")})),n+="[END MULTIPLE DOCUMENTS CONTEXT]"},e}(),Ve=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}))},Ke=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},We="".concat(_,"/api/evaluation");function Qe(e){return Ve(this,void 0,void 0,(function(){var n,t;return Ke(this,(function(r){switch(r.label){case 0:return[4,fetch("".concat(We,"/plugin/submit-with-questions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})];case 1:return(n=r.sent()).ok||202===n.status?[3,3]:[4,n.json().catch((function(){return{detail:"Unknown error"}}))];case 2:throw t=r.sent(),new Error(t.detail||"Failed to submit evaluation");case 3:return[2,n.json()]}}))}))}function Ye(){return Ve(this,arguments,void 0,(function(e){var n,t;return void 0===e&&(e=50),Ke(this,(function(r){switch(r.label){case 0:return[4,fetch("".concat(We,"/runs?limit=").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}})];case 1:return(n=r.sent()).ok?[3,3]:[4,n.json().catch((function(){return{detail:"Unknown error"}}))];case 2:throw t=r.sent(),new Error(t.detail||"Failed to fetch evaluation runs");case 3:return[2,n.json()]}}))}))}function Xe(e){return Ve(this,void 0,void 0,(function(){var n,t;return Ke(this,(function(r){switch(r.label){case 0:return[4,fetch("".concat(We,"/results/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}})];case 1:return(n=r.sent()).ok?[3,3]:[4,n.json().catch((function(){return{detail:"Unknown error"}}))];case 2:throw t=r.sent(),new Error(t.detail||"Failed to fetch evaluation results");case 3:return[2,n.json()]}}))}))}function Je(e){return Ve(this,void 0,void 0,(function(){var n,t;return Ke(this,(function(r){switch(r.label){case 0:return[4,fetch("".concat(We,"/plugin/start-with-questions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})];case 1:return(n=r.sent()).ok?[3,3]:[4,n.json().catch((function(){return{detail:"Unknown error"}}))];case 2:throw t=r.sent(),new Error(t.detail||"Failed to start evaluation with questions");case 3:return[2,n.json()]}}))}))}var Ze=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),$e=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}))},en=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}};!function(e){function n(n){var t=e.call(this,n)||this;return t.fileInputRef=a().createRef(),t.initDocumentService=function(){return $e(t,void 0,void 0,(function(){var e,n,t;return en(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),this.props.apiService?(e=new He(this.props.apiService),this.setState({documentService:e}),[4,e.getSupportedFileTypes()]):[3,2];case 1:n=r.sent(),this.setState({supportedTypes:n}),r.label=2;case 2:return[3,4];case 3:return t=r.sent(),console.error("Error initializing document service:",t),[3,4];case 4:return[2]}}))}))},t.handleFileSelect=function(e){return $e(t,void 0,void 0,(function(){var n,t,r,o,a,s,i,l,c,d;return en(this,(function(u){switch(u.label){case 0:if(!(n=e.target.files)||0===n.length)return[2];if(!this.state.documentService)return this.props.onError("Document service not available"),[2];this.setState({isProcessing:!0}),u.label=1;case 1:u.trys.push([1,9,10,11]),t=Array.from(n),r=[],o=0,a=t,u.label=2;case 2:if(!(o<a.length))return[3,8];s=a[o],u.label=3;case 3:return u.trys.push([3,6,,7]),[4,this.state.documentService.validateFile(s)];case 4:return(i=u.sent()).valid?[4,this.state.documentService.processDocument(s)]:(this.props.onError("File ".concat(s.name,": ").concat(i.error)),[3,7]);case 5:return(l=u.sent()).processing_success?r.push(l):this.props.onError("Failed to process ".concat(s.name,": ").concat(l.error)),[3,7];case 6:return c=u.sent(),this.props.onError("Error processing ".concat(s.name,": ").concat(c instanceof Error?c.message:"Unknown error")),[3,7];case 7:return o++,[3,2];case 8:return r.length>0&&this.props.onDocumentsProcessed(r),[3,11];case 9:return d=u.sent(),this.props.onError("Error processing documents: ".concat(d instanceof Error?d.message:"Unknown error")),[3,11];case 10:return this.setState({isProcessing:!1}),this.fileInputRef.current&&(this.fileInputRef.current.value=""),[7];case 11:return[2]}}))}))},t.handleClick=function(){!t.props.disabled&&t.fileInputRef.current&&t.fileInputRef.current.click()},t.getAcceptedFileTypes=function(){return t.state.supportedTypes?Object.keys(t.state.supportedTypes.supported_types).join(","):""},t.state={isProcessing:!1,supportedTypes:null,documentService:null},t}Ze(n,e),n.prototype.componentDidMount=function(){this.initDocumentService()},n.prototype.render=function(){var e=this.props,n=e.disabled,t=e.className,o=void 0===t?"":t,a=this.state,s=a.isProcessing,i=a.supportedTypes;return(0,r.jsxs)("div",{className:"file-upload-container ".concat(o),children:[(0,r.jsx)("input",{ref:this.fileInputRef,type:"file",multiple:!0,accept:this.getAcceptedFileTypes(),onChange:this.handleFileSelect,style:{display:"none"},disabled:n||s}),(0,r.jsx)("button",{onClick:this.handleClick,disabled:n||s,className:"file-upload-button",title:"Upload documents (PDF, TXT, CSV, JSON, Excel)",children:s?(0,r.jsxs)("div",{className:"file-upload-loading",children:[(0,r.jsx)("div",{className:"loading-spinner"}),(0,r.jsx)("span",{children:"Processing..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ne,{}),(0,r.jsx)("span",{children:"Upload Documents"})]})}),i&&(0,r.jsx)("div",{className:"file-upload-info",children:(0,r.jsxs)("small",{children:["Supported: PDF, TXT, CSV, JSON, Excel â€¢ Max: ",i.max_file_size_mb,"MB â€¢ Up to ",i.max_files_per_request," files"]})})]})}}(a().Component);var nn,tn,rn,on=t(8697),an=t(4796),sn=t(4471),ln=t(7235),cn=t(8309),dn=t(2708);!function(e){e.COLLECTIONS="collections",e.DOCUMENTS="documents",e.CHAT="chat",e.SETTINGS="settings",e.EVALUATION="evaluation"}(nn||(nn={})),function(e){e.UPLOADED="uploaded",e.PROCESSING="processing",e.PROCESSED="processed",e.FAILED="failed"}(tn||(tn={})),function(e){e.ACTIVE="active",e.INACTIVE="inactive",e.ARCHIVED="archived"}(rn||(rn={}));var un=function(e){var n=e.document,t=e.onDocumentDelete,o=(function(e){switch(e){case tn.PROCESSED:return"ditem-status-badge ditem-status-processed";case tn.PROCESSING:return"ditem-status-badge ditem-status-processing";case tn.FAILED:;}}(n.status),function(e){switch(e.toLowerCase()){case"pdf":case"doc":case"docx":case"txt":return"file-text";default:return"file"}}(n.document_type)),a=function(e){if(0===e)return"0 Bytes";var n=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,n)).toFixed(2))+" "+["Bytes","KB","MB","GB"][n]}(n.file_size),s=n.processed_at?D(n.processed_at):"Processing...";return(0,r.jsxs)("div",{className:"ditem-card",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-3 flex-1",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("i",{"data-lucide":o,className:"h-8 w-8 text-gray-400"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h5",{className:"ditem-title truncate",children:n.original_filename}),(0,r.jsxs)("div",{className:"ditem-meta",children:[(0,r.jsx)("span",{children:a}),(0,r.jsx)("span",{children:n.document_type.toUpperCase()}),n.chunk_count&&(0,r.jsxs)("span",{children:[n.chunk_count," chunks"]})]}),(0,r.jsxs)("div",{className:"ditem-dates",children:[(0,r.jsxs)("span",{children:["Uploaded: ",D(n.created_at)]}),n.processed_at&&(0,r.jsxs)("span",{className:"ml-4",children:["Processed: ",s]})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:["processing"===n.status||"uploaded"===n.status?(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-0.5 mr-1 h-4 w-4 text-yellow-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}),"processing"]}):"processed"===n.status?(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"processed"}):"failed"===n.status?(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"failed"}):(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:n.status}),(0,r.jsxs)("div",{className:"flex space-x-1",children:[(0,r.jsx)("button",{className:"ditem-action-btn",title:"Download ".concat(n.original_filename),children:(0,r.jsx)(cn.A,{className:"h-4 w-4"})}),(0,r.jsx)("button",{onClick:function(){return t(n.id,n.original_filename)},className:"ditem-action-btn danger",title:"Delete ".concat(n.original_filename),children:(0,r.jsx)(dn.A,{className:"h-4 w-4"})})]})]})]}),(0,r.jsx)("div",{className:"p-4 hover:bg-gray-50 hidden",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[function(e){switch(e){case tn.PROCESSED:return(0,r.jsx)(sn.A,{className:"h-5 w-5 text-green-500"});case tn.PROCESSING:return(0,r.jsx)(w.A,{className:"h-5 w-5 text-blue-500 animate-spin"});case tn.FAILED:return(0,r.jsx)(k.A,{className:"h-5 w-5 text-red-500"});default:return(0,r.jsx)(ln.A,{className:"h-5 w-5 text-gray-500"})}}(n.status),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:n.original_filename}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[n.document_type," â€¢ ",(n.file_size/1024).toFixed(1)," KB",n.chunk_count>0&&" â€¢ ".concat(n.chunk_count," chunks")]})]})]}),(0,r.jsx)("button",{onClick:function(){return t(n.id,n.original_filename)},className:"p-1 text-gray-400 hover:text-red-600",title:"Delete ".concat(n.original_filename),children:(0,r.jsx)(dn.A,{className:"h-4 w-4"})})]})})]})},pn=t(827),hn=function(){return(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(pn.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No documents yet"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Upload your first document to get started"})]})},mn=function(e){var n=e.documents,t=e.onDocumentDelete,o=e.maxHeight,a=void 0===o?"max-h-96":o;return(0,r.jsx)("div",{className:"dlist-container",children:0===n.length?(0,r.jsx)(hn,{}):(0,r.jsx)("div",{className:"dlist-scroll ".concat(a," space-y-3"),children:n.map((function(e){return(0,r.jsx)(un,{document:e,onDocumentDelete:t},e.id)}))})})},gn=null,fn=0;function vn(e,n,t){void 0===n&&(n="info"),void 0===t&&(t=1e4),gn||function(){if(!document.getElementById("toast-container")){var e=document.createElement("div");e.id="toast-container",e.className="fixed bottom-8 right-4 z-100 space-y-2 pointer-events-none",document.body.appendChild(e),gn=e}}();var r,o,a=gn,s="toast-".concat(++fn),i=document.createElement("div");i.id=s,i.className="\n    ".concat({success:"bg-green-500",error:"bg-red-500",warning:"bg-yellow-500",info:"bg-blue-500"}[n]," text-white px-4 py-3 rounded-lg shadow-lg\n    transform transition-all duration-300 translate-x-full opacity-0\n    pointer-events-auto cursor-pointer flex items-center space-x-2\n    max-w-sm\n  ").replace(/\s+/g," ").trim(),i.innerHTML='\n    <span class="text-sm font-medium">'.concat({success:"âœ“",error:"âœ•",warning:"âš ",info:"â„¹"}[n],'</span>\n    <span class="text-sm flex-1">').concat((r=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),(o=document.createElement("div")).textContent=r,o.innerHTML),'</span>\n    <button class="ml-2 text-white hover:text-gray-200 text-lg leading-none" onclick="this.parentElement.remove()">&times;</button>\n  '),i.addEventListener("click",(function(e){"BUTTON"!==e.target.tagName&&bn(i)})),a.appendChild(i),requestAnimationFrame((function(){i.classList.remove("translate-x-full","opacity-0")})),t>0&&setTimeout((function(){return bn(i)}),t)}function bn(e){e.classList.add("translate-x-full","opacity-0"),setTimeout((function(){e.parentElement&&e.parentElement.removeChild(e)}),300)}function xn(e){if(0===e)return"0 Bytes";var n=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,n)).toFixed(1))+" "+["Bytes","KB","MB","GB"][n]}var yn=new Map;function wn(e){var n=yn.get(e);n&&(clearInterval(n),yn.delete(e))}var kn=function(){return kn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},kn.apply(this,arguments)},Sn=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}))},jn=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},Cn=function(e,n,t){if(t||2===arguments.length)for(var r,o=0,a=n.length;o<a;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))},Nn=function(){function e(e){var n=this;this.listeners=new Set,this.uploadFile=function(e,t){return Sn(n,void 0,void 0,(function(){var n,r,o,a,s,i,l,c=this;return jn(this,(function(d){switch(d.label){case 0:if(n=function(e){var n,t=10485760,r=P;if(e.size>t)return{isValid:!1,error:'File "'.concat(e.name,'" is too large (max ').concat(xn(t),")")};if(r.length>0){var o=(n=e.name).substring(n.lastIndexOf("."));if(!r.some((function(e){return e.toLowerCase()===o.toLowerCase()})))return{isValid:!1,error:'File "'.concat(e.name,'" has an unsupported extension. Allowed extensions: ').concat(r.join(", "))}}return{isValid:!0,file:e}}(e),!n.isValid)return vn(n.error,"error"),[2];r=function(e,n){var t;return{id:"temp-"+Math.random().toString(36).substring(2,9),filename:"",original_filename:e.name,file_path:"",file_size:e.size,document_type:(null===(t=e.name.split(".").pop())||void 0===t?void 0:t.toLowerCase())||"unknown",collection_id:n,status:"processing",created_at:(new Date).toISOString(),processed_at:null,metadata:{},chunk_count:0,isPlaceholder:!0}}(e,t),this.updateState({documents:Cn([r],this.state.documents,!0),uploading:!0}),(o=new FormData).append("file",e),o.append("collection_id",t),d.label=1;case 1:return d.trys.push([1,4,,5]),[4,fetch("".concat(_,"/documents/"),{method:"POST",body:o})];case 2:if(!(a=d.sent()).ok)throw new Error("Upload failed: ".concat(a.statusText));return[4,a.json()];case 3:return(s=d.sent())&&(vn('Successfully uploaded "'.concat(e.name,'"'),"success"),this.updateState({documents:this.state.documents.map((function(e){return e.id===r.id?kn(kn({},s),{isPlaceholder:!1}):e}))}),function(e,n,t){var r=this;void 0===t&&(t={});var o=t.apiBase,a=void 0===o?"/api":o,s=t.pollInterval,i=void 0===s?2e3:s,l=t.maxAttempts,c=void 0===l?60:l,d=t.onComplete,u=t.onError;wn(e);var p=0,h=setInterval((function(){return t=r,o=void 0,i=function(){var t,r,o;return function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(s){switch(s.label){case 0:p++,s.label=1;case 1:return s.trys.push([1,4,,5]),[4,fetch("".concat(a,"/documents/").concat(e))];case 2:return(t=s.sent()).ok?[4,t.json()]:(console.warn("Polling document ".concat(e," failed: ").concat(t.status)),404===t.status?(wn(e),null==u||u("Document not found"),[2]):[2]);case 3:return r=s.sent(),n(r),"processing"!==r.status&&"uploaded"!==r.status?(wn(e),"processed"===r.status?vn('Document "'.concat(r.original_filename,'" processed and ready.'),"success"):"failed"===r.status&&vn('Document "'.concat(r.original_filename,'" processing failed.'),"error"),null==d||d(r),[2]):[3,5];case 4:return o=s.sent(),console.error("Error polling document status: ".concat(o)),p>=5?(wn(e),null==u||u("Failed to poll document status: ".concat(o)),[2]):[3,5];case 5:return p>=c&&(wn(e),console.warn("Stopped polling status for document ".concat(e," after ").concat(p," attempts.")),null==u||u("Polling timeout - document may still be processing")),[2]}}))},new((s=void 0)||(s=Promise))((function(e,n){function r(e){try{l(i.next(e))}catch(e){n(e)}}function a(e){try{l(i.throw(e))}catch(e){n(e)}}function l(n){var t;n.done?e(n.value):(t=n.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,a)}l((i=i.apply(t,o||[])).next())}));var t,o,s,i}),i);yn.set(e,h)}(s.id,(function(e){c.updateState({documents:c.state.documents.map((function(n){return n.id===s.id?kn(kn({},e),{isPlaceholder:!1}):n}))})}),{apiBase:_,onComplete:function(e){return c.updateState({uploading:!1})},onError:function(e){vn("Error polling status: ".concat(e),"error"),c.updateState({documents:c.state.documents.filter((function(e){return e.id!==s.id}))})}})),[3,5];case 4:return i=d.sent(),vn(l=i.message||"Failed to upload document","error"),this.updateState({error:l,documents:this.state.documents.filter((function(e){return e.id!==r.id})),uploading:!1}),[3,5];case 5:return[2]}}))}))},this.deleteDocument=function(e,t){return Sn(n,void 0,void 0,(function(){var n,r,o;return jn(this,(function(a){switch(a.label){case 0:if(!confirm('Are you sure you want to delete "'.concat(t,'"?')))return[2];a.label=1;case 1:return a.trys.push([1,3,,4]),wn(e),[4,null===(o=this.apiService)||void 0===o?void 0:o.delete("".concat(_,"/documents/").concat(e))];case 2:return a.sent(),vn('Successfully deleted "'.concat(t,'"'),"success"),this.updateState({documents:this.state.documents.filter((function(n){return n.id!==e}))}),[3,4];case 3:return n=a.sent(),vn(r=n.message||"Failed to delete document","error"),this.updateState({error:r}),[3,4];case 4:return[2]}}))}))},this.apiService=e,this.state={documents:[],uploading:!1,error:null,selectedSession:null,selectedCollection:null}}return e.prototype.updateState=function(e){var n=this;this.state=kn(kn({},this.state),e),this.listeners.forEach((function(e){return e(n.state)}))},e.prototype.getState=function(){return this.state},e.prototype.subscribe=function(e){var n=this;return this.listeners.add(e),e(this.state),function(){return n.listeners.delete(e)}},e.prototype.initialize=function(e,n){var t=n.length>0?n[0]:null;this.updateState({documents:e||[],selectedSession:t})},e.prototype.cleanup=function(){yn.forEach((function(e){clearInterval(e)})),yn.clear(),this.listeners.clear()},e}(),_n=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),On=function(e){function n(n){var t=e.call(this,n)||this;t.loadDataForCollection=function(e){return n=t,r=void 0,a=function(){var n,t;return function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.props.dataRepository.getDocuments(e)];case 1:return n=r.sent(),this.setState({documents:n}),[3,3];case 2:return t=r.sent(),console.error("Failed to load data for collection:",t),[3,3];case 3:return[2]}}))},new((o=void 0)||(o=Promise))((function(e,t){function s(e){try{l(a.next(e))}catch(e){t(e)}}function i(e){try{l(a.throw(e))}catch(e){t(e)}}function l(n){var t;n.done?e(n.value):(t=n.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,i)}l((a=a.apply(n,r||[])).next())}));var n,r,o,a},t.handleFileSelect=function(e){var n,r=null===(n=e.target.files)||void 0===n?void 0:n[0];r&&(t.documentService.uploadFile(r,t.props.collectionId).then((function(){t.props.onDocumentListChange()})),e.target.value="")},t.handleDocumentDelete=function(e,n){t.documentService.deleteDocument(e,n).then((function(){t.props.onDocumentListChange()}))},t.toggleModal=function(){t.setState((function(e){return{showModal:!e.showModal}}))},t.documentService=new Nn(n.apiService);var r=t.documentService.getState();return t.state={showModal:!1,documents:r.documents,uploading:r.uploading,selectedSession:r.selectedSession},t.fileInputRef=a().createRef(),t}return _n(n,e),n.prototype.componentDidMount=function(){var e=this;this.documentService.initialize(this.props.documents,this.props.chatSessions),this.unsubscribeService=this.documentService.subscribe((function(n){e.setState({documents:n.documents,uploading:n.uploading,selectedSession:n.selectedSession}),n.error&&(vn(n.error,"error"),e.documentService.updateState({error:null}))})),this.loadDataForCollection(this.props.collectionId)},n.prototype.componentDidUpdate=function(e){e.collectionId!==this.props.collectionId&&(this.loadDataForCollection(this.props.collectionId),this.setState({showModal:!1}))},n.prototype.componentWillUnmount=function(){this.unsubscribeService&&this.unsubscribeService(),this.documentService.cleanup()},n.prototype.render=function(){var e=this,n=this.state,t=n.documents,o=n.uploading,a=n.showModal;return(0,r.jsx)("div",{className:"header-docs-section",children:(0,r.jsxs)("div",{title:"Project files",children:[(0,r.jsxs)("button",{onClick:this.toggleModal,className:"dmm-trigger",children:[(0,r.jsx)("span",{className:"font-medium",children:"Project files"}),(0,r.jsx)("span",{className:"dmm-badge",children:t.length})]}),a&&(0,r.jsx)("div",{className:"dmm-backdrop",children:(0,r.jsxs)("div",{className:"dmm-modal relative z-50",children:[(0,r.jsxs)("div",{className:"dmm-modal-header",children:[(0,r.jsx)("h3",{className:"dmm-title",children:"Project Files"}),(0,r.jsx)("button",{onClick:this.toggleModal,className:"dmm-close",children:(0,r.jsx)(on.A,{className:"h-5 w-5"})})]}),(0,r.jsxs)("div",{className:"dmm-body",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h4",{className:"text-md font-medium",children:"Documents"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{type:"file",ref:this.fileInputRef,onChange:this.handleFileSelect,accept:P.join(","),className:"hidden"}),(0,r.jsxs)("button",{onClick:function(){var n;return null===(n=e.fileInputRef.current)||void 0===n?void 0:n.click()},disabled:o,className:"dmm-upload-btn",children:[o?(0,r.jsx)(w.A,{className:"h-4 w-4 mr-2 animate-spin"}):(0,r.jsx)(an.A,{className:"h-4 w-4 mr-2"}),o?"Uploadingâ€¦":"Upload Document"]})]})]}),(0,r.jsx)(mn,{documents:t,onDocumentDelete:this.handleDocumentDelete})]})]})})]})})},n}(a().Component),Pn=function(){function e(){}return e.prototype.resolve=function(e){return C[e]||e},e.prototype.isSupported=function(e){return e in C},e.prototype.getSupportedProviders=function(){return Object.keys(C)},e}(),Mn=function(){function e(e){this.providerResolver=e}return e.prototype.mapToModelInfo=function(e){var n=e.provider||"ollama",t=this.providerResolver.resolve(n),r=e.server_id||e.serverId||"unknown",o=e.server_name||e.serverName||"Unknown Server";return{name:e.name||e.id||"",provider:n,providerId:t,serverName:o,serverId:r}},e.prototype.mapToModelInfoArray=function(e){var n=this;return Array.isArray(e)?e.map((function(e){return n.mapToModelInfo(e)})):[]},e.prototype.extractModelsFromResponse=function(e){var n;return e?e.models&&Array.isArray(e.models)?e.models:(null===(n=e.data)||void 0===n?void 0:n.models)&&Array.isArray(e.data.models)?e.data.models:Array.isArray(e)?e:[]:[]},e}(),In=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}))},En=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},Tn=function(){function e(e){this.apiService=e;var n=new Pn;this.modelMapper=new Mn(n)}return e.prototype.loadModels=function(){return In(this,void 0,void 0,(function(){var e,n,t;return En(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.apiService.get("/api/v1/ai/providers/all-models")];case 1:return e=r.sent(),n=this.modelMapper.extractModelsFromResponse(e),[2,{models:this.modelMapper.mapToModelInfoArray(n)}];case 2:return t=r.sent(),console.error("Error loading models from all providers:",t),[2,{models:[],error:t.message||"Failed to load models"}];case 3:return[2]}}))}))},e.prototype.loadModelsWithFallback=function(){return In(this,void 0,void 0,(function(){var e;return En(this,(function(n){switch(n.label){case 0:return[4,this.loadModels()];case 1:return(e=n.sent()).models.length>0?[2,e]:[2,this.loadOllamaFallback()]}}))}))},e.prototype.loadOllamaFallback=function(){return In(this,void 0,void 0,(function(){var e,n,t,r,o,a,s,i,l,c,d,u,p,h,m,g,f;return En(this,(function(v){switch(v.label){case 0:return v.trys.push([0,8,,9]),[4,this.apiService.get("/api/v1/settings/instances",{params:{definition_id:"ollama_servers_settings",scope:"user",user_id:"current"}})];case 1:if(e=v.sent(),n=null,Array.isArray(e)&&e.length>0?n=e[0]:e&&"object"==typeof e&&(n=(t=e).data?Array.isArray(t.data)?t.data[0]:t.data:e),r=[],!(null==n?void 0:n.value))return[3,7];o="string"==typeof n.value?JSON.parse(n.value):n.value,a=Array.isArray(null==o?void 0:o.servers)?o.servers:[],s=0,i=a,v.label=2;case 2:if(!(s<i.length))return[3,7];l=i[s],v.label=3;case 3:return v.trys.push([3,5,,6]),c={server_url:encodeURIComponent(l.serverAddress),settings_id:"ollama_servers_settings",server_id:l.id},l.apiKey&&(c.api_key=l.apiKey),[4,this.apiService.get("/api/v1/ollama/models",{params:c})];case 4:for(d=v.sent(),u=Array.isArray(d)?d:[],p=0,h=u;p<h.length;p++)m=h[p],r.push({name:m.name,provider:"ollama",providerId:"ollama_servers_settings",serverName:l.serverName,serverId:l.id});return[3,6];case 5:return g=v.sent(),console.error("Fallback: error loading Ollama models for server",null==l?void 0:l.serverName,g),[3,6];case 6:return s++,[3,2];case 7:return[2,{models:r}];case 8:return f=v.sent(),console.error("Fallback: error loading Ollama settings/models:",f),[2,{models:[],error:"Failed to load Ollama fallback models"}];case 9:return[2]}}))}))},e}(),Rn=function(){function e(){}return e.prototype.selectFirst=function(e){return e.length>0?e[0]:null},e.prototype.selectByName=function(e,n){return 0===e.length?null:e.find((function(e){return e.name===n}))||e[0]},e.prototype.selectByProvider=function(e,n){return 0===e.length?null:e.find((function(e){return e.provider===n}))||e[0]},e.prototype.selectByProviderAndName=function(e,n,t){return 0===e.length?null:e.find((function(e){return e.provider===n&&e.name===t}))||e[0]},e}(),An=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}))},Dn=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},Ln=function(){function e(e){this.api=e.api}return e.prototype.getCurrentUser=function(){return An(this,void 0,void 0,(function(){var e;return Dn(this,(function(n){switch(n.label){case 0:return[4,this.api.get("/api/v1/auth/me")];case 1:if(!(e=n.sent()).id)throw new Error("Could not get current user ID");return[2,e]}}))}))},e.prototype.getCurrentUserId=function(){return An(this,void 0,void 0,(function(){return Dn(this,(function(e){switch(e.label){case 0:return[4,this.getCurrentUser()];case 1:return[2,e.sent().id]}}))}))},e}(),zn=function(){function e(e){this.api=e.api}return e.prototype.fetchConversations=function(e){return n=this,t=void 0,o=function(){var n,t,r,o,a,s,i,l,c,d;return function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(u){switch(u.label){case 0:return n=e.userId,t=e.conversationType,r=void 0===t?"chat":t,o=e.pageId,a=void 0===o?null:o,s=e.skip,i=void 0===s?0:s,l=e.limit,c={skip:i,limit:void 0===l?50:l,conversation_type:r},a&&(c.page_id=a),[4,this.api.get("/api/v1/users/".concat(n,"/conversations"),{params:c})];case 1:return d=u.sent(),[2,this.extractConversationsFromResponse(d)]}}))},new((r=void 0)||(r=Promise))((function(e,a){function s(e){try{l(o.next(e))}catch(e){a(e)}}function i(e){try{l(o.throw(e))}catch(e){a(e)}}function l(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,i)}l((o=o.apply(n,t||[])).next())}));var n,t,r,o},e.prototype.extractConversationsFromResponse=function(e){return Array.isArray(e)?this.validateConversations(e):e&&e.data&&Array.isArray(e.data)?this.validateConversations(e.data):e&&"object"==typeof e&&e.id&&e.user_id?[e]:[]},e.prototype.validateConversations=function(e){return e.filter((function(e){return e&&"object"==typeof e&&e.id&&e.user_id}))},e.prototype.sortByRecency=function(e){var n=this;return function(e,n,t){if(t||2===arguments.length)for(var r,o=0,a=n.length;o<a;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))}([],e,!0).sort((function(e,t){var r=n.getSortTimestamp(e);return n.getSortTimestamp(t)-r}))},e.prototype.getSortTimestamp=function(e){if(!e||"object"!=typeof e)return 0;for(var n=0,t=["last_message_at","updated_at","created_at","lastMessageAt","updatedAt","createdAt"];n<t.length;n++){var r=e[t[n]];if(r){var o=new Date(r).getTime();if(!isNaN(o))return o}}return 0},e}(),Fn=function(){return Fn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},Fn.apply(this,arguments)},Un=function(){function e(e){var n,t,r,o,a,s;void 0===e&&(e={}),this.isProgrammaticScroll=!1,this.pendingAutoScrollTimeout=null,this.lastUserScrollTs=0,this.containerRef=null,this.messages=[],this.currentState={isNearBottom:!0,showScrollToBottom:!1,isAutoScrollLocked:!1},this.scrollAnchorOffset=null!==(n=e.scrollAnchorOffset)&&void 0!==n?n:420,this.minVisibleLastMessageHeight=null!==(t=e.minVisibleLastMessageHeight)&&void 0!==t?t:64,this.nearBottomEpsilon=null!==(r=e.nearBottomEpsilon)&&void 0!==r?r:24,this.strictBottomThreshold=null!==(o=e.strictBottomThreshold)&&void 0!==o?o:4,this.userScrollIntentGraceMs=null!==(a=e.userScrollIntentGraceMs)&&void 0!==a?a:300,this.scrollDebounceDelay=null!==(s=e.scrollDebounceDelay)&&void 0!==s?s:100}return e.prototype.setContainer=function(e){this.containerRef=e},e.prototype.setMessages=function(e){this.messages=e},e.prototype.onStateChange=function(e){this.onStateChangeCallback=e},e.prototype.getState=function(){return Fn({},this.currentState)},e.prototype.cleanup=function(){this.cancelPendingAutoScroll()},e.prototype.getEffectiveAnchorOffset=function(e){var n=this.messages[this.messages.length-1];if(null==n?void 0:n.isStreaming)return 0;var t=Math.max(this.scrollAnchorOffset,0);if(0===t)return 0;var r=e.querySelector(".message:last-of-type");if(!r)return t;var o=r.offsetHeight,a=Math.max(o-this.minVisibleLastMessageHeight,0);return Math.min(t,a)},e.prototype.getScrollMetrics=function(){var e=this.containerRef;if(!e)return{distanceFromBottom:0,dynamicOffset:0};var n=e.scrollTop;return{distanceFromBottom:e.scrollHeight-(n+e.clientHeight),dynamicOffset:this.getEffectiveAnchorOffset(e)}},e.prototype.isUserNearBottom=function(e){if(!this.containerRef)return!0;var n=this.getScrollMetrics(),t=n.distanceFromBottom,r=n.dynamicOffset;return t<=(null!=e?e:Math.max(r,this.nearBottomEpsilon))},e.prototype.hasRecentUserIntent=function(){return!!this.lastUserScrollTs&&Date.now()-this.lastUserScrollTs<=this.userScrollIntentGraceMs},e.prototype.canAutoScroll=function(e){return void 0===e&&(e=Date.now()),!this.currentState.isAutoScrollLocked&&!(this.lastUserScrollTs&&this.lastUserScrollTs>e)&&this.isUserNearBottom()},e.prototype.cancelPendingAutoScroll=function(){this.pendingAutoScrollTimeout&&(clearTimeout(this.pendingAutoScrollTimeout),this.pendingAutoScrollTimeout=null)},e.prototype.registerUserScrollIntent=function(){this.lastUserScrollTs=Date.now(),this.cancelPendingAutoScroll();var e=this.currentState;e.isAutoScrollLocked&&e.showScrollToBottom||this.updateState({isAutoScrollLocked:!0,showScrollToBottom:!0})},e.prototype.updateScrollState=function(e){if(void 0===e&&(e={}),this.containerRef){var n=e.fromUser,t=void 0!==n&&n,r=e.manualUnlock,o=void 0!==r&&r,a=this.getScrollMetrics(),s=a.distanceFromBottom,i=a.dynamicOffset,l=s<=Math.max(i,this.nearBottomEpsilon),c=s<=this.strictBottomThreshold,d=!1,u=!1,p=this.currentState,h=p.isAutoScrollLocked;o?(h&&(d=!0),h=!1):t?c?(h&&(d=!0),h=!1,u=!0):h=!0:c&&p.isAutoScrollLocked&&!this.hasRecentUserIntent()&&(h=!1,d=!0);var m=!!h||!c;if(p.isNearBottom===l&&p.showScrollToBottom===m&&p.isAutoScrollLocked===h)return d&&!h&&(this.lastUserScrollTs=0),void(u&&(this.lastUserScrollTs=0));this.updateState({isNearBottom:l,showScrollToBottom:m,isAutoScrollLocked:h}),d&&!h&&(this.lastUserScrollTs=0),u&&(this.lastUserScrollTs=0)}},e.prototype.handleScroll=function(){this.isProgrammaticScroll?this.updateScrollState():(this.registerUserScrollIntent(),this.updateScrollState({fromUser:!0}))},e.prototype.handleUserScrollIntent=function(e){this.registerUserScrollIntent()},e.prototype.handleScrollToBottomClick=function(){this.scrollToBottom({behavior:"smooth",manual:!0})},e.prototype.followStreamIfAllowed=function(){this.canAutoScroll()?this.scrollToBottom():this.updateScrollState()},e.prototype.scrollToBottom=function(e){var n=this;if(void 0===e&&(e={}),this.containerRef){this.cancelPendingAutoScroll();var t=e.behavior,r=void 0===t?"auto":t,o=e.manual,a=void 0!==o&&o,s=e.force,i=void 0!==s&&s,l=this.containerRef,c=a||i?0:this.getEffectiveAnchorOffset(l),d=Math.max(l.scrollHeight-l.clientHeight,0),u=Math.max(d-c,0);if(this.isProgrammaticScroll=!0,"function"==typeof l.scrollTo)try{l.scrollTo({top:u,behavior:r})}catch(e){l.scrollTop=u}else l.scrollTop=u;var p=function(){n.isProgrammaticScroll=!1,a||i?(n.lastUserScrollTs=0,n.updateScrollState({manualUnlock:!0})):n.updateScrollState()};"undefined"!=typeof window&&"function"==typeof window.requestAnimationFrame?window.requestAnimationFrame(p):setTimeout(p,0)}},e.prototype.debouncedScrollToBottom=function(e){var n=this,t=Date.now();this.pendingAutoScrollTimeout&&clearTimeout(this.pendingAutoScrollTimeout),this.pendingAutoScrollTimeout=setTimeout((function(){n.pendingAutoScrollTimeout=null,n.canAutoScroll(t)?n.scrollToBottom(e):n.updateScrollState()}),this.scrollDebounceDelay)},e.prototype.updateState=function(e){this.currentState=Fn(Fn({},this.currentState),e),this.onStateChangeCallback&&this.onStateChangeCallback(this.currentState)},e}(),Bn=function(){function e(){}return e.getModelKey=function(e,n){var t=(e||"").trim(),r=(n||"").trim();return"".concat(r,":::").concat(t)},e.getModelKeyFromInfo=function(n){return n?e.getModelKey(n.name,n.serverName):""},e}(),Gn=function(){return Gn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},Gn.apply(this,arguments)},qn=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}))},Hn=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},Vn=function(e,n,t){if(t||2===arguments.length)for(var r,o=0,a=n.length;o<a;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))},Kn=function(){function e(e){this.deps=e}return e.prototype.cleanMessageContent=function(e){if(!e)return e;var n=e.replace(/\r\n/g,"\n").replace(/\n{3,}/g,"\n\n").trim();return(n=(n=(n=n.replace(/\n\n\[WEB SEARCH CONTEXT[^]*$/,"")).replace(/^Document Context:[^]*?\n\nUser Question: /,"")).replace(/^[^]*?\n\nUser Question: /,"")).trim()},e.prototype.loadConversationHistory=function(e){return qn(this,void 0,void 0,(function(){var n,t,r,o=this;return Hn(this,(function(a){switch(a.label){case 0:if(console.log("ðŸ“š Loading conversation history: ".concat(e)),!this.deps.api)throw new Error("API service not available");a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.deps.api.get("/api/v1/conversations/".concat(e,"/with-messages"))];case 2:return n=a.sent(),t=[],n&&n.messages&&Array.isArray(n.messages)&&t.push.apply(t,n.messages.map((function(e){return{id:e.id||U("history"),sender:"llm"===e.sender?"ai":"user",content:o.cleanMessageContent(e.message),timestamp:e.created_at}}))),console.log("âœ… Conversation history loaded: ".concat(e,", ").concat(t.length," messages")),[2,{messages:t,conversationId:e}];case 3:throw r=a.sent(),console.error("Error loading conversation history:",r),new Error("Error loading conversation history");case 4:return[2]}}))}))},e.prototype.loadConversationWithPersona=function(e){return qn(this,void 0,void 0,(function(){var n,t,r,o,a,s,i,l,c,d,u,p,h,m,g,f,v,b,x,y,w;return Hn(this,(function(k){switch(k.label){case 0:if(console.log("ðŸ”„ Loading conversation with persona: ".concat(e.conversationId)),!this.deps.api||!this.deps.aiService)throw new Error("API service not available");k.label=1;case 1:k.trys.push([1,7,,9]),n=null,k.label=2;case 2:return k.trys.push([2,4,,5]),[4,this.deps.aiService.loadConversationWithPersona(e.conversationId)];case 3:return n=k.sent(),[3,5];case 4:return k.sent(),console.warn("Persona-aware conversation loading not available, falling back"),n=e.selectedConversation,[3,5];case 5:return t=e.showPersonaSelection&&(null==n?void 0:n.persona)?Gn(Gn({},n.persona),{id:"".concat(n.persona.id)}):null,r=e.showPersonaSelection?(null==t?void 0:t.id)||((null==n?void 0:n.persona_id)?"".concat(n.persona_id):null):null,o=r&&""!==r.trim()?r:null,a=null===(y=null==n?void 0:n.model)||void 0===y?void 0:y.trim(),s=null===(w=null==n?void 0:n.server)||void 0===w?void 0:w.trim(),i=Boolean(a&&s),l=i?Bn.getModelKey(a,s):null,c=l?e.models.find((function(e){return Bn.getModelKeyFromInfo(e)===l})):null,d=l&&!c&&i?{name:a,provider:"ollama",providerId:"ollama_servers_settings",serverName:s,serverId:"unknown",isTemporary:!0}:null,u=null,c?u=c:d&&(u=d),p=null,h=Vn([],e.personas,!0),e.showPersonaSelection&&(t?(m=e.personas.find((function(e){return"".concat(e.id)===t.id})))?p=m:(h=Vn(Vn([],e.personas,!0),[t],!1),p=t):o&&(m=e.personas.find((function(e){return"".concat(e.id)===o})),p=m||null)),[4,this.loadConversationHistory(e.conversationId)];case 6:return g=k.sent(),b=g.messages,x=g.conversationId,console.log("âœ… Conversation loaded successfully: ".concat(x)),[2,{messages:b,conversationId:x,pendingModelKey:l,pendingModelSnapshot:d,selectedModel:u,pendingPersonaId:o,selectedPersona:p,personas:h}];case 7:return f=k.sent(),console.error("Error loading conversation with persona:",f),[4,this.loadConversationHistory(e.conversationId)];case 8:return v=k.sent(),b=v.messages,x=v.conversationId,[2,{messages:b,conversationId:x,pendingModelKey:null,pendingModelSnapshot:null,selectedModel:null,pendingPersonaId:null,selectedPersona:null,personas:e.personas}];case 9:return[2]}}))}))},e.prototype.updateConversationPersona=function(e,n){return qn(this,void 0,void 0,(function(){var t;return Hn(this,(function(r){switch(r.label){case 0:if(!this.deps.aiService)throw new Error("AI service not available");r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.deps.aiService.updateConversationPersona(e,n)];case 2:return r.sent(),[3,4];case 3:throw t=r.sent(),console.error("Error updating conversation persona:",t),t;case 4:return[2]}}))}))},e}(),Wn=function(){function e(){}return e.getGreeting=function(e){var n=e.showPersonaSelection,t=e.selectedPersona,r=e.defaultGreeting;return n&&(null==t?void 0:t.sample_greeting)||r},e.shouldUsePersonaGreeting=function(e){var n=e.showPersonaSelection,t=e.selectedPersona;return Boolean(n&&(null==t?void 0:t.sample_greeting))},e.getEffectivePersona=function(e){var n=e.showPersonaSelection,t=e.selectedPersona;return n?t:null},e}(),Qn=function(){return Qn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},Qn.apply(this,arguments)},Yn=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}))},Xn=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},Jn=function(){function e(e){this.deps=e}return e.prototype.handleConversationSelect=function(e){var n=e.conversationId,t=e.conversations,r=e.selectedPersona,o=e.showPersonaSelection,a=e.initialGreeting;if(console.log("ðŸ“‹ Conversation selected: ".concat(n||"new chat")),!n)return{shouldStartNewChat:!0,shouldLoadConversation:!1,stateUpdate:{selectedConversation:null,conversation_id:null,messages:[],selectedPersona:o?r:null,pendingModelKey:null,pendingModelSnapshot:null,pendingPersonaId:null},greetingContent:Wn.getGreeting({showPersonaSelection:o,selectedPersona:r,defaultGreeting:a})};var s=t.find((function(e){return e.id===n}));return s?(console.log("ðŸ“‚ Loading conversation: ".concat(n)),{shouldStartNewChat:!1,shouldLoadConversation:!0,conversationIdToLoad:n,stateUpdate:{selectedConversation:s}}):(console.warn("Conversation ".concat(n," not found")),{shouldStartNewChat:!1,shouldLoadConversation:!1,stateUpdate:{}})},e.prototype.handleRenameConversation=function(e){return Yn(this,void 0,void 0,(function(){var n,t,r,o,a,s,i,l,c,d;return Xn(this,(function(u){switch(u.label){case 0:if(n=e.conversationId,t=e.newTitle,r=e.conversations,o=e.selectedConversation,!(a=t)){if(s=r.find((function(e){return e.id===n})),!(i=prompt("Enter new name:",(null==s?void 0:s.title)||"Untitled")))return[2,{stateUpdate:{openConversationMenu:null}}];a=i}if(!this.deps.api)throw new Error("API service not available");u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.deps.api.put("/api/v1/conversations/".concat(n),{title:a})];case 2:return u.sent(),l=r.map((function(e){return e.id===n?Qn(Qn({},e),{title:a}):e})),c=(null==o?void 0:o.id)===n?Qn(Qn({},o),{title:a}):o,[2,{stateUpdate:{conversations:l,selectedConversation:c,openConversationMenu:null}}];case 3:throw d=u.sent(),new Error("Error renaming conversation: ".concat(d.message||"Unknown error"));case 4:return[2]}}))}))},e.prototype.handleShareConversation=function(e){return Yn(this,void 0,void 0,(function(){var n;return Xn(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),n="".concat(window.location.origin).concat(window.location.pathname,"?conversation=").concat(e),[4,navigator.clipboard.writeText(n)];case 1:return t.sent(),this.deps.addMessageToChat({id:U("share-success"),sender:"ai",content:"ðŸ“‹ Conversation link copied to clipboard!",timestamp:(new Date).toISOString()}),[3,3];case 2:return t.sent(),this.deps.addMessageToChat({id:U("share-error"),sender:"ai",content:"âŒ Failed to copy conversation link",timestamp:(new Date).toISOString()}),[3,3];case 3:return[2,{stateUpdate:{openConversationMenu:null}}]}}))}))},e.prototype.handleDeleteConversation=function(e){return Yn(this,void 0,void 0,(function(){var n,t,r,o,a,s,i,l,c,d;return Xn(this,(function(u){switch(u.label){case 0:if(n=e.conversationId,t=e.conversations,r=e.selectedConversation,o=e.showPersonaSelection,a=e.selectedPersona,s=e.initialGreeting,!this.deps.api)throw new Error("API service not available");u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.deps.api.delete("/api/v1/conversations/".concat(n))];case 2:return u.sent(),i=t.filter((function(e){return e.id!==n})),(null==r?void 0:r.id)===n?(l=Wn.getEffectivePersona({showPersonaSelection:o,selectedPersona:a}),c=Wn.getGreeting({showPersonaSelection:o,selectedPersona:a,defaultGreeting:s}),[2,{stateUpdate:{conversations:i,selectedConversation:null,conversation_id:null,messages:[],selectedPersona:l,openConversationMenu:null},greetingContent:c}]):[2,{stateUpdate:{conversations:i,selectedConversation:r,openConversationMenu:null}}];case 3:throw d=u.sent(),new Error("Error deleting conversation: ".concat(d.message||"Unknown error"));case 4:return[2]}}))}))},e.prototype.toggleConversationMenu=function(e){var n=e.conversationId,t=e.currentOpenMenu,r=t!==n;return console.log("ðŸ” toggleConversationMenu:",{conversationId:n,isOpening:r,currentOpenMenu:t}),{stateUpdate:{openConversationMenu:r?n:null}}},e}(),Zn=function(){return Zn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},Zn.apply(this,arguments)},$n=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}))},et=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},nt=function(e,n,t){if(t||2===arguments.length)for(var r,o=0,a=n.length;o<a;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))},tt=function(){function e(e){this.deps=e,this.pendingPersonaRequestId=null}return e.prototype.loadPersonas=function(e){return $n(this,void 0,void 0,(function(){var n,t,r;return et(this,(function(o){switch(o.label){case 0:if(console.log("ðŸŽ­ Loading personas - availablePersonas: ".concat((null==e?void 0:e.length)||0)),e)return console.log("ðŸŽ­ Using provided personas: ".concat(e.map((function(e){return e.name})).join(", "))),[2,e];if(!this.deps.api)return console.warn("API service not available for loading personas"),[2,[]];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.deps.api.get("/api/v1/personas")];case 2:return n=o.sent(),t=n.personas||[],console.log("ðŸŽ­ Loaded personas from API: ".concat(t.map((function(e){return e.name})).join(", "))),[2,t];case 3:return r=o.sent(),console.error("Error loading personas:",r),[2,[]];case 4:return[2]}}))}))},e.prototype.fetchPersonaById=function(e){return $n(this,void 0,void 0,(function(){var n,t,r;return et(this,(function(o){switch(o.label){case 0:if(!this.deps.api)return[2,null];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.deps.api.get("/api/v1/personas/".concat(e))];case 2:return n=o.sent(),(t=(null==n?void 0:n.persona)||(null==n?void 0:n.data)||n)&&t.id?[2,Zn(Zn({},t),{id:"".concat(t.id)})]:[3,4];case 3:return r=o.sent(),console.error("Error fetching persona by id:",r),[3,4];case 4:return[2,null]}}))}))},e.prototype.resolvePendingPersona=function(e){return $n(this,void 0,void 0,(function(){var n,t,r,o,a,s,i,l,c,d,u;return et(this,(function(p){switch(p.label){case 0:if(n=e.pendingPersonaId,t=e.showPersonaSelection,r=e.personas,o=e.selectedPersona,!t)return[2,{persona:null,personas:r,pendingPersonaId:null}];if(!n)return[2,{persona:o,personas:r,pendingPersonaId:null}];if(a="".concat(n),o&&"".concat(o.id)===a)return[2,{persona:o,personas:r,pendingPersonaId:null}];if(s=r.find((function(e){return"".concat(e.id)===a})),s)return[2,{persona:s,personas:r,pendingPersonaId:null}];if(this.pendingPersonaRequestId===a)return[2,{persona:o,personas:r,pendingPersonaId:n}];this.pendingPersonaRequestId=a,p.label=1;case 1:return p.trys.push([1,3,4,5]),[4,this.fetchPersonaById(a)];case 2:return(i=p.sent())?(l="".concat(i.id),c=r.some((function(e){return"".concat(e.id)===l})),[2,{persona:(d=c?r:nt(nt([],r,!0),[Zn(Zn({},i),{id:l})],!1)).find((function(e){return"".concat(e.id)===l}))||null,personas:d,pendingPersonaId:null}]):[2,{persona:o,personas:r,pendingPersonaId:null}];case 3:return u=p.sent(),console.error("Error resolving pending persona:",u),[2,{persona:o,personas:r,pendingPersonaId:null}];case 4:return this.pendingPersonaRequestId=null,[7];case 5:return[2]}}))}))},e.prototype.reset=function(){this.pendingPersonaRequestId=null},e}(),rt=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}))},ot=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},at=function(){function e(e){this.deps=e,this.currentPageContext=null,this.pageContextUnsubscribe=null}return e.prototype.getSettingKey=function(e){var n=this.getCurrentPageContext();return(null==n?void 0:n.pageId)?"page_".concat(n.pageId,"_").concat(e):e},e.prototype.getSetting=function(e){return rt(this,void 0,void 0,(function(){var n,t,r,o;return ot(this,(function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),(null===(o=this.deps.settings)||void 0===o?void 0:o.getSetting)?(n=this.getSettingKey(e),[4,this.deps.settings.getSetting(n)]):[2,null];case 1:return null!=(t=a.sent())?[3,3]:[4,this.deps.settings.getSetting(e)];case 2:t=a.sent(),a.label=3;case 3:return[2,null!=t?t:null];case 4:return r=a.sent(),console.error("Error getting setting:",r),[2,null];case 5:return[2]}}))}))},e.prototype.setSetting=function(e,n){return rt(this,void 0,void 0,(function(){var t,r,o;return ot(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),(null===(o=this.deps.settings)||void 0===o?void 0:o.setSetting)?(t=this.getSettingKey(e),[4,this.deps.settings.setSetting(t,n)]):[2];case 1:return a.sent(),[3,3];case 2:return r=a.sent(),console.error("Error saving setting:",r),[3,3];case 3:return[2]}}))}))},e.prototype.initialize=function(e){var n=this;if(this.deps.pageContext)try{this.currentPageContext=this.deps.pageContext.getCurrentPageContext(),e&&(this.pageContextUnsubscribe=this.deps.pageContext.onPageContextChange((function(t){n.currentPageContext=t,e(t)})))}catch(e){console.warn("Failed to initialize page context service:",e)}},e.prototype.getCurrentPageContext=function(){if(this.deps.pageContext)try{return this.deps.pageContext.getCurrentPageContext()}catch(e){}return this.currentPageContext},e.prototype.cleanup=function(){this.pageContextUnsubscribe&&(this.pageContextUnsubscribe(),this.pageContextUnsubscribe=null)},e}(),st=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),it=function(){return it=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},it.apply(this,arguments)},lt=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}))},ct=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},dt=function(e,n,t){if(t||2===arguments.length)for(var r,o=0,a=n.length;o<a;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))},ut=function(e){function n(n){var t=e.call(this,n)||this;return t.chatHistoryRef=a().createRef(),t.inputRef=a().createRef(),t.themeChangeListener=null,t.STREAMING_SETTING_KEY="ai_prompt_chat_streaming_enabled",t.initialGreetingAdded=!1,t.aiService=null,t.documentService=null,t.modelConfigLoader=null,t.userRepository=null,t.conversationRepository=null,t.conversationLoader=null,t.conversationManager=null,t.personaResolver=null,t.pageSettingsService=null,t.currentStreamingAbortController=null,t.loadInitialData=function(){return lt(t,void 0,void 0,(function(){var e;return ct(this,(function(n){switch(n.label){case 0:return(null===(e=this.props.services)||void 0===e?void 0:e.api)&&(this.userRepository=new Ln({api:this.props.services.api}),this.conversationRepository=new zn({api:this.props.services.api})),[4,Promise.all([this.loadProviderSettings(),this.fetchConversations()])];case 1:return n.sent(),[2]}}))}))},t.getSavedStreamingMode=function(){return lt(t,void 0,void 0,(function(){var e,n,t,r;return ct(this,(function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),(null===(r=null===(t=this.props.services)||void 0===t?void 0:t.settings)||void 0===r?void 0:r.getSetting)?(e=this.getSettingKey(this.STREAMING_SETTING_KEY),[4,this.props.services.settings.getSetting(e)]):[3,4];case 1:return null!=(n=o.sent())?[3,3]:[4,this.props.services.settings.getSetting(this.STREAMING_SETTING_KEY)];case 2:n=o.sent(),o.label=3;case 3:if("boolean"==typeof n)return[2,n];o.label=4;case 4:return[2,null];case 5:return o.sent(),[2,null];case 6:return[2]}}))}))},t.loadSavedStreamingMode=function(){return lt(t,void 0,void 0,(function(){var e;return ct(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.getSavedStreamingMode()];case 1:return null!==(e=n.sent())&&this.setState({useStreaming:e}),[3,3];case 2:return n.sent(),[3,3];case 3:return[2]}}))}))},t.saveStreamingMode=function(e){return lt(t,void 0,void 0,(function(){var n,t,r;return ct(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),(null===(r=null===(t=this.props.services)||void 0===t?void 0:t.settings)||void 0===r?void 0:r.setSetting)?(n=this.getSettingKey(this.STREAMING_SETTING_KEY),[4,this.props.services.settings.setSetting(n,e)]):[3,2];case 1:o.sent(),o.label=2;case 2:return[3,4];case 3:return o.sent(),[3,4];case 4:return[2]}}))}))},t.initializeThemeService=function(){var e;if(null===(e=t.props.services)||void 0===e?void 0:e.theme)try{var n=t.props.services.theme.getCurrentTheme();t.setState({currentTheme:n}),t.themeChangeListener=function(e){t.setState({currentTheme:e})},t.props.services.theme.addThemeChangeListener(t.themeChangeListener)}catch(e){}},t.initializePageContextService=function(){t.pageSettingsService&&t.pageSettingsService.initialize((function(){t.fetchConversations()}))},t.loadPersonas=function(){return lt(t,void 0,void 0,(function(){var e,n,t=this;return ct(this,(function(r){switch(r.label){case 0:if(!this.personaResolver)return this.setState({isLoadingPersonas:!1}),[2];if(this.props.availablePersonas)return this.resolvePendingPersonaSelection(),[2];this.setState({isLoadingPersonas:!0}),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.personaResolver.loadPersonas(this.props.availablePersonas)];case 2:return e=r.sent(),this.setState({personas:e,isLoadingPersonas:!1},(function(){t.resolvePendingPersonaSelection()})),[3,4];case 3:return n=r.sent(),console.error("Error loading personas:",n),this.setState({personas:[],isLoadingPersonas:!1},(function(){t.resolvePendingPersonaSelection()})),[3,4];case 4:return[2]}}))}))},t.loadProviderSettings=function(){return lt(t,void 0,void 0,(function(){var e,n,t,r,o=this;return ct(this,(function(a){switch(a.label){case 0:if(this.setState({isLoadingModels:!0,error:""}),!this.modelConfigLoader)return this.setState({isLoadingModels:!1,error:"API service not available"}),[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.modelConfigLoader.loadModelsWithFallback()];case 2:return(e=a.sent()).error&&0===e.models.length?(this.setState({models:[],selectedModel:null,isLoadingModels:!1,error:e.error}),[2]):(n=!this.state.pendingModelKey&&!this.state.selectedModel,t=this.modelSelector.selectFirst(e.models),this.setState((function(n){var r=n.pendingModelKey||n.selectedModel?n.selectedModel:t;return{models:e.models,isLoadingModels:!1,selectedModel:r}}),(function(){o.state.pendingModelKey?o.resolvePendingModelSelection():n&&o.state.selectedModel&&o.broadcastModelSelection(o.state.selectedModel)})),[3,4]);case 3:return r=a.sent(),console.error("Error loading models:",r),this.setState({models:[],selectedModel:null,isLoadingModels:!1,error:"Error loading models: ".concat(r.message||"Unknown error")}),[3,4];case 4:return[2]}}))}))},t.refreshConversationsList=function(){return lt(t,void 0,void 0,(function(){var e,n,t,r,o,a,s=this;return ct(this,(function(i){switch(i.label){case 0:if(!this.userRepository||!this.conversationRepository)return[2];i.label=1;case 1:return i.trys.push([1,4,,5]),[4,this.userRepository.getCurrentUserId()];case 2:return e=i.sent(),n=this.getCurrentPageContext(),[4,this.conversationRepository.fetchConversations({userId:e,conversationType:this.props.conversationType||"chat",pageId:(null==n?void 0:n.pageId)||null,skip:0,limit:50})];case 3:return 0===(t=i.sent()).length?(this.setState({conversations:[],isLoadingHistory:!1}),[2]):(r=this.conversationRepository.sortByRecency(t),o=this.state.conversation_id?r.find((function(e){return e.id===s.state.conversation_id})):null,this.setState({conversations:r,selectedConversation:o||this.state.selectedConversation}),[3,5]);case 4:return a=i.sent(),console.error("Error refreshing conversations list:",a),[3,5];case 5:return[2]}}))}))},t.fetchConversations=function(){return lt(t,void 0,void 0,(function(){var e,n,t,r,o,a,s=this;return ct(this,(function(i){switch(i.label){case 0:if(!this.userRepository||!this.conversationRepository)return this.setState({isLoadingHistory:!1,error:"Repository services not available"}),[2];i.label=1;case 1:return i.trys.push([1,4,,5]),this.setState({isLoadingHistory:!0,error:""}),[4,this.userRepository.getCurrentUserId()];case 2:return e=i.sent(),n=this.getCurrentPageContext(),[4,this.conversationRepository.fetchConversations({userId:e,conversationType:this.props.conversationType||"chat",pageId:(null==n?void 0:n.pageId)||null,skip:0,limit:50})];case 3:return 0===(t=i.sent()).length?(this.setState({conversations:[],isLoadingHistory:!1}),[2]):(r=this.conversationRepository.sortByRecency(t),o=r.length>0?r[0]:null,this.setState({conversations:r,selectedConversation:o,isLoadingHistory:!1},(function(){o&&!s.state.conversation_id&&s.loadConversationWithPersona(o.id)})),[3,5]);case 4:return 403===(a=i.sent()).status||a.response&&403===a.response.status||404===a.status||a.response&&404===a.response.status?this.setState({isLoadingHistory:!1,conversations:[],error:""}):this.setState({isLoadingHistory:!1,error:"Error loading conversations: ".concat(a.message||"Unknown error")}),[3,5];case 5:return[2]}}))}))},t.handleModelChange=function(e){var n=e.target.value,r=t.state.models.find((function(e){return"".concat(e.provider,"_").concat(e.serverId,"_").concat(e.name)===n}));r&&t.setState({selectedModel:r,pendingModelKey:null,pendingModelSnapshot:null},(function(){t.broadcastModelSelection(r)}))},t.broadcastModelSelection=function(e){var n;if(null===(n=t.props.services)||void 0===n?void 0:n.event){var r={type:"model.selection",content:{model:{name:e.name,provider:e.provider,providerId:e.providerId,serverName:e.serverName,serverId:e.serverId},timestamp:(new Date).toISOString()}};t.props.services.event.sendMessage("ai-prompt-chat",r.content)}},t.resolvePendingModelSelection=function(){var e=t.state,n=e.pendingModelKey,r=e.models,o=e.selectedModel,a=e.pendingModelSnapshot;if(n){var s=r.find((function(e){return Bn.getModelKey(e.name,e.serverName)===n}));if(s){var i=Bn.getModelKey(null==o?void 0:o.name,null==o?void 0:o.serverName)===n,l=Boolean(null==o?void 0:o.isTemporary),c=Boolean(s.isTemporary);return!o||!i||l&&!c?void t.setState({selectedModel:s,pendingModelKey:c?n:null,pendingModelSnapshot:c?a:null},(function(){c||t.broadcastModelSelection(s)})):void(c||t.setState({pendingModelKey:null,pendingModelSnapshot:null}))}a&&!r.some((function(e){return Bn.getModelKey(e.name,e.serverName)===n}))&&t.setState((function(e){return{models:dt(dt([],e.models,!0),[a],!1)}}))}else a&&t.setState({pendingModelSnapshot:null})},t.resolvePendingPersonaSelection=function(){return lt(t,void 0,void 0,(function(){var e,n;return ct(this,(function(t){switch(t.label){case 0:if(!this.personaResolver)return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.personaResolver.resolvePendingPersona({pendingPersonaId:this.state.pendingPersonaId,showPersonaSelection:this.state.showPersonaSelection,personas:this.state.personas,selectedPersona:this.state.selectedPersona})];case 2:return(e=t.sent()).persona===this.state.selectedPersona&&e.pendingPersonaId===this.state.pendingPersonaId&&e.personas===this.state.personas||this.setState({selectedPersona:e.persona,pendingPersonaId:e.pendingPersonaId,personas:e.personas}),[3,4];case 3:return n=t.sent(),console.error("Error resolving pending persona:",n),[3,4];case 4:return[2]}}))}))},t.handleConversationSelect=function(e){if(t.conversationManager){var n=e.target.value,r=t.conversationManager.handleConversationSelect({conversationId:n,conversations:t.state.conversations,selectedPersona:t.state.selectedPersona,showPersonaSelection:t.state.showPersonaSelection,initialGreeting:t.props.initialGreeting});t.setState(r.stateUpdate,(function(){r.shouldStartNewChat&&r.greetingContent?(t.initialGreetingAdded=!0,t.addMessageToChat({id:U("greeting"),sender:"ai",content:r.greetingContent,timestamp:(new Date).toISOString()})):r.shouldLoadConversation&&r.conversationIdToLoad&&t.loadConversationWithPersona(r.conversationIdToLoad)}))}},t.handlePersonaChange=function(e){return lt(t,void 0,void 0,(function(){var n,t,r,o=this;return ct(this,(function(a){switch(a.label){case 0:if(n=e.target.value,t=n&&this.state.personas.find((function(e){return e.id===n}))||null,console.log("ðŸŽ­ Persona changed: ".concat((null==t?void 0:t.name)||"none"," (ID: ").concat(n||"none",")")),this.setState({selectedPersona:t,pendingPersonaId:null},(function(){var e;console.log("ðŸŽ­ Persona state after change: selectedPersona=".concat((null===(e=o.state.selectedPersona)||void 0===e?void 0:e.name)||"null",", showPersonaSelection=").concat(o.state.showPersonaSelection))})),!this.state.conversation_id)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.updateConversationPersona(this.state.conversation_id,n||null)];case 2:return a.sent(),[3,4];case 3:return r=a.sent(),console.error("Failed to update conversation persona:",r),[3,4];case 4:return[2]}}))}))},t.handlePersonaToggle=function(){console.log("ðŸŽ­ Persona toggled off - resetting to no persona"),t.setState({selectedPersona:null,pendingPersonaId:null},(function(){var e;console.log("ðŸŽ­ Persona state after toggle: selectedPersona=".concat((null===(e=t.state.selectedPersona)||void 0===e?void 0:e.name)||"null",", showPersonaSelection=").concat(t.state.showPersonaSelection))}))},t.handleNewChatClick=function(){console.log("ðŸ†• Starting new chat - clearing conversation_id"),t.setState({selectedConversation:null,conversation_id:null,messages:[],selectedPersona:t.state.showPersonaSelection?t.state.selectedPersona:null,pendingModelKey:null,pendingModelSnapshot:null,pendingPersonaId:null},(function(){var e;console.log("âœ… New chat started - conversation_id: ".concat(t.state.conversation_id));var n=Wn.getGreeting({showPersonaSelection:t.state.showPersonaSelection,selectedPersona:t.state.selectedPersona,defaultGreeting:t.props.initialGreeting});console.log("ðŸŽ­ New chat greeting: showPersonaSelection=".concat(t.state.showPersonaSelection,", selectedPersona=").concat((null===(e=t.state.selectedPersona)||void 0===e?void 0:e.name)||"none",", using=").concat(Wn.shouldUsePersonaGreeting({showPersonaSelection:t.state.showPersonaSelection,selectedPersona:t.state.selectedPersona})?"persona":"default"," greeting")),n&&(t.initialGreetingAdded=!0,t.addMessageToChat({id:U("greeting"),sender:"ai",content:n,timestamp:(new Date).toISOString()}))}))},t.handleRenameConversation=function(e,n){return lt(t,void 0,void 0,(function(){var t,r;return ct(this,(function(o){switch(o.label){case 0:if(!this.conversationManager)return[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.conversationManager.handleRenameConversation({conversationId:e,newTitle:n,conversations:this.state.conversations,selectedConversation:this.state.selectedConversation})];case 2:return t=o.sent(),this.setState(t.stateUpdate),[3,4];case 3:throw r=o.sent(),new Error("Error renaming conversation: ".concat(r.message||"Unknown error"));case 4:return[2]}}))}))},t.toggleConversationMenu=function(e,n){if(t.conversationManager){var r=t.conversationManager.toggleConversationMenu({conversationId:e,currentOpenMenu:t.state.openConversationMenu});t.setState(r.stateUpdate)}},t.handleShareConversation=function(e){return lt(t,void 0,void 0,(function(){var n;return ct(this,(function(t){switch(t.label){case 0:return this.conversationManager?[4,this.conversationManager.handleShareConversation(e)]:[2];case 1:return n=t.sent(),this.setState(n.stateUpdate),[2]}}))}))},t.handleDeleteConversation=function(e){return lt(t,void 0,void 0,(function(){var n,t,r=this;return ct(this,(function(o){switch(o.label){case 0:if(!this.conversationManager)return[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.conversationManager.handleDeleteConversation({conversationId:e,conversations:this.state.conversations,selectedConversation:this.state.selectedConversation,showPersonaSelection:this.state.showPersonaSelection,selectedPersona:this.state.selectedPersona,initialGreeting:this.props.initialGreeting})];case 2:return n=o.sent(),this.setState(n.stateUpdate,(function(){n.greetingContent&&(r.initialGreetingAdded=!0,r.addMessageToChat({id:U("greeting"),sender:"ai",content:n.greetingContent,timestamp:(new Date).toISOString()}))})),[3,4];case 3:throw t=o.sent(),new Error("Error deleting conversation: ".concat(t.message||"Unknown error"));case 4:return[2]}}))}))},t.loadConversationHistory=function(e){return lt(t,void 0,void 0,(function(){var n,t=this;return ct(this,(function(r){switch(r.label){case 0:if(!this.conversationLoader)return this.setState({error:"API service not available",isInitializing:!1}),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),console.log("ðŸ§¹ Clearing messages for conversation load: ".concat(e)),this.setState({messages:[],conversation_id:null,isLoadingHistory:!0,error:""}),[4,this.conversationLoader.loadConversationHistory(e)];case 2:return n=r.sent(),this.initialGreetingAdded=!0,this.setState({messages:n.messages,conversation_id:n.conversationId,isLoadingHistory:!1,isInitializing:!1}),setTimeout((function(){t.scrollToBottom({force:!0})}),100),[3,4];case 3:return r.sent(),this.setState({isLoadingHistory:!1,error:"Error loading conversation history",isInitializing:!1}),[3,4];case 4:return[2]}}))}))},t.loadConversationWithPersona=function(e){return lt(t,void 0,void 0,(function(){var n,t,r,o=this;return ct(this,(function(a){switch(a.label){case 0:if(!this.conversationLoader)return this.setState({error:"API service not available",isInitializing:!1}),[2];a.label=1;case 1:return a.trys.push([1,3,,5]),this.setState({messages:[],conversation_id:null,isLoadingHistory:!0,error:""}),[4,this.conversationLoader.loadConversationWithPersona({conversationId:e,showPersonaSelection:this.state.showPersonaSelection,models:this.state.models,personas:this.state.personas,selectedConversation:this.state.selectedConversation})];case 2:return n=a.sent(),this.initialGreetingAdded=!0,t=Bn.getModelKeyFromInfo(this.state.selectedModel),this.setState({messages:n.messages,conversation_id:n.conversationId,pendingModelKey:n.pendingModelKey,pendingModelSnapshot:n.pendingModelSnapshot,selectedModel:n.selectedModel,pendingPersonaId:n.pendingPersonaId,selectedPersona:n.selectedPersona,personas:n.personas,isLoadingHistory:!1,isInitializing:!1},(function(){var e=Bn.getModelKeyFromInfo(o.state.selectedModel);n.selectedModel&&e&&e!==t&&o.broadcastModelSelection(n.selectedModel),n.pendingModelKey&&o.resolvePendingModelSelection(),o.state.pendingPersonaId&&o.resolvePendingPersonaSelection()})),setTimeout((function(){o.scrollToBottom({force:!0})}),100),[3,5];case 3:return r=a.sent(),console.error("Error loading conversation with persona:",r),[4,this.loadConversationHistory(e)];case 4:return a.sent(),[3,5];case 5:return[2]}}))}))},t.updateConversationPersona=function(e,n){return lt(t,void 0,void 0,(function(){return ct(this,(function(t){if(!this.conversationLoader)throw new Error("Conversation loader not available");return[2,this.conversationLoader.updateConversationPersona(e,n)]}))}))},t.stopGeneration=function(){return lt(t,void 0,void 0,(function(){var e,n=this;return ct(this,(function(t){switch(t.label){case 0:if(console.log("ðŸ›‘ stopGeneration called"),this.currentStreamingAbortController&&(this.currentStreamingAbortController.abort(),this.currentStreamingAbortController=null),!this.aiService||!this.state.conversation_id)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.aiService.cancelGeneration(this.state.conversation_id)];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),console.error("Error canceling backend generation:",e),[3,4];case 4:return this.setState((function(e){return console.log("ðŸ›‘ Updating message states, current messages:",e.messages.length),{isStreaming:!1,isLoading:!1,messages:e.messages.map((function(e){var n=e.isStreaming;return n&&console.log("ðŸ›‘ Updating streaming message ".concat(e.id," with canContinue: true, isCutOff: true")),it(it({},e),{isStreaming:!1,canRegenerate:!0,canContinue:!!n||e.canContinue,isCutOff:!!n||e.isCutOff})}))}}),(function(){console.log("ðŸ›‘ Message states updated, focusing input"),n.focusInput()})),[2]}}))}))},t.continueGeneration=function(){return lt(t,void 0,void 0,(function(){var e,n,t=this;return ct(this,(function(r){if((e=this.state.messages.filter((function(e){return"ai"===e.sender})).pop())&&e.canContinue){if(!(n=dt([],this.state.messages,!0).reverse().find((function(e){return"user"===e.sender}))))return[2];this.setState((function(n){return{messages:n.messages.filter((function(n){return n.id!==e.id}))}}),(function(){return lt(t,void 0,void 0,(function(){return ct(this,(function(e){switch(e.label){case 0:return[4,this.sendPromptToAI(n.content)];case 1:return e.sent(),[2]}}))}))}))}return[2]}))}))},t.regenerateResponse=function(){return lt(t,void 0,void 0,(function(){var e,n=this;return ct(this,(function(t){return(e=this.state.messages.filter((function(e){return"user"===e.sender})).pop())&&this.setState((function(n){var t=n.messages.findIndex((function(n){return n.id===e.id}));return{messages:n.messages.slice(0,t+1)}}),(function(){n.sendPromptToAI(e.content)})),[2]}))}))},t.startEditingMessage=function(e,n){t.setState({editingMessageId:e,editingContent:n})},t.cancelEditingMessage=function(){t.setState({editingMessageId:null,editingContent:""})},t.toggleMarkdownView=function(e){t.setState((function(n){return{messages:n.messages.map((function(n){return n.id===e?it(it({},n),{showRawMarkdown:!n.showRawMarkdown}):n}))}}))},t.saveEditedMessage=function(){return lt(t,void 0,void 0,(function(){var e,n,t,r=this;return ct(this,(function(o){return e=this.state,n=e.editingMessageId,t=e.editingContent,n&&t.trim()?(this.setState((function(e){return{messages:e.messages.map((function(e){return e.id===n?it(it({},e),{content:t.trim(),isEdited:!0,originalContent:e.originalContent||e.content}):e})),editingMessageId:null,editingContent:""}}),(function(){return lt(r,void 0,void 0,(function(){var e,t=this;return ct(this,(function(r){return(e=this.state.messages.find((function(e){return e.id===n})))&&this.setState((function(e){return{messages:e.messages.slice(0,e.messages.findIndex((function(e){return e.id===n}))+1)}}),(function(){t.sendPromptToAI(e.content)})),[2]}))}))})),[2]):[2]}))}))},t.handleFileUploadClick=function(){var e=document.createElement("input");e.type="file",e.multiple=!0,e.accept=".pdf,.txt,.csv,.json,.xlsx,.xls,.md,.xml,.html",e.style.display="none",e.onchange=function(e){return lt(t,void 0,void 0,(function(){var n,t,r,o,a,s,i,l,c,d;return ct(this,(function(u){switch(u.label){case 0:if(!(n=e.target.files)||0===n.length)return[2];if(!this.documentService)return this.setState({error:"Document service not available"}),[2];this.setState({isProcessingDocuments:!0}),u.label=1;case 1:u.trys.push([1,9,10,11]),t=Array.from(n),r=[],o=0,a=t,u.label=2;case 2:if(!(o<a.length))return[3,8];s=a[o],u.label=3;case 3:return u.trys.push([3,6,,7]),[4,this.documentService.validateFile(s)];case 4:return(i=u.sent()).valid?[4,this.documentService.processDocument(s)]:(this.setState({error:"File ".concat(s.name,": ").concat(i.error)}),[3,7]);case 5:return(l=u.sent()).processing_success?r.push(l):this.setState({error:"Failed to process ".concat(s.name,": ").concat(l.error)}),[3,7];case 6:return c=u.sent(),this.setState({error:"Error processing ".concat(s.name,": ").concat(c instanceof Error?c.message:"Unknown error")}),[3,7];case 7:return o++,[3,2];case 8:return r.length>0&&this.handleDocumentsProcessed(r),[3,11];case 9:return d=u.sent(),this.setState({error:"Error processing documents: ".concat(d instanceof Error?d.message:"Unknown error")}),[3,11];case 10:return this.setState({isProcessingDocuments:!1}),[7];case 11:return[2]}}))}))},document.body.appendChild(e),e.click(),document.body.removeChild(e)},t.handleDocumentsProcessed=function(e){if(0!==e.length){var n;n=1===e.length?t.documentService.formatTextForChatContext(e[0]):t.documentService.formatMultipleTextsForChatContext(e),t.setState({documentContext:n},(function(){var r={id:U("documents"),sender:"ai",content:"",timestamp:(new Date).toISOString(),isDocumentContext:!0,documentData:{results:e,context:n}};t.addMessageToChat(r)}))}},t.handleDocumentError=function(e){t.setState({error:e})},t.handleGlobalKeyPress=function(e){"Escape"===e.key&&t.state.isStreaming&&(e.preventDefault(),t.stopGeneration()),"Escape"===e.key&&t.state.openConversationMenu&&(e.preventDefault(),t.setState({openConversationMenu:null}))},t.handleClickOutside=function(e){if(t.state.openConversationMenu){var n=e.target;n.closest(".history-action-button")||n.closest(".conversation-menu")||t.setState({openConversationMenu:null})}},t.toggleHistoryAccordion=function(){t.setState((function(e){return{isHistoryExpanded:!e.isHistoryExpanded}}))},t.autoCloseAccordionsOnFirstMessage=function(){1!==t.state.messages.filter((function(e){return"user"===e.sender})).length||t.state.conversation_id||t.setState({isHistoryExpanded:!1})},t.buildSearchContextForPrompt=function(e,n){var t='Search Results for "'.concat(e.query,'":\n\n');return e.results&&e.results.length>0&&e.results.slice(0,5).forEach((function(e,n){if(t+="".concat(n+1,". ").concat(e.title,"\n"),t+="   URL: ".concat(e.url,"\n"),e.content){var r=e.content.replace(/\s+/g," ").trim().substring(0,200);t+="   Summary: ".concat(r).concat(e.content.length>200?"...":"","\n")}t+="\n"})),n&&n.results&&n.results.length>0&&(t+="\nDetailed Content from Web Pages:\n\n",n.results.forEach((function(n,r){if(n.success&&n.content){var o=e.results.find((function(e){return e.url===n.url})),a=(null==o?void 0:o.title)||"Content from ".concat(n.url);t+="Page ".concat(r+1,": ").concat(a,"\n"),t+="Source: ".concat(n.url,"\n"),t+="Full Content: ".concat(n.content,"\n\n")}})),t+="(Successfully scraped ".concat(n.summary.successful_scrapes," out of ").concat(n.summary.total_urls," pages)\n")),t+="\nPlease use this web search and scraped content information to provide an accurate, up-to-date answer to the user's question."},t.cleanMessageContent=function(e){return t.conversationLoader?t.conversationLoader.cleanMessageContent(e):e},t.addMessageToChat=function(e){var n=it(it({},e),{content:t.cleanMessageContent(e.content)});console.log("ðŸ’¬ Adding message to chat: ".concat(n.sender," - ").concat(n.content.substring(0,50),"...")),t.setState((function(e){return{messages:dt(dt([],e.messages,!0),[n],!1)}}),(function(){console.log("âœ… Message added. Total messages: ".concat(t.state.messages.length))}))},t.isUserNearBottom=function(e){return t.scrollManager.isUserNearBottom(e)},t.updateScrollState=function(e){void 0===e&&(e={}),t.scrollManager.setMessages(t.state.messages),t.scrollManager.updateScrollState(e)},t.handleScroll=function(){t.scrollManager.setMessages(t.state.messages),t.scrollManager.handleScroll()},t.handleUserScrollIntent=function(e){t.scrollManager.handleUserScrollIntent(e)},t.handleScrollToBottomClick=function(){t.scrollManager.setMessages(t.state.messages),t.scrollManager.handleScrollToBottomClick()},t.followStreamIfAllowed=function(){t.scrollManager.setMessages(t.state.messages),t.scrollManager.followStreamIfAllowed()},t.scrollToBottom=function(e){t.scrollManager.setMessages(t.state.messages),t.scrollManager.scrollToBottom(e)},t.debouncedScrollToBottom=function(e){t.scrollManager.setMessages(t.state.messages),t.scrollManager.debouncedScrollToBottom(e)},t.focusInput=function(){t.inputRef.current&&setTimeout((function(){t.inputRef.current&&t.inputRef.current.focus()}),100)},t.handleInputChange=function(e){if(t.setState({inputText:e.target.value}),t.inputRef.current){var n=t.inputRef.current;n.style.height="auto";var r=window.getComputedStyle(n),o=4*(parseFloat(r.lineHeight||"0")||24);n.style.height="".concat(Math.min(n.scrollHeight,o),"px")}},t.handleKeyPress=function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),t.handleSendMessage())},t.handleSendMessage=function(){var e=t.state.inputText;if(e.trim()&&!t.state.isLoading){var n=U("user"),r={id:n,sender:"user",content:e.trim(),timestamp:(new Date).toISOString(),isEditable:!0};t.addMessageToChat(r),"undefined"!=typeof window?(window.requestAnimationFrame||function(e){return window.setTimeout(e,0)})((function(){return t.scrollToBottom({behavior:"smooth",manual:!0})})):t.scrollToBottom({manual:!0}),t.setState({inputText:""}),t.inputRef.current&&(t.inputRef.current.style.height="auto"),t.sendPromptToAI(r.content,n),t.autoCloseAccordionsOnFirstMessage()}},t.sendPromptToAI=function(e,n){return lt(t,void 0,void 0,(function(){var n,t,r,o,a,s,i,l,c,d,u,p=this;return ct(this,(function(h){switch(h.label){case 0:if(!this.aiService||!(null===(u=this.props.services)||void 0===u?void 0:u.api))return this.setState({error:"API service not available"}),[2];if(!this.state.selectedModel)return this.setState({error:"Please select a model first"}),[2];console.log("ðŸš€ Sending prompt to AI with conversation_id: ".concat(this.state.conversation_id||"null (will create new)")),h.label=1;case 1:return h.trys.push([1,4,,5]),this.setState({isLoading:!0,isStreaming:!0,error:""}),this.currentStreamingAbortController=new AbortController,n=this.state.messages.filter((function(e){return!e.isDocumentContext&&!e.isRetrievedContext})).slice(-6).map((function(e){return{role:"user"===e.sender?"user":"assistant",content:e.content}})),[4,this.props.dataRepository.getRelevantContent(e,this.props.selectedCollection.id,n)];case 2:return t=h.sent(),r=e,o="",t&&t.chunks&&(o=t.chunks.map((function(e,n){return"Excerpt: ".concat(n,"\n").concat(e.content,"\n\n")})).join(", "))&&(r="\n".concat(o,"\n\nUser Question: ").concat(e),this.setState({documentContext:o},(function(){var e={id:U("retrieval"),sender:"ai",content:"",timestamp:(new Date).toISOString(),isRetrievedContext:!0,retrievalData:{chunks:t.chunks,context:o,intent:t.intent,metadata:t.metadata}};p.addMessageToChat(e)}))),a=U("ai"),this.addMessageToChat({id:a,sender:"ai",content:"",timestamp:(new Date).toISOString(),isStreaming:!0}),s="",i=function(e){s+=e,p.setState((function(e){var n=e.messages.map((function(e){return e.id===a?it(it({},e),{content:p.cleanMessageContent(s)}):e}));return it(it({},e),{messages:n})}),p.followStreamIfAllowed)},l=function(e){console.log("ðŸ”„ Conversation ID received: ".concat(e)),p.setState({conversation_id:e},(function(){console.log("âœ… Conversation ID updated in state: ".concat(p.state.conversation_id)),setTimeout((function(){p.refreshConversationsList()}),1e3)}))},c=this.getCurrentPageContext(),[4,this.aiService.sendPrompt(r,this.state.selectedModel,this.state.useStreaming,this.state.conversation_id,this.props.conversationType||"chat",i,l,c,this.state.selectedPersona||void 0,this.currentStreamingAbortController)];case 3:return h.sent(),this.setState((function(e){return console.log("âœ… Finalizing message with ID:",a),{messages:e.messages.map((function(e){if(e.id===a){var n=e.isCutOff;return console.log("âœ… Finalizing message ".concat(e.id,", isCutOff: ").concat(e.isCutOff,", preserving canContinue: ").concat(n)),it(it({},e),{isStreaming:!1,canRegenerate:!0,canContinue:!!n})}return e})),isLoading:!1,isStreaming:!1}}),(function(){console.log("âœ… Message finalized. Total messages: ".concat(p.state.messages.length)),p.followStreamIfAllowed(),p.focusInput(),p.state.conversation_id&&p.refreshConversationsList()})),this.currentStreamingAbortController=null,[3,5];case 4:return(d=h.sent())instanceof Error&&"AbortError"===d.name?this.setState((function(e){return{isLoading:!1,isStreaming:!1,messages:e.messages.map((function(e){return it(it({},e),{isStreaming:!1,canRegenerate:!0,canContinue:!!e.isStreaming||e.canContinue,isCutOff:!!e.isStreaming||e.isCutOff})}))}}),(function(){p.focusInput()})):this.setState({isLoading:!1,isStreaming:!1,error:"Error sending prompt: ".concat(d instanceof Error?d.message:"Unknown error")},(function(){p.focusInput()})),this.currentStreamingAbortController=null,[3,5];case 5:return[2]}}))}))},t.state={messages:[],inputText:"",isLoading:!1,error:"",currentTheme:"light",selectedModel:null,pendingModelKey:null,pendingModelSnapshot:null,useStreaming:!0,conversation_id:null,isLoadingHistory:!1,currentUserId:null,isInitializing:!0,conversations:[],selectedConversation:null,isUpdating:!1,models:[],isLoadingModels:!0,showModelSelection:!0,showConversationHistory:!0,personas:n.availablePersonas||[],selectedPersona:null,pendingPersonaId:null,isLoadingPersonas:!n.availablePersonas,showPersonaSelection:!0,useWebSearch:!1,isSearching:!1,isStreaming:!1,editingMessageId:null,editingContent:"",documentContext:"",isProcessingDocuments:!1,isNearBottom:!0,showScrollToBottom:!1,isAutoScrollLocked:!1,showAllHistory:!1,openConversationMenu:null,isHistoryExpanded:!0},t.scrollManager=new Un({scrollAnchorOffset:420,minVisibleLastMessageHeight:64,nearBottomEpsilon:24,strictBottomThreshold:4,userScrollIntentGraceMs:300,scrollDebounceDelay:100}),t.scrollManager.onStateChange((function(e){t.setState({isNearBottom:e.isNearBottom,showScrollToBottom:e.showScrollToBottom,isAutoScrollLocked:e.isAutoScrollLocked})})),t.aiService=new Be(n.services.api),t.documentService=new He(n.services.api),n.services.api&&t.aiService&&(t.conversationLoader=new Kn({api:n.services.api,aiService:t.aiService})),n.services.api&&(t.personaResolver=new tt({api:n.services.api})),n.services.api&&(t.conversationManager=new Jn({api:n.services.api,addMessageToChat:t.addMessageToChat,loadConversationWithPersona:t.loadConversationWithPersona})),n.services.settings&&n.services.pageContext&&(t.pageSettingsService=new at({settings:n.services.settings,pageContext:n.services.pageContext})),n.services.api&&(t.modelConfigLoader=new Tn(n.services.api)),t.modelSelector=new Rn,t}return st(n,e),n.prototype.componentDidMount=function(){var e,n,t=this;console.log("ðŸŽ­ ComponentDidMount - Initial persona state: selectedPersona=".concat((null===(e=this.state.selectedPersona)||void 0===e?void 0:e.name)||"null",", showPersonaSelection=").concat(this.state.showPersonaSelection,", availablePersonas=").concat((null===(n=this.props.availablePersonas)||void 0===n?void 0:n.length)||0)),this.initializeThemeService(),this.initializePageContextService(),this.loadInitialData(),this.loadSavedStreamingMode(),this.loadPersonas(),document.addEventListener("keydown",this.handleGlobalKeyPress),document.addEventListener("mousedown",this.handleClickOutside),this.scrollManager.setContainer(this.chatHistoryRef.current),this.scrollManager.setMessages(this.state.messages),this.scrollManager.updateScrollState(),setTimeout((function(){var e;if(!t.state.conversation_id){var n=Wn.getGreeting({showPersonaSelection:t.state.showPersonaSelection,selectedPersona:t.state.selectedPersona,defaultGreeting:t.props.initialGreeting});if(console.log("ðŸŽ­ Greeting logic: showPersonaSelection=".concat(t.state.showPersonaSelection,", selectedPersona=").concat((null===(e=t.state.selectedPersona)||void 0===e?void 0:e.name)||"none",", using=").concat(Wn.shouldUsePersonaGreeting({showPersonaSelection:t.state.showPersonaSelection,selectedPersona:t.state.selectedPersona})?"persona":"default"," greeting")),n&&!t.initialGreetingAdded){t.initialGreetingAdded=!0;var r={id:U("greeting"),sender:"ai",content:n,timestamp:(new Date).toISOString()};t.setState((function(e){return{messages:dt(dt([],e.messages,!0),[r],!1),isInitializing:!1}}))}else t.setState({isInitializing:!1})}}),2e3)},n.prototype.componentDidUpdate=function(e,n){if(n.models===this.state.models&&n.pendingModelKey===this.state.pendingModelKey&&n.pendingModelSnapshot===this.state.pendingModelSnapshot&&n.selectedModel===this.state.selectedModel||this.resolvePendingModelSelection(),n.personas===this.state.personas&&n.pendingPersonaId===this.state.pendingPersonaId&&n.selectedPersona===this.state.selectedPersona&&n.showPersonaSelection===this.state.showPersonaSelection||this.resolvePendingPersonaSelection(),n.messages!==this.state.messages){var t=this.state.messages.length>n.messages.length;!this.state.isAutoScrollLocked&&t?this.debouncedScrollToBottom():this.updateScrollState()}},n.prototype.componentWillUnmount=function(){var e;this.scrollManager.cleanup(),this.themeChangeListener&&(null===(e=this.props.services)||void 0===e?void 0:e.theme)&&this.props.services.theme.removeThemeChangeListener(this.themeChangeListener),this.pageSettingsService&&this.pageSettingsService.cleanup(),document.removeEventListener("keydown",this.handleGlobalKeyPress),document.removeEventListener("mousedown",this.handleClickOutside),this.currentStreamingAbortController&&this.currentStreamingAbortController.abort()},n.prototype.getSettingKey=function(e){var n;return(null===(n=this.pageSettingsService)||void 0===n?void 0:n.getSettingKey(e))||e},n.prototype.getCurrentPageContext=function(){var e;return(null===(e=this.pageSettingsService)||void 0===e?void 0:e.getCurrentPageContext())||null},n.prototype.render=function(){var e=this,n=this.state,t=n.inputText,o=n.messages,a=n.isLoading,s=n.isLoadingHistory,i=(n.useStreaming,n.error),l=n.isInitializing,c=n.models,d=n.isLoadingModels,u=n.selectedModel,p=n.conversations,h=n.selectedConversation,m=n.showModelSelection,g=(n.showConversationHistory,n.personas),f=n.selectedPersona,v=(n.isLoadingPersonas,n.showPersonaSelection),b=(n.useWebSearch,n.isSearching,this.props),x=b.promptQuestion,y=b.selectedCollection,w=b.services,k="dark"===this.state.currentTheme?"dark-theme":"";return(0,r.jsx)("div",{className:"braindrive-chat-container ".concat(k),children:(0,r.jsxs)("div",{className:"chat-paper",children:[(0,r.jsx)(be,{apiService:w.api,dataRepository:this.props.dataRepository,models:c,selectedModel:u,isLoadingModels:d,onModelChange:this.handleModelChange,showModelSelection:m,selectedCollection:y,personas:g,selectedPersona:f,onPersonaChange:this.handlePersonaChange,showPersonaSelection:v,conversations:p,selectedConversation:h,onConversationSelect:this.handleConversationSelect,onNewChatClick:this.handleNewChatClick,showConversationHistory:!0,onRenameSelectedConversation:function(n){return e.handleRenameConversation(n)},onDeleteSelectedConversation:function(n){return e.handleDeleteConversation(n)},isLoading:a,isLoadingHistory:s}),l?(0,r.jsx)(Le,{isInitializing:l}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"h-full max-h-96 overflow-y-auto",children:(0,r.jsx)(Re,{messages:o,isLoading:a,isLoadingHistory:s,error:i,chatHistoryRef:this.chatHistoryRef,editingMessageId:this.state.editingMessageId,editingContent:this.state.editingContent,onStartEditing:this.startEditingMessage,onCancelEditing:this.cancelEditingMessage,onSaveEditing:this.saveEditedMessage,onEditingContentChange:function(n){return e.setState({editingContent:n})},onRegenerateResponse:this.regenerateResponse,onContinueGeneration:this.continueGeneration,showScrollToBottom:this.state.showScrollToBottom,onScrollToBottom:this.handleScrollToBottomClick,onToggleMarkdown:this.toggleMarkdownView,onScroll:this.handleScroll,onUserScrollIntent:this.handleUserScrollIntent})}),(0,r.jsx)(De,{inputText:t,isLoading:a,isLoadingHistory:s,isStreaming:this.state.isStreaming,selectedModel:u,promptQuestion:x,onInputChange:this.handleInputChange,onKeyPress:this.handleKeyPress,onSendMessage:this.handleSendMessage,onStopGeneration:this.stopGeneration,onFileUpload:this.handleFileUploadClick,inputRef:this.inputRef,personas:g,selectedPersona:f,onPersonaChange:this.handlePersonaChange,onPersonaToggle:this.handlePersonaToggle,showPersonaSelection:!1}),(0,r.jsx)("div",{className:"pl-4",children:(0,r.jsx)(On,{apiService:w.api,dataRepository:this.props.dataRepository,collectionId:y.id,onDocumentListChange:function(){return console.log("document changed")},documents:[],chatSessions:[]})})]})]})})},n}(a().Component),pt=t(6808),ht=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}))},mt=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},gt="".concat(_,"/api/evaluation/state");function ft(e,n){return{runId:n,model:e.model,llmModel:e.llm_model||e.llmModel,persona:e.persona,collectionId:e.collection_id||e.collectionId,testCases:e.test_cases||e.testCases,processedQuestionIds:e.processed_question_ids||e.processedQuestionIds,currentBatch:e.current_batch||e.currentBatch,timestamp:e.last_updated?new Date(e.last_updated).getTime():e.timestamp||Date.now()}}function vt(e,n,t){return ht(this,void 0,void 0,(function(){var r,o,a,s;return mt(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),r=function(e){return{user_id:"",model:{id:e.model.serverId||e.model.providerId||"unknown",provider:e.model.provider,name:e.model.name},llm_model:e.llmModel,persona:e.persona,collection_id:e.collectionId,test_cases:e.testCases,processed_question_ids:e.processedQuestionIds,current_batch:e.currentBatch,last_updated:new Date(e.timestamp).toISOString()}}(n),r.user_id=t,[4,fetch("".concat(gt,"/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})];case 1:return(o=i.sent()).ok?[3,3]:[4,o.json().catch((function(){return{error:"Unknown error",code:"UNKNOWN"}}))];case 2:return a=i.sent(),console.error("Failed to save evaluation state:",a),[2,null];case 3:return[2,o.json()];case 4:return s=i.sent(),console.error("Error saving evaluation state:",s),[2,null];case 5:return[2]}}))}))}function bt(e,n){return ht(this,void 0,void 0,(function(){var t,r,o,a,s;return mt(this,(function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),[4,fetch("".concat(gt,"/").concat(e,"?user_id=").concat(n),{method:"GET",headers:{"Content-Type":"application/json"}})];case 1:return(t=i.sent()).ok?[3,3]:404===t.status?(console.log("Evaluation state not found in backend"),[2,null]):[4,t.json().catch((function(){return{error:"Unknown error",code:"UNKNOWN"}}))];case 2:return r=i.sent(),console.error("Failed to load evaluation state:",r),[2,null];case 3:return[4,t.json()];case 4:return o=i.sent(),(null===(s=o.metadata)||void 0===s?void 0:s.is_expired)?(console.log("Evaluation state expired in backend"),[2,null]):[2,{state:ft(o.state,e),metadata:o.metadata}];case 5:return a=i.sent(),console.error("Error loading evaluation state:",a),[2,null];case 6:return[2]}}))}))}function xt(e,n){return ht(this,void 0,void 0,(function(){var t,r;return mt(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,fetch("".concat(gt,"/").concat(e,"?user_id=").concat(n),{method:"DELETE",headers:{"Content-Type":"application/json"}})];case 1:return 204===(t=o.sent()).status||t.ok?[2,!0]:(console.error("Failed to delete evaluation state:",t.status),[2,!1]);case 2:return r=o.sent(),console.error("Error deleting evaluation state:",r),[2,!1];case 3:return[2]}}))}))}function yt(e){return ht(this,arguments,void 0,(function(e,n){var t,r,o,a;return void 0===n&&(n=!1),mt(this,(function(s){switch(s.label){case 0:return s.trys.push([0,4,,5]),t=new URLSearchParams({user_id:e,include_expired:String(n)}),[4,fetch("".concat(gt,"/in-progress?").concat(t),{method:"GET",headers:{"Content-Type":"application/json"}})];case 1:return(r=s.sent()).ok?[3,3]:[4,r.json().catch((function(){return{error:"Unknown error",code:"UNKNOWN"}}))];case 2:return o=s.sent(),console.error("Failed to list in-progress evaluations:",o),[2,null];case 3:return[2,r.json()];case 4:return a=s.sent(),console.error("Error listing in-progress evaluations:",a),[2,null];case 5:return[2]}}))}))}var wt=function(){return wt=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},wt.apply(this,arguments)},kt=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}))},St=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},jt="braindrive_evaluation_in_progress",Ct=function(){function e(){}return e.saveState=function(e){try{var n=wt(wt({},e),{timestamp:Date.now()});localStorage.setItem(jt,JSON.stringify(n))}catch(e){console.error("Failed to save evaluation state:",e)}},e.loadState=function(){try{var e=localStorage.getItem(jt);if(!e)return null;var n=JSON.parse(e);return this.isStale(n)?(this.clearState(),null):n}catch(e){return console.error("Failed to load evaluation state:",e),null}},e.clearState=function(){try{localStorage.removeItem(jt)}catch(e){console.error("Failed to clear evaluation state:",e)}},e.isStale=function(e){return Date.now()-e.timestamp>6048e5},e.hasInProgressEvaluation=function(){return null!==this.loadState()},e.getRemainingQuestionsCount=function(){var e=this.loadState();return e?e.testCases.length-e.processedQuestionIds.length:0},e.saveStateWithBackend=function(e,n){return kt(this,void 0,void 0,(function(){return St(this,(function(t){switch(t.label){case 0:return this.saveState(e),n?[4,vt(e.runId,e,n)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.loadStateWithBackend=function(e,n){return kt(this,void 0,void 0,(function(){var t;return St(this,(function(r){switch(r.label){case 0:return n?[4,bt(e,n)]:[3,2];case 1:if(null==(t=r.sent())?void 0:t.state)return console.log("Loaded evaluation state from backend"),[2,t.state];r.label=2;case 2:return console.log("Loading evaluation state from localStorage"),[2,this.loadState()]}}))}))},e.clearStateWithBackend=function(e,n){return kt(this,void 0,void 0,(function(){return St(this,(function(t){switch(t.label){case 0:return this.clearState(),n?[4,xt(e,n)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.listInProgressEvaluations=function(e){return kt(this,void 0,void 0,(function(){var n;return St(this,(function(t){switch(t.label){case 0:return[4,yt(e,!1)];case 1:return[2,(null==(n=t.sent())?void 0:n.evaluations)||[]]}}))}))},e}(),Nt={retrieving_context:{name:"Retrieving Context",description:"Retrieving context from documents",progressRange:[0,65]},preparing_tests:{name:"Preparing Tests",description:"Preparing test cases",progressRange:[65,70]},generating_answers:{name:"Generating Answers",description:"Generating AI answers",progressRange:[70,90]},judging:{name:"Judging",description:"Judging responses",progressRange:[90,100]},completed:{name:"Completed",description:"Evaluation complete",progressRange:[100,100]}};function _t(e,n){var t=Nt[e].progressRange,r=t[0];return r+(t[1]-r)*n}var Ot=function(){return Ot=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},Ot.apply(this,arguments)},Pt=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}))},Mt=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},It=function(e,n,t){if(t||2===arguments.length)for(var r,o=0,a=n.length;o<a;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))},Et=function(){function e(e,n,t){var r=this;this.abortController=null,this.currentModel=null,this.currentLlmModel=null,this.currentPersona=null,this.currentCollectionId=null,this.processedQuestionIds=new Set,this.userId=void 0,this.runEvaluation=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return Pt(r,It([e],n,!0),void 0,(function(e,n,t,r){var o,a,s,i,l,c,d,u,p,h,m,g,f,v,b,x,y,w,k,S,j,C,N;return void 0===n&&(n=null),Mt(this,(function(_){switch(_.label){case 0:this.abortController=new AbortController,this.currentModel=e,this.currentLlmModel=e.name,this.currentPersona=n,this.currentCollectionId=t,this.processedQuestionIds.clear(),_.label=1;case 1:return _.trys.push([1,17,,21]),console.log("Starting evaluation - retrieving context..."),this.updateState({isRunning:!0,error:null,progress:0,currentStage:"retrieving_context",stageProgress:_t("retrieving_context",.1),activeRun:{id:"pending",total_questions:r.length,correct_count:0,incorrect_count:0,evaluated_count:0,accuracy:0,started_at:(new Date).toISOString(),is_completed:!1,progress:0,status:"running",duration_seconds:null,run_date:(new Date).toISOString()}}),[4,Je({collection_id:t,questions:r,llm_model:this.currentLlmModel,persona:this.convertPersonaToRequest(n)})];case 2:for(a=_.sent(),o=a.evaluation_run_id,s=a.test_data,console.log("Context retrieved for ".concat(s.length," questions")),this.updateState({currentStage:"preparing_tests",stageProgress:_t("preparing_tests",.5),activeRunId:o,testCases:s,activeRun:{id:o,total_questions:s.length,correct_count:0,incorrect_count:0,evaluated_count:0,accuracy:0,started_at:(new Date).toISOString(),is_completed:!1,progress:0,status:"running",duration_seconds:null,run_date:(new Date).toISOString()}}),this.savePersistenceState(o,s),i=[],l=0;l<s.length;l+=3)i.push(s.slice(l,l+3));console.log("Starting answer generation loop..."),c=0,_.label=3;case 3:if(!(c<i.length))return[3,10];if(null===(C=this.abortController)||void 0===C?void 0:C.signal.aborted)return console.log("Evaluation aborted"),this.updateState({isRunning:!1}),[2];d=i[c],u=this.processedQuestionIds.size,console.log("Generating answers for batch ".concat(c+1,"/").concat(i.length)),this.updateState({isGenerating:!0,currentStage:"generating_answers",stageProgress:_t("generating_answers",u/s.length)}),p=[],h=0,m=d,_.label=4;case 4:return h<m.length?(g=m[h],[4,this.generateAnswerForQuestion(g,e,n)]):[3,7];case 5:f=_.sent(),p.push({test_case_id:g.test_case_id,llm_answer:f,retrieved_context:g.retrieved_context}),this.processedQuestionIds.add(g.test_case_id),this.updateState({stageProgress:_t("generating_answers",this.processedQuestionIds.size/s.length)}),_.label=6;case 6:return h++,[3,4];case 7:return this.updateState({isGenerating:!1}),console.log("Submitting batch ".concat(c+1," (").concat(p.length," answers)")),[4,Qe({evaluation_run_id:o,submissions:p})];case 8:_.sent(),this.savePersistenceState(o,s),_.label=9;case 9:return c++,[3,3];case 10:return console.log("All answers generated and submitted. Starting judging phase..."),this.updateState({currentStage:"judging",stageProgress:_t("judging",0),isGenerating:!1}),console.log("Waiting 30 seconds before polling judge results..."),[4,new Promise((function(e){return setTimeout(e,3e4)}))];case 11:_.sent(),console.log("Starting polling for judge results..."),v=1e4,b=60,x=0,_.label=12;case 12:if(null===(N=this.abortController)||void 0===N?void 0:N.signal.aborted)return console.log("Evaluation aborted during judging"),this.updateState({isRunning:!1}),[2];if(x++>=b)throw new Error("Judging timeout after 10 minutes");return[4,new Promise((function(e){return setTimeout(e,v)}))];case 13:return _.sent(),[4,Xe(o)];case 14:return y=_.sent(),w=y.evaluation_run,console.log("Poll ".concat(x,": ").concat(w.evaluated_count,"/").concat(w.total_questions," judged")),this.updateState({progress:w.progress,stageProgress:_t("judging",w.progress),activeRun:Ot(Ot({},this.state.activeRun),{evaluated_count:w.evaluated_count,progress:w.progress,correct_count:w.correct_count,incorrect_count:w.incorrect_count,accuracy:w.accuracy})}),"completed"===w.status||w.evaluated_count>=w.total_questions?(console.log("All questions judged or evaluation completed!"),[3,15]):[3,12];case 15:return console.log("Evaluation completed!"),k=Ot(Ot({},this.state.activeRun),{completed_at:(new Date).toISOString(),is_completed:!0,progress:1}),this.updateState({isRunning:!1,currentStage:"completed",stageProgress:100,activeRun:k,pastRuns:It([k],this.state.pastRuns,!0)}),[4,Ct.clearStateWithBackend(o,this.userId)];case 16:return _.sent(),[3,21];case 17:return S=_.sent(),console.error("Evaluation failed:",S),j=S instanceof Error?S.message:"Unknown error",this.updateState({error:j,isRunning:!1}),this.deps.setError(j),o?[4,Ct.clearStateWithBackend(o,this.userId)]:[3,19];case 18:return _.sent(),[3,20];case 19:Ct.clearState(),_.label=20;case 20:return[3,21];case 21:return[2]}}))}))},this.stopEvaluation=function(){r.abortController&&(r.abortController.abort(),r.abortController=null),r.updateState({isRunning:!1,isGenerating:!1})},this.clearError=function(){r.updateState({error:null}),r.deps.setError(null)},this.selectHistoryRun=function(e){r.updateState({selectedHistoryRun:e})},this.startNewEvaluation=function(){r.updateState({activeRun:null,activeRunId:null,testCases:[],currentResults:null,selectedHistoryRun:null,error:null}),Ct.clearState()},this.resumeEvaluation=function(){return Pt(r,void 0,void 0,(function(){var e,n,t,r,o,a,s,i,l,c,d,u,p,h,m,g,f,v,b,x,y,w,k,S,j,C,N,_=this;return Mt(this,(function(O){switch(O.label){case 0:if(!(e=Ct.loadState()))throw new Error("No persisted evaluation state found");return n=e,this.userId?[4,Ct.loadStateWithBackend(e.runId,this.userId)]:[3,2];case 1:(t=O.sent())?(n=t,console.log("Resuming from backend state")):console.log("Resuming from localStorage"),O.label=2;case 2:if(Ct.isStale(n))throw new Error("Persisted evaluation is too old (> 7 days)");return this.updateState({isRunning:!0,error:null}),this.abortController=new AbortController,this.currentModel=n.model,this.currentLlmModel=n.llmModel,this.currentPersona=n.persona,this.currentCollectionId=n.collectionId||null,this.processedQuestionIds=new Set(n.processedQuestionIds),r=n.runId,o=n.testCases,console.log("Resuming evaluation: ".concat(r)),console.log("Already processed: ".concat(this.processedQuestionIds.size,"/").concat(o.length)),a=o.filter((function(e){return!_.processedQuestionIds.has(e.test_case_id)})),console.log("Remaining questions: ".concat(a.length)),0!==a.length?[3,4]:(console.log("All questions already processed"),this.updateState({isRunning:!1}),[4,Ct.clearStateWithBackend(r,this.userId)]);case 3:return O.sent(),[2];case 4:this.updateState({activeRunId:r,testCases:o,activeRun:{id:r,total_questions:o.length,correct_count:0,incorrect_count:0,evaluated_count:this.processedQuestionIds.size,accuracy:0,started_at:new Date(n.timestamp).toISOString(),is_completed:!1,progress:this.processedQuestionIds.size/o.length,status:"running",duration_seconds:null,run_date:new Date(n.timestamp).toISOString()}}),O.label=5;case 5:for(O.trys.push([5,19,,21]),s=[],i=0;i<a.length;i+=3)s.push(a.slice(i,i+3));l=0,O.label=6;case 6:if(!(l<s.length))return[3,18];if(null===(j=this.abortController)||void 0===j?void 0:j.signal.aborted)return console.log("Evaluation aborted by user"),this.updateState({isRunning:!1}),[2];c=s[l],console.log("Processing batch ".concat(l+1,"/").concat(s.length)),this.updateState({isGenerating:!0}),d=[],u=0,p=c,O.label=7;case 7:return u<p.length?(h=p[u],[4,this.generateAnswerForQuestion(h,this.currentModel,this.currentPersona)]):[3,10];case 8:m=O.sent(),d.push({test_case_id:h.test_case_id,llm_answer:m,retrieved_context:h.retrieved_context}),this.processedQuestionIds.add(h.test_case_id),O.label=9;case 9:return u++,[3,7];case 10:return this.updateState({isGenerating:!1}),console.log("Submitting ".concat(d.length," answers...")),[4,Qe({evaluation_run_id:r,submissions:d})];case 11:g=O.sent(),console.log("Batch ".concat(l+1," submitted:"),g.message),f=(null===(C=this.state.activeRun)||void 0===C?void 0:C.evaluated_count)||0,v=f+d.length,console.log("Waiting for judging... (target: ".concat(v,")")),O.label=12;case 12:return(null===(N=this.abortController)||void 0===N?void 0:N.signal.aborted)?(console.log("Evaluation aborted during polling"),this.updateState({isRunning:!1}),[2]):[4,new Promise((function(e){return setTimeout(e,2e3)}))];case 13:return O.sent(),[4,Xe(r)];case 14:return b=O.sent(),x=b.evaluation_run,console.log("Poll result: evaluated ".concat(x.evaluated_count,"/").concat(x.total_questions)),this.updateState({progress:x.progress,activeRun:Ot(Ot({},this.state.activeRun),{evaluated_count:x.evaluated_count,progress:x.progress,correct_count:x.correct_count,incorrect_count:x.incorrect_count,accuracy:x.accuracy})}),x.evaluated_count>=v?(console.log("Batch ".concat(l+1," judged successfully")),[3,15]):[3,12];case 15:return this.savePersistenceState(r,o),(y=this.state.activeRun).evaluated_count!==y.total_questions?[3,17]:(console.log("Evaluation completed!"),w=Ot(Ot({},y),{completed_at:(new Date).toISOString(),is_completed:!0,progress:1}),this.updateState({isRunning:!1,activeRun:w,pastRuns:It([w],this.state.pastRuns,!0)}),[4,Ct.clearStateWithBackend(r,this.userId)]);case 16:return O.sent(),[3,18];case 17:return l++,[3,6];case 18:return[3,21];case 19:return k=O.sent(),console.error("Resume evaluation failed:",k),S=k instanceof Error?k.message:"Unknown error",this.updateState({error:S,isRunning:!1}),this.deps.setError(S),[4,Ct.clearStateWithBackend(r,this.userId)];case 20:return O.sent(),[3,21];case 21:return[2]}}))}))},this.state=e,this.deps=n,this.updateShellState=t}return e.prototype.setUserId=function(e){this.userId=e},e.prototype.convertPersonaToRequest=function(e){return e?{id:e.id||null,name:e.name||null,description:e.description||null,system_prompt:e.system_prompt||null,model_settings:Ot({temperature:.7,top_p:.9,frequency_penalty:0,presence_penalty:0,context_window:4e3,stop_sequences:[]},e.model_settings||{}),created_at:e.created_at||null,updated_at:e.updated_at||null}:null},e.prototype.updateState=function(e){this.state=Ot(Ot({},this.state),e),this.updateShellState(e)},e.prototype.generateAnswerForQuestion=function(e,n,t){return Pt(this,void 0,void 0,(function(){var t,r;return Mt(this,(function(o){switch(o.label){case 0:return console.log("Generating answer for: ".concat(e.question)),t="Context:\n".concat(e.retrieved_context,"\n\nQuestion: ").concat(e.question,"\n\nAnswer:"),r="",[4,this.deps.aiService.sendPrompt(t,n,!1,null,"evaluation",(function(e){r+=e}),(function(){}),void 0,void 0,this.abortController||void 0)];case 1:return o.sent(),[2,r.trim()]}}))}))},e.prototype.savePersistenceState=function(e,n){return Pt(this,void 0,void 0,(function(){var t;return Mt(this,(function(r){switch(r.label){case 0:return this.currentModel&&this.currentLlmModel?(t={runId:e,model:this.currentModel,llmModel:this.currentLlmModel,persona:this.currentPersona,collectionId:this.currentCollectionId||void 0,testCases:n,processedQuestionIds:Array.from(this.processedQuestionIds),currentBatch:[],timestamp:Date.now()},[4,Ct.saveStateWithBackend(t,this.userId)]):[2];case 1:return r.sent(),[2]}}))}))},e}(),Tt=t(7213),Rt=t(4164),At=t(856);function Dt(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0,At.QP)((0,Rt.$)(e))}var Lt=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),zt=function(){return zt=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},zt.apply(this,arguments)},Ft=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Lt(n,e),n.prototype.render=function(){var e=this.props,n=e.className,t=e.variant,o=void 0===t?"default":t,a=e.size,s=void 0===a?"default":a,i=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t}(e,["className","variant","size"]);return(0,r.jsx)("button",zt({"data-slot":"button",className:Dt("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"}[o],{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}[s],n)},i))},n}(o.Component),Ut=t(5107),Bt=t(5773),Gt=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),qt=function(){return qt=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},qt.apply(this,arguments)},Ht=o.createContext({open:!1,setOpen:function(){}}),Vt=function(e){function n(n){var t=e.call(this,n)||this;return t.setOpen=function(e){t.props.disabled||t.setState({open:e})},t.state={open:!1},t}return Gt(n,e),n.prototype.render=function(){var e=this.props,n=e.value,t=e.onValueChange,o=e.disabled,a=e.children,s=this.state.open;return(0,r.jsx)(Ht.Provider,{value:{value:n,onValueChange:t,open:s,setOpen:this.setOpen,disabled:o},children:(0,r.jsx)("div",{"data-slot":"select",className:"relative",children:a})})},n}(o.Component),Kt=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.handleClick=function(){n.context.disabled||n.context.setOpen(!n.context.open)},n}return Gt(n,e),n.prototype.render=function(){var e=this.props,n=e.className,t=e.size,o=void 0===t?"default":t,a=e.children,s=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t}(e,["className","size","children"]),i=this.context.disabled;return(0,r.jsxs)("button",qt({type:"button","data-slot":"select-trigger","data-size":o,className:Dt("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50","default"===o&&"h-9","sm"===o&&"h-8",n),onClick:this.handleClick,disabled:i},s,{children:[a,(0,r.jsx)(Ut.A,{className:"size-4 opacity-50"})]}))},n.contextType=Ht,n}(o.Component),Wt=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Gt(n,e),n.prototype.render=function(){var e=this.props,n=e.placeholder,t=e.className,o=e.children,a=this.context.value;return a?(0,r.jsx)("span",{"data-slot":"select-value",className:t,children:o||a}):(0,r.jsx)("span",{"data-slot":"select-value","data-placeholder":!0,className:t,children:n})},n.contextType=Ht,n}(o.Component),Qt=function(e){function n(n){var t=e.call(this,n)||this;return t.contentRef=o.createRef(),t.searchInputRef=o.createRef(),t.handleClickOutside=function(e){t.contentRef.current&&!t.contentRef.current.contains(e.target)&&(t.context.setOpen(!1),t.setState({searchQuery:""}))},t.handleSearchChange=function(e){var n=e.target.value;t.setState({searchQuery:n}),t.props.onSearchChange&&t.props.onSearchChange(n)},t.handleSearchClick=function(e){e.stopPropagation()},t.state={searchQuery:""},t}return Gt(n,e),n.prototype.componentDidMount=function(){var e=this;document.addEventListener("mousedown",this.handleClickOutside),this.props.searchable&&this.searchInputRef.current&&setTimeout((function(){var n;null===(n=e.searchInputRef.current)||void 0===n||n.focus()}),100)},n.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.handleClickOutside)},n.prototype.componentDidUpdate=function(e){!e.searchable&&this.props.searchable&&this.searchInputRef.current&&this.searchInputRef.current.focus(),e.searchable&&!this.context.open&&this.state.searchQuery&&this.setState({searchQuery:""})},n.prototype.render=function(){var e=this.props,n=e.className,t=e.children,o=e.searchable,a=e.searchPlaceholder,s=void 0===a?"Search...":a,i=this.context.open,l=this.state.searchQuery;return i?(0,r.jsxs)("div",{ref:this.contentRef,"data-slot":"select-content",className:Dt("bg-popover text-popover-foreground absolute z-50 mt-1 max-h-60 w-full min-w-[8rem] rounded-md border shadow-md flex flex-col",n),children:[o&&(0,r.jsx)("div",{className:"p-2 border-b",onClick:this.handleSearchClick,children:(0,r.jsx)("input",{ref:this.searchInputRef,type:"text",placeholder:s,value:l,onChange:this.handleSearchChange,className:"w-full px-2 py-1.5 text-sm border rounded outline-none focus:ring-1 focus:ring-blue-500",style:{backgroundColor:"var(--input-bg)",borderColor:"var(--border-color)",color:"var(--text-color)"}})}),(0,r.jsx)("div",{className:"p-1 overflow-auto flex-1",children:t})]}):null},n.contextType=Ht,n}(o.Component),Yt=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.handleClick=function(){!n.props.disabled&&n.context.onValueChange&&(n.context.onValueChange(n.props.value),n.context.setOpen(!1))},n}return Gt(n,e),n.prototype.render=function(){var e=this.props,n=e.value,t=e.children,o=e.className,a=e.disabled,s=n===this.context.value;return(0,r.jsxs)("div",{"data-slot":"select-item",className:Dt("focus:bg-accent focus:text-accent-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none hover:bg-accent hover:text-accent-foreground",a&&"pointer-events-none opacity-50",o),onClick:this.handleClick,children:[s&&(0,r.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,r.jsx)(Bt.A,{className:"size-4"})}),t]})},n.contextType=Ht,n}(o.Component),Xt=(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}Gt(n,e),n.prototype.render=function(){return(0,r.jsx)("div",{"data-slot":"select-group",children:this.props.children})}}(o.Component),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}Gt(n,e),n.prototype.render=function(){var e=this.props,n=e.children,t=e.className;return(0,r.jsx)("div",{"data-slot":"select-label",className:Dt("text-muted-foreground px-2 py-1.5 text-xs",t),children:n})}}(o.Component),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}Gt(n,e),n.prototype.render=function(){return(0,r.jsx)("div",{"data-slot":"select-separator",className:Dt("bg-border pointer-events-none -mx-1 my-1 h-px",this.props.className)})}}(o.Component),function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),Jt=function(){return Jt=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},Jt.apply(this,arguments)},Zt=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Xt(n,e),n.prototype.render=function(){var e=this.props,n=e.className,t=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t}(e,["className"]);return(0,r.jsx)("textarea",Jt({"data-slot":"textarea",className:Dt("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n)},t))},n}(o.Component),$t=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),er=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.handleKeyDown=function(e){"Escape"===e.key&&n.props.onOpenChange&&n.props.onOpenChange(!1)},n.isDarkMode=function(){return null!==document.querySelector(".dark")},n}return $t(n,e),n.prototype.render=function(){if(!this.props.open)return null;var e=this.isDarkMode();return(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center ".concat(e?"dark":""),onKeyDown:this.handleKeyDown,children:this.props.children})},n}(a().Component),nr=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.handleBackdropClick=function(e){n.props.onClose&&n.props.onClose()},n.handleContentClick=function(e){e.stopPropagation()},n.isDarkMode=function(){return null!==document.querySelector(".dark")},n}return $t(n,e),n.prototype.render=function(){var e=this.props,n=e.className,t=void 0===n?"":n,o=e.children,a=this.isDarkMode();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:this.handleBackdropClick}),(0,r.jsx)("div",{className:"relative rounded-lg shadow-lg p-6 w-full max-w-3xl ".concat(t),style:{backgroundColor:a?"#111827":"#ffffff",color:a?"#f3f4f6":"#111827"},onClick:this.handleContentClick,children:o})]})},n}(a().Component),tr=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return $t(n,e),n.prototype.render=function(){return(0,r.jsx)("div",{className:"mb-4",children:this.props.children})},n}(a().Component),rr=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.isDarkMode=function(){return null!==document.querySelector(".dark")},n}return $t(n,e),n.prototype.render=function(){var e=this.isDarkMode();return(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2",style:{color:e?"#f3f4f6":"#111827"},children:this.props.children})},n}(a().Component),or=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.isDarkMode=function(){return null!==document.querySelector(".dark")},n}return $t(n,e),n.prototype.render=function(){var e=this.isDarkMode();return(0,r.jsx)("p",{className:"text-sm",style:{color:e?"#9ca3af":"#4b5563"},children:this.props.children})},n}(a().Component),ar=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.isDarkMode=function(){return null!==document.querySelector(".dark")},n}return $t(n,e),n.prototype.render=function(){var e=this.isDarkMode();return(0,r.jsx)("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t",style:{borderColor:e?"#374151":"#e5e7eb"},children:this.props.children})},n}(a().Component),sr=function(e){function n(n){var t=e.call(this,n)||this;return t.getModelKey=function(e){return"".concat(e.provider,"-").concat(e.serverId,"-").concat(e.name)},t.validateQuestions=function(e){var n=e.split("\n").map((function(e){return e.trim()})).filter((function(e){return e.length>0}));return n.length<1?{valid:!1,questions:[],error:"At least 1 question is required"}:n.length>100?{valid:!1,questions:[],error:"Maximum 100 questions allowed"}:{valid:!0,questions:n,error:void 0}},t.handleSubmit=function(){var e=t.props,n=e.availableModels,r=e.availablePersonas,o=e.onSubmit,a=t.state,s=a.selectedModelKey,i=a.selectedPersonaId,l=a.selectedCollectionId,c=a.questions,d=n.find((function(e){return t.getModelKey(e)===s}));if(d)if(l){var u=t.validateQuestions(c);u.valid?o(d,i&&"none"!==i&&r.find((function(e){return e.id===i}))||null,l,u.questions):t.setState({validationErrors:{questions:u.error}})}else t.setState({validationErrors:{questions:"Collection is required"}})},t.handleModelChange=function(e){t.setState({selectedModelKey:e})},t.handlePersonaChange=function(e){t.setState({selectedPersonaId:"none"===e?"":e})},t.handleCollectionChange=function(e){t.setState({selectedCollectionId:e,validationErrors:{}})},t.handleQuestionsChange=function(e){t.setState({questions:e.target.value,validationErrors:{}})},t.handleModelSearchChange=function(e){t.setState({modelSearchQuery:e})},t.getFilteredModels=function(){var e=t.props.availableModels,n=t.state.modelSearchQuery;if(!n.trim())return e;var r=n.toLowerCase();return e.filter((function(e){var n=e.name.toLowerCase(),t=e.serverName.toLowerCase();return n.includes(r)||t.includes(r)}))},t.isDarkMode=function(){return null!==document.querySelector(".dark")},t.state={selectedModelKey:"",selectedPersonaId:"none",selectedCollectionId:"",questions:"",modelSearchQuery:"",validationErrors:{}},t}return $t(n,e),n.prototype.componentDidUpdate=function(e){if(0===e.availableModels.length&&this.props.availableModels.length>0&&!this.state.selectedModelKey){var n=this.props.availableModels[0];this.setState({selectedModelKey:this.getModelKey(n)})}},n.prototype.render=function(){var e,n,t=this,o=this.props,a=o.isOpen,s=o.onClose,i=o.availableModels,l=o.availablePersonas,c=o.collections,d=o.isLoadingModels,u=o.isLoadingPersonas,p=this.state,h=p.selectedModelKey,m=p.selectedPersonaId,g=p.selectedCollectionId,f=p.questions,v=(p.modelSearchQuery,p.validationErrors),b=this.getFilteredModels(),x=h&&g&&f.trim()&&!d,y=this.isDarkMode();return(0,r.jsx)(er,{open:a,onOpenChange:s,children:(0,r.jsxs)(nr,{className:"max-h-[85vh] flex flex-col",onClose:s,children:[(0,r.jsxs)(tr,{children:[(0,r.jsx)(rr,{children:"Run New Evaluation - Test"}),(0,r.jsx)(or,{children:"Select a model, optional persona, collection, and provide custom questions to evaluate."})]}),(0,r.jsxs)("div",{className:"grid gap-4 py-4 overflow-y-auto flex-1",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsxs)("label",{htmlFor:"model-select",className:"text-sm font-medium",style:{color:y?"#f3f4f6":"#111827"},children:["LLM Model ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),d?(0,r.jsx)("div",{className:"text-sm",style:{color:y?"#9ca3af":"#6b7280"},children:"Loading models..."}):(0,r.jsxs)(Vt,{value:h,onValueChange:this.handleModelChange,disabled:0===i.length,children:[(0,r.jsx)(Kt,{className:"w-full",children:(0,r.jsx)(Wt,{placeholder:0===i.length?"No models available":"Select a model",children:h&&(n=i.find((function(e){return t.getModelKey(e)===h})),n?"".concat(n.name," (").concat(n.serverName,")"):h)})}),(0,r.jsx)(Qt,{searchable:i.length>5,searchPlaceholder:"Search models...",onSearchChange:this.handleModelSearchChange,children:0===b.length?(0,r.jsx)("div",{className:"px-2 py-1.5 text-sm text-center",style:{color:y?"#9ca3af":"#6b7280"},children:"No models found"}):b.map((function(e){var n=t.getModelKey(e);return(0,r.jsxs)(Yt,{value:n,children:[e.name," (",e.serverName,")"]},n)}))})]})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsxs)("label",{htmlFor:"persona-select",className:"text-sm font-medium",style:{color:y?"#f3f4f6":"#111827"},children:["Persona"," ",(0,r.jsx)("span",{style:{color:y?"#9ca3af":"#6b7280"},children:"(Optional)"})]}),u?(0,r.jsx)("div",{className:"text-sm",style:{color:y?"#9ca3af":"#6b7280"},children:"Loading personas..."}):(0,r.jsxs)(Vt,{value:m||"none",onValueChange:this.handlePersonaChange,children:[(0,r.jsx)(Kt,{className:"w-full",children:(0,r.jsx)(Wt,{placeholder:"No persona (Default)",children:function(){var e=m||"none";if("none"===e)return"No persona (Default)";var n=l.find((function(n){return n.id===e}));return n?n.name:e}()})}),(0,r.jsxs)(Qt,{children:[(0,r.jsx)(Yt,{value:"none",children:"No persona (Default)"}),l.map((function(e){return(0,r.jsx)(Yt,{value:e.id,children:e.name},e.id)}))]})]})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsxs)("label",{htmlFor:"collection-select",className:"text-sm font-medium",style:{color:y?"#f3f4f6":"#111827"},children:["Collection ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)(Vt,{value:g,onValueChange:this.handleCollectionChange,children:[(0,r.jsx)(Kt,{className:"w-full",children:(0,r.jsx)(Wt,{placeholder:"Select a collection",children:g&&(e=c.find((function(e){return e.id===g})),e?e.name:g)})}),(0,r.jsx)(Qt,{children:c.map((function(e){return(0,r.jsx)(Yt,{value:e.id,children:e.name},e.id)}))})]})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsxs)("label",{htmlFor:"questions-input",className:"text-sm font-medium",style:{color:y?"#f3f4f6":"#111827"},children:["Custom Questions ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})," ",(0,r.jsx)("span",{style:{color:y?"#9ca3af":"#6b7280"},children:"(1-100, one per line)"})]}),(0,r.jsx)(Zt,{id:"questions-input",value:f,onChange:this.handleQuestionsChange,placeholder:"Enter questions, one per line...\\n\\nExample:\\nWhat is BrainDrive?\\nHow do I upload documents?\\nWhat file types are supported?",rows:6,className:"resize-none"}),v.questions&&(0,r.jsx)("p",{className:"text-sm text-red-500",children:v.questions}),f.trim()&&(0,r.jsxs)("p",{className:"text-xs",style:{color:y?"#9ca3af":"#6b7280"},children:[f.split("\n").filter((function(e){return e.trim()})).length," questions"]})]})]}),(0,r.jsxs)("div",{className:"flex items-start gap-3 p-3 rounded-md mt-4",style:{backgroundColor:y?"#1e3a5f":"#eff6ff",border:"1px solid ".concat(y?"#1e40af":"#93c5fd")},children:[(0,r.jsx)(Tt.A,{className:"flex-shrink-0 mt-0.5",size:18,style:{color:y?"#60a5fa":"#3b82f6"}}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)("p",{className:"text-sm",style:{color:y?"#e0e7ff":"#1e3a8a"},children:[(0,r.jsx)("strong",{children:"Note:"})," Keep this page open to complete the evaluation. You can leave and resume later from where you left off."]})})]}),(0,r.jsxs)(ar,{children:[(0,r.jsx)(Ft,{variant:"outline",onClick:s,children:"Cancel"}),(0,r.jsx)(Ft,{onClick:this.handleSubmit,disabled:!x,children:"Start Evaluation"})]})]})})},n}(a().Component),ir=t(7611),lr=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),cr=function(e){function n(n){var t=e.call(this,n)||this;return t.intervalId=null,t.calculateElapsedSeconds=function(){var e=t.props.startTime;if(!e)return 0;var n=new Date(e).getTime(),r=Date.now();return Math.floor((r-n)/1e3)},t.formatTime=function(e){var n=Math.floor(e/3600),t=Math.floor(e%3600/60),r=e%60;return n>0?"".concat(String(n).padStart(2,"0"),":").concat(String(t).padStart(2,"0"),":").concat(String(r).padStart(2,"0")):"".concat(String(t).padStart(2,"0"),":").concat(String(r).padStart(2,"0"))},t.calculateETA=function(){var e=t.props,n=e.processedCount,r=e.totalCount,o=t.state.elapsedSeconds;if(0===n)return"Calculating...";var a=r-n;if(0===a)return"Finishing...";var s=o/n,i=Math.ceil(s*a),l=Math.ceil(i/60);return l<1?"< 1 min":1===l?"~1 min":"~".concat(l," min")},t.isDarkMode=function(){return null!==document.querySelector(".dark")},t.state={elapsedSeconds:t.calculateElapsedSeconds()},t}return lr(n,e),n.prototype.componentDidMount=function(){var e=this;this.intervalId=setInterval((function(){e.setState({elapsedSeconds:e.calculateElapsedSeconds()})}),1e3)},n.prototype.componentWillUnmount=function(){this.intervalId&&clearInterval(this.intervalId)},n.prototype.render=function(){var e=this.props,n=e.processedCount,t=e.totalCount,o=e.accuracy,a=e.onAbort,s=e.currentStage,i=e.stageProgress,l=e.generatedCount,c=this.state.elapsedSeconds,d=this.isDarkMode(),u=t>0?Math.round(n/t*100):0,p=this.calculateETA(),h=function(e,n,t,r){switch(e){case"retrieving_context":return r?"Retrieving context from documents... (".concat(r," questions)"):"Retrieving context from documents...";case"preparing_tests":return"Preparing test cases...";case"generating_answers":return void 0!==n&&void 0!==r?"Generating answers... (".concat(n,"/").concat(r," completed)"):"Generating answers...";case"judging":return void 0!==t&&void 0!==r?"Judging responses... (".concat(t,"/").concat(r," evaluated)"):"Judging responses...";case"completed":return"Evaluation complete!";default:return"Evaluation in progress"}}(s||"retrieving_context",l,n,t),m="retrieving_context"===s||"preparing_tests"===s,g="judging"===s||"completed"===s;return(0,r.jsx)("div",{style:{position:"sticky",top:0,zIndex:50,backgroundColor:d?"#1e40af":"#dbeafe",borderBottom:"2px solid ".concat(d?"#3b82f6":"#2563eb"),padding:"12px 16px",marginBottom:"16px"},children:(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"16px",maxWidth:"1200px",margin:"0 auto"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,r.jsx)(w.A,{className:"animate-spin",size:20,style:{color:d?"#93c5fd":"#1e40af"}}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,r.jsx)("span",{style:{fontSize:"14px",fontWeight:600,color:d?"#e0e7ff":"#1e3a8a"},children:h}),m&&void 0!==i&&(0,r.jsx)("div",{style:{width:"200px",height:"4px",backgroundColor:d?"#1e3a8a":"#e5e7eb",borderRadius:"2px",overflow:"hidden"},children:(0,r.jsx)("div",{style:{width:"".concat(i,"%"),height:"100%",backgroundColor:"#3b82f6",transition:"width 0.3s ease"}})})]})]}),g&&(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"24px",flex:1,flexWrap:"wrap"},children:[(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[(0,r.jsx)("span",{style:{fontSize:"12px",color:d?"#93c5fd":"#1e40af",fontWeight:500},children:"Progress"}),(0,r.jsxs)("span",{style:{fontSize:"14px",fontWeight:600,color:d?"#e0e7ff":"#1e3a8a"},children:[n,"/",t," (",u,"%)"]})]}),n>0&&(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[(0,r.jsx)("span",{style:{fontSize:"12px",color:d?"#93c5fd":"#1e40af",fontWeight:500},children:"Accuracy"}),(0,r.jsxs)("span",{style:{fontSize:"14px",fontWeight:600,color:d?"#e0e7ff":"#1e3a8a"},children:[(100*o).toFixed(1),"%"]})]}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[(0,r.jsx)("span",{style:{fontSize:"12px",color:d?"#93c5fd":"#1e40af",fontWeight:500},children:"Time Elapsed"}),(0,r.jsx)("span",{style:{fontSize:"14px",fontWeight:600,color:d?"#e0e7ff":"#1e3a8a"},children:this.formatTime(c)})]}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[(0,r.jsx)("span",{style:{fontSize:"12px",color:d?"#93c5fd":"#1e40af",fontWeight:500},children:"ETA"}),(0,r.jsx)("span",{style:{fontSize:"14px",fontWeight:600,color:d?"#e0e7ff":"#1e3a8a"},children:p})]})]}),(0,r.jsxs)(Ft,{variant:"outline",size:"sm",onClick:a,style:{backgroundColor:d?"#7f1d1d":"#fee2e2",borderColor:d?"#dc2626":"#ef4444",color:d?"#fee2e2":"#7f1d1d"},children:[(0,r.jsx)(ir.A,{size:16,style:{marginRight:"6px"}}),"Pause"]})]})})},n}(a().Component),dr=t(737),ur=t(2864),pr=function(e){var n=e.activeTab,t=e.onTabChange,o=e.resultsEnabled,a=function(e,n){return"".concat("flex items-center gap-2 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors",n?" eval-tab-active":" eval-tab")};return(0,r.jsx)("div",{className:"mb-6 border-b eval-table-row",children:(0,r.jsxs)("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[(0,r.jsxs)("button",{onClick:function(){return t("runs")},className:a(0,"runs"===n),children:[(0,r.jsx)(dr.A,{className:"h-4 w-4"}),"Evaluation Runs"]}),(0,r.jsxs)("button",{onClick:function(){return t("results")},className:a(0,"results"===n),disabled:!o,style:o?void 0:{cursor:"not-allowed",opacity:.5},children:[(0,r.jsx)(ur.A,{className:"h-4 w-4"}),"Results Details"]})]})})},hr=t(3768),mr=t(180),gr=function(e){var n=e.stats;return n?(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-8",children:[(0,r.jsx)("div",{className:"eval-stats-card overflow-hidden shadow rounded-lg",children:(0,r.jsx)("div",{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(hr.A,{className:"h-6 w-6 text-blue-600"})}),(0,r.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{className:"eval-stats-label text-sm font-medium truncate",children:"Latest Accuracy"}),(0,r.jsxs)("dd",{className:"eval-stats-value text-lg font-medium",children:[n.accuracy.toFixed(1),"%"]})]})})]})})}),(0,r.jsx)("div",{className:"eval-stats-card overflow-hidden shadow rounded-lg",children:(0,r.jsx)("div",{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(sn.A,{className:"h-6 w-6 text-green-600"})}),(0,r.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{className:"eval-stats-label text-sm font-medium truncate",children:"Correct Answers"}),(0,r.jsxs)("dd",{className:"eval-stats-value text-lg font-medium",children:[n.correctCount," / ",n.totalQuestions]})]})})]})})}),(0,r.jsx)("div",{className:"eval-stats-card overflow-hidden shadow rounded-lg",children:(0,r.jsx)("div",{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(mr.A,{className:"h-6 w-6 text-red-600"})}),(0,r.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{className:"eval-stats-label text-sm font-medium truncate",children:"Incorrect Answers"}),(0,r.jsx)("dd",{className:"eval-stats-value text-lg font-medium",children:n.incorrectCount})]})})]})})}),(0,r.jsx)("div",{className:"eval-stats-card overflow-hidden shadow rounded-lg",children:(0,r.jsx)("div",{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(ln.A,{className:"h-6 w-6 text-purple-600"})}),(0,r.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{className:"eval-stats-label text-sm font-medium truncate",children:"Duration"}),(0,r.jsx)("dd",{className:"eval-stats-value text-lg font-medium",children:function(e){if(null===e)return"N/A";if(e<60)return"".concat(e.toFixed(1),"s");var n=Math.floor(e/60),t=e%60;return"".concat(n,"m ").concat(t.toFixed(0),"s")}(n.duration)})]})})]})})})]}):null},fr=t(8637),vr=function(e){var n=e.runs,t=e.onSelectRun,o=e.headerActions,a=function(e){if(null==e||isNaN(e))return"N/A";if(e<60)return"".concat(e.toFixed(1),"s");if(e<3600){var n=Math.floor(e/60),t=Math.floor(e%60);return"".concat(n,"m ").concat(t,"s")}var r=Math.floor(e/3600),o=Math.floor(e%3600/60);return"".concat(r,"h ").concat(o,"m")};return 0===n.length?(0,r.jsxs)("div",{className:"eval-stats-card shadow rounded-lg overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-4 py-5 sm:px-6 border-b border-gray-200 eval-table-row flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg leading-6 font-medium eval-table-cell",children:"Recent Evaluation Runs"}),o]}),(0,r.jsxs)("div",{className:"px-6 py-12 text-center",children:[(0,r.jsx)(fr.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,r.jsx)("h3",{className:"mt-2 text-sm font-medium eval-table-cell",children:"No evaluation runs"}),(0,r.jsx)("p",{className:"mt-1 text-sm eval-table-cell-secondary",children:"Get started by running your first evaluation."})]})]}):(0,r.jsxs)("div",{className:"eval-stats-card shadow rounded-lg overflow-hidden",children:[(0,r.jsxs)("div",{className:"px-4 py-5 sm:px-6 border-b eval-table-row flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg leading-6 font-medium eval-table-cell",children:"Recent Evaluation Runs"}),o]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 eval-table-row",children:[(0,r.jsx)("thead",{className:"eval-result-header",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium eval-table-cell-secondary uppercase tracking-wider",children:"Date"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium eval-table-cell-secondary uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium eval-table-cell-secondary uppercase tracking-wider",children:"Accuracy"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium eval-table-cell-secondary uppercase tracking-wider",children:"Correct / Total"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium eval-table-cell-secondary uppercase tracking-wider",children:"Duration"}),(0,r.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium eval-table-cell-secondary uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"eval-stats-card divide-y eval-table-row",children:n.map((function(e){return(0,r.jsxs)("tr",{className:"eval-table-row cursor-pointer",onClick:function(){return t(e.id)},children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm eval-table-cell",children:(i=e.run_date,new Date(i).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}))}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(o=e.status,s={completed:(0,r.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark-theme:bg-green-900 dark-theme:text-green-200",children:"Completed"}),running:(0,r.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800 dark-theme:bg-yellow-900 dark-theme:text-yellow-200",children:"Running"}),failed:(0,r.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800 dark-theme:bg-red-900 dark-theme:text-red-200",children:"Failed"}),pending:(0,r.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800 dark-theme:bg-gray-700 dark-theme:text-gray-200",children:"Pending"})},s[o]||s.pending)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-16 eval-result-content rounded-full h-2 mr-2",children:(0,r.jsx)("div",{className:"".concat((n=e.accuracy,n>=80?"bg-green-500":n>=60?"bg-yellow-500":"bg-red-500")," h-2 rounded-full"),style:{width:"".concat(e.accuracy,"%")}})}),(0,r.jsxs)("span",{className:"text-sm font-medium eval-table-cell",children:[e.accuracy.toFixed(1),"%"]})]})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm eval-table-cell",children:[(0,r.jsx)("span",{className:"text-green-600 dark-theme:text-green-400 font-medium",children:e.correct_count})," ","/ ",e.total_questions]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm eval-table-cell-secondary",children:a(e.duration_seconds)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,r.jsx)("button",{className:"text-blue-600 hover:text-blue-900 dark-theme:text-blue-400 dark-theme:hover:text-blue-300",onClick:function(n){n.stopPropagation(),t(e.id)},children:"View Details"})})]},e.id);var n,o,s,i}))})]})})]})},br=function(e){var n,t,o=e.run;return(0,r.jsxs)("div",{className:"eval-stats-card shadow rounded-lg overflow-hidden mb-6",children:[(0,r.jsxs)("div",{className:"px-4 py-5 sm:px-6 border-b eval-table-row",children:[(0,r.jsx)("h3",{className:"text-lg leading-6 font-medium eval-table-cell",children:"Evaluation Summary"}),(0,r.jsx)("p",{className:"mt-1 text-sm eval-table-cell-secondary",children:(t=o.run_date,new Date(t).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"}))})]}),(0,r.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,r.jsxs)("dl",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsxs)("div",{className:"eval-result-content rounded-lg p-4",children:[(0,r.jsx)("dt",{className:"text-sm font-medium eval-stats-label",children:"Accuracy"}),(0,r.jsxs)("dd",{className:"mt-1 text-3xl font-semibold ".concat((n=o.accuracy,n>=80?"text-green-600":n>=60?"text-yellow-600":"text-red-600")),children:[o.accuracy.toFixed(1),"%"]})]}),(0,r.jsxs)("div",{className:"eval-result-content rounded-lg p-4",children:[(0,r.jsx)("dt",{className:"text-sm font-medium eval-stats-label",children:"Total Questions"}),(0,r.jsx)("dd",{className:"mt-1 text-3xl font-semibold eval-stats-value",children:o.total_questions})]}),(0,r.jsxs)("div",{className:"eval-result-content rounded-lg p-4",children:[(0,r.jsx)("dt",{className:"text-sm font-medium eval-stats-label",children:"Correct / Incorrect"}),(0,r.jsxs)("dd",{className:"mt-1 text-3xl font-semibold eval-stats-value",children:[(0,r.jsx)("span",{className:"text-green-600 dark-theme:text-green-400",children:o.correct_count})," /"," ",(0,r.jsx)("span",{className:"text-red-600 dark-theme:text-red-400",children:o.incorrect_count})]})]}),(0,r.jsxs)("div",{className:"eval-result-content rounded-lg p-4",children:[(0,r.jsx)("dt",{className:"text-sm font-medium eval-stats-label",children:"Duration"}),(0,r.jsx)("dd",{className:"mt-1 text-3xl font-semibold eval-stats-value",children:function(e){if(null===e)return"N/A";if(e<60)return"".concat(e.toFixed(1),"s");if(e<3600){var n=Math.floor(e/60),t=Math.floor(e%60);return"".concat(n,"m ").concat(t,"s")}var r=Math.floor(e/3600),o=Math.floor(e%3600/60);return"".concat(r,"h ").concat(o,"m")}(o.duration_seconds)})]})]}),o.config_snapshot&&Object.keys(o.config_snapshot).length>0&&(0,r.jsxs)("div",{className:"mt-5 pt-5 border-t eval-table-row",children:[(0,r.jsx)("h4",{className:"text-sm font-medium eval-table-cell mb-2",children:"Configuration"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(o.config_snapshot).map((function(e){var n=e[0],t=e[1];return"persona"===n&&t&&"object"==typeof t&&"name"in t?(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark-theme:bg-blue-900 dark-theme:text-blue-200",children:[n,": ",t.name]},n):(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark-theme:bg-blue-900 dark-theme:text-blue-200",children:[n,": ",String(t)]},n)}))})]})]})]})},xr=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),yr=function(e){function n(n){var t=e.call(this,n)||this;return t.handleToggleContext=function(e){e.stopPropagation(),t.setState((function(e){return{showContext:!e.showContext}}))},t.state={showContext:!1},t}return xr(n,e),n.prototype.render=function(){var e=this.props,n=e.result,t=e.isExpanded,o=e.onToggle,a=this.state.showContext,s=n.judge_correct?"border-green-500":"border-red-500",i=n.judge_correct?"text-green-500":"text-red-500",l=n.judge_correct?"bg-green-100 text-green-800 dark-theme:bg-green-900 dark-theme:text-green-200":"bg-red-100 text-red-800 dark-theme:bg-red-900 dark-theme:text-red-200";return(0,r.jsxs)("div",{className:"eval-result-item border-l-4 ".concat(s),children:[(0,r.jsx)("div",{className:"eval-result-header px-4 py-4 sm:px-6 cursor-pointer",onClick:o,children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[n.judge_correct?(0,r.jsx)(sn.A,{className:"h-5 w-5 ".concat(i," mr-2")}):(0,r.jsx)(mr.A,{className:"h-5 w-5 ".concat(i," mr-2")}),(0,r.jsx)("p",{className:"text-sm font-medium eval-table-cell truncate",children:n.question})]}),(0,r.jsxs)("p",{className:"mt-1 text-xs eval-table-cell-secondary",children:["Test Case: ",n.test_case_id]})]}),(0,r.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,r.jsx)(Ut.A,{className:"h-5 w-5 text-gray-400 transition-transform ".concat(t?"rotate-180":"")})})]})}),t&&(0,r.jsx)("div",{className:"px-4 py-4 sm:px-6 eval-result-content",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium eval-table-cell mb-2",children:"Question"}),(0,r.jsx)("p",{className:"text-sm eval-table-cell",children:n.question})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium eval-table-cell mb-2",children:"LLM Answer"}),(0,r.jsx)("div",{className:"text-sm eval-table-cell eval-stats-card rounded p-3 border eval-table-row",children:n.llm_answer})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium eval-table-cell mb-2",children:"Judge Verdict"}),(0,r.jsx)("div",{className:"flex items-start",children:(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(l),children:n.judge_correct?"Correct":"Incorrect"})}),(0,r.jsx)("p",{className:"mt-2 text-sm eval-table-cell",children:n.judge_reasoning})]}),n.judge_factual_errors&&n.judge_factual_errors.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-red-600 dark-theme:text-red-400 mb-2",children:"Factual Errors"}),(0,r.jsx)("ul",{className:"list-disc list-inside text-sm eval-table-cell space-y-1",children:n.judge_factual_errors.map((function(e,n){return(0,r.jsx)("li",{children:e},n)}))})]}),n.judge_missing_info&&n.judge_missing_info.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-yellow-600 dark-theme:text-yellow-400 mb-2",children:"Missing Information"}),(0,r.jsx)("ul",{className:"list-disc list-inside text-sm eval-table-cell space-y-1",children:n.judge_missing_info.map((function(e,n){return(0,r.jsx)("li",{children:e},n)}))})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("button",{onClick:this.handleToggleContext,className:"text-sm font-medium text-blue-600 dark-theme:text-blue-400 hover:underline flex items-center",children:[(0,r.jsx)(pn.A,{className:"h-4 w-4 mr-1"}),a?"Hide":"View"," Retrieved Context"]}),a&&(0,r.jsx)("div",{className:"mt-2 text-sm eval-table-cell eval-stats-card rounded p-3 border eval-table-row max-h-64 overflow-y-auto",children:(0,r.jsx)("pre",{className:"whitespace-pre-wrap",children:n.retrieved_context})})]}),n.ground_truth&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium eval-table-cell mb-2",children:"Expected Answer (Ground Truth)"}),(0,r.jsx)("p",{className:"text-sm eval-table-cell",children:n.ground_truth})]})]})})]})},n}(a().Component),wr=function(e){var n=e.searchTerm,t=e.correctnessFilter,o=e.onSearchChange,a=e.onFilterChange;return(0,r.jsx)("div",{className:"eval-stats-card shadow rounded-lg p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex flex-row items-center gap-4",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)("input",{type:"text",placeholder:"Search questions...",value:n,onChange:function(e){return o(e.target.value)},className:"w-full rounded-md eval-input shadow-sm focus:border-blue-500 focus:ring-blue-500 px-3 py-2"})}),(0,r.jsx)("div",{children:(0,r.jsxs)("select",{value:t,onChange:function(e){return a(e.target.value)},className:"rounded-md eval-input shadow-sm focus:border-blue-500 focus:ring-blue-500 px-3 py-2",children:[(0,r.jsx)("option",{value:"all",children:"All Results"}),(0,r.jsx)("option",{value:"correct",children:"Correct Only"}),(0,r.jsx)("option",{value:"incorrect",children:"Incorrect Only"})]})})]})})},kr=function(e){var n=e.currentStatus,t=e.onStatusChange,o=e.counts,a=function(e){if("all"===e)return"All Runs".concat(o?" (".concat(o.all,")"):"");var n={pending:"Pending",running:"Running",completed:"Completed",failed:"Failed"}[e],t=null==o?void 0:o[e];return void 0!==t?"".concat(n," (").concat(t,")"):n};return(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("label",{htmlFor:"status-filter",className:"text-sm font-medium eval-table-cell",children:"Status:"}),(0,r.jsxs)("select",{id:"status-filter",value:n,onChange:function(e){return t(e.target.value)},className:"rounded-md eval-input shadow-sm focus:border-blue-500 focus:ring-blue-500 px-3 py-2",children:[(0,r.jsx)("option",{value:"all",children:a("all")}),(0,r.jsx)("option",{value:"pending",children:a("pending")}),(0,r.jsx)("option",{value:"running",children:a("running")}),(0,r.jsx)("option",{value:"completed",children:a("completed")}),(0,r.jsx)("option",{value:"failed",children:a("failed")})]})]})},Sr=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),jr=function(){return jr=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},jr.apply(this,arguments)},Cr=function(e,n,t){if(t||2===arguments.length)for(var r,o=0,a=n.length;o<a;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))},Nr=function(e){function n(n){var t=e.call(this,n)||this;return t.dismissTimer=null,t.handleDismiss=function(){t.setState({isExiting:!0}),setTimeout((function(){t.props.onDismiss(t.props.toast.id)}),300)},t.getIcon=function(){var e={size:20,className:"flex-shrink-0"};switch(t.props.toast.type){case"success":return(0,r.jsx)(sn.A,jr({},e,{style:{color:"#10b981"}}));case"error":return(0,r.jsx)(mr.A,jr({},e,{style:{color:"#ef4444"}}));case"warning":return(0,r.jsx)(k.A,jr({},e,{style:{color:"#f59e0b"}}));default:return(0,r.jsx)(Tt.A,jr({},e,{style:{color:"#3b82f6"}}))}},t.getStyles=function(){var e=t.props.toast.type,n=null!==document.querySelector(".dark"),r={display:"flex",alignItems:"center",gap:"12px",padding:"12px 16px",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",minWidth:"320px",maxWidth:"420px",marginBottom:"8px",transition:"all 0.3s ease-out",opacity:t.state.isExiting?0:1,transform:t.state.isExiting?"translateX(100%)":"translateX(0)"},o={success:{backgroundColor:n?"#064e3b":"#d1fae5",border:"1px solid ".concat(n?"#059669":"#10b981"),color:n?"#d1fae5":"#064e3b"},error:{backgroundColor:n?"#7f1d1d":"#fee2e2",border:"1px solid ".concat(n?"#dc2626":"#ef4444"),color:n?"#fee2e2":"#7f1d1d"},warning:{backgroundColor:n?"#78350f":"#fef3c7",border:"1px solid ".concat(n?"#f59e0b":"#fbbf24"),color:n?"#fef3c7":"#78350f"},info:{backgroundColor:n?"#1e3a8a":"#dbeafe",border:"1px solid ".concat(n?"#3b82f6":"#60a5fa"),color:n?"#dbeafe":"#1e3a8a"}};return jr(jr({},r),o[e])},t.state={isExiting:!1},t}return Sr(n,e),n.prototype.componentDidMount=function(){var e=this,n=this.props.toast.duration||3e3;this.dismissTimer=setTimeout((function(){e.handleDismiss()}),n)},n.prototype.componentWillUnmount=function(){this.dismissTimer&&clearTimeout(this.dismissTimer)},n.prototype.render=function(){var e=this.props.toast.message;return(0,r.jsxs)("div",{style:this.getStyles(),children:[this.getIcon(),(0,r.jsx)("span",{style:{flex:1,fontSize:"14px"},children:e}),(0,r.jsx)("button",{onClick:this.handleDismiss,style:{background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",opacity:.7},onMouseEnter:function(e){return e.currentTarget.style.opacity="1"},onMouseLeave:function(e){return e.currentTarget.style.opacity="0.7"},children:(0,r.jsx)(on.A,{size:16})})]})},n}(a().Component),_r=function(e){function n(n){var t=e.call(this,n)||this;return t.addToast=function(e){var n="toast-".concat(Date.now(),"-").concat(Math.random()),r=jr(jr({},e),{id:n});return t.setState((function(e){return{toasts:Cr(Cr([],e.toasts,!0),[r],!1)}})),n},t.removeToast=function(e){t.setState((function(n){return{toasts:n.toasts.filter((function(n){return n.id!==e}))}}))},t.state={toasts:[]},Or.setInstance(t),t}return Sr(n,e),n.prototype.componentWillUnmount=function(){Or.setInstance(null)},n.prototype.render=function(){var e=this,n=this.state.toasts;return 0===n.length?null:(0,r.jsx)("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:9999,display:"flex",flexDirection:"column",alignItems:"flex-end"},children:n.map((function(n){return(0,r.jsx)(Nr,{toast:n,onDismiss:e.removeToast},n.id)}))})},n}(a().Component),Or=new(function(){function e(){this.instance=null}return e.prototype.setInstance=function(e){this.instance=e},e.prototype.show=function(e,n,t){if(void 0===n&&(n="info"),void 0===t&&(t=3e3),this.instance)return this.instance.addToast({message:e,type:n,duration:t});console.warn("ToastContainer not mounted. Cannot show toast.")},e.prototype.success=function(e,n){return this.show(e,"success",n)},e.prototype.error=function(e,n){return this.show(e,"error",n)},e.prototype.info=function(e,n){return this.show(e,"info",n)},e.prototype.warning=function(e,n){return this.show(e,"warning",n)},e}()),Pr=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),Mr=function(){return Mr=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},Mr.apply(this,arguments)},Ir=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t},Er=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Pr(n,e),n.prototype.render=function(){var e=this.props,n=e.className,t=e.variant,o=void 0===t?"default":t,a=Ir(e,["className","variant"]);return(0,r.jsx)("div",Mr({"data-slot":"alert",role:"alert",className:Dt("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}[o],n)},a))},n}(o.Component),Tr=(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}Pr(n,e),n.prototype.render=function(){var e=this.props,n=e.className,t=Ir(e,["className"]);return(0,r.jsx)("div",Mr({"data-slot":"alert-title",className:Dt("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",n)},t))}}(o.Component),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Pr(n,e),n.prototype.render=function(){var e=this.props,n=e.className,t=Ir(e,["className"]);return(0,r.jsx)("div",Mr({"data-slot":"alert-description",className:Dt("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",n)},t))},n}(o.Component)),Rr=t(7472),Ar={};Ar.styleTagTransform=v(),Ar.setAttributes=h(),Ar.insert=u().bind(null,"head"),Ar.domAPI=c(),Ar.insertStyleElement=g(),i()(Rr.A,Ar),Rr.A&&Rr.A.locals&&Rr.A.locals;var Dr=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),Lr=function(){return Lr=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},Lr.apply(this,arguments)},zr=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}))},Fr=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},Ur={activeRun:null,activeRunId:null,testCases:[],isRunning:!1,isGenerating:!1,progress:0,error:null,currentResults:null,pastRuns:[],selectedHistoryRun:null},Br=function(e){function n(n){var t=e.call(this,n)||this;return t.modelConfigLoader=null,t.personaResolver=null,t.themeChangeListener=null,t.formatTimeAgo=function(e){var n=Date.now()-e,t=Math.floor(n/1e3),r=Math.floor(t/60),o=Math.floor(r/60),a=Math.floor(o/24);return a>0?1===a?"1 day ago":"".concat(a," days ago"):o>0?1===o?"1 hour ago":"".concat(o," hours ago"):r>0?1===r?"1 minute ago":"".concat(r," minutes ago"):"just now"},t.checkForInProgressEvaluation=function(){return zr(t,void 0,void 0,(function(){var e,n,t,r;return Fr(this,(function(o){switch(o.label){case 0:if(!Ct.hasInProgressEvaluation())return[2];if((e=Ct.getRemainingQuestionsCount())<=0)return console.log("Found persisted evaluation with 0 remaining questions, clearing..."),Ct.clearState(),[2];if(!(n=Ct.loadState()))return[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,Xe(n.runId)];case 2:return(t=o.sent()).evaluation_run.is_completed||"completed"===t.evaluation_run.status?(console.log("Backend shows evaluation completed, clearing persisted state"),Ct.clearState(),[2]):(this.setState({hasInProgressEvaluation:!0,remainingQuestionsCount:e,lastUpdatedTimestamp:n.timestamp}),[3,4]);case 3:return r=o.sent(),console.warn("Failed to verify backend status, not showing resume banner:",r),[3,4];case 4:return[2]}}))}))},t.loadModels=function(){return zr(t,void 0,void 0,(function(){var e,n,t;return Fr(this,(function(r){switch(r.label){case 0:if(this.setState({isLoadingModels:!0}),!this.modelConfigLoader)return this.setState({isLoadingModels:!1}),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.modelConfigLoader.loadModels()];case 2:return e=r.sent(),n=this.modelSelector.selectFirst(e.models),this.setState({availableModels:e.models,selectedModel:n,isLoadingModels:!1}),[3,4];case 3:return t=r.sent(),console.error("Error loading models:",t),this.setState({availableModels:[],selectedModel:null,isLoadingModels:!1}),[3,4];case 4:return[2]}}))}))},t.loadPersonas=function(){return zr(t,void 0,void 0,(function(){var e,n;return Fr(this,(function(t){switch(t.label){case 0:if(!this.personaResolver)return this.setState({isLoadingPersonas:!1}),[2];this.setState({isLoadingPersonas:!0}),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.personaResolver.loadPersonas()];case 2:return e=t.sent(),this.setState({availablePersonas:e,isLoadingPersonas:!1}),[3,4];case 3:return n=t.sent(),console.error("Error loading personas:",n),this.setState({availablePersonas:[],isLoadingPersonas:!1}),[3,4];case 4:return[2]}}))}))},t.loadRuns=function(){return zr(t,void 0,void 0,(function(){var e,n;return Fr(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Ye(50)];case 1:return e=t.sent(),this.setState({pastRuns:e.runs||[]}),[3,3];case 2:return n=t.sent(),console.error("Failed to load evaluation runs:",n),this.props.setError("Failed to load evaluation runs"),[3,3];case 3:return[2]}}))}))},t.loadResults=function(e){return zr(t,void 0,void 0,(function(){var n,t;return Fr(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,Xe(e)];case 1:return n=r.sent(),this.setState({selectedRunId:e,detailedResults:n.results||[],selectedHistoryRun:n.evaluation_run,activeTab:"results"}),[3,3];case 2:return t=r.sent(),console.error("Failed to load evaluation results:",t),this.props.setError("Failed to load evaluation results"),[3,3];case 3:return[2]}}))}))},t.handleOpenDialog=function(){t.setState({showDialog:!0})},t.handleCloseDialog=function(){t.setState({showDialog:!1})},t.handleSubmitEvaluation=function(e,n,r,o){return zr(t,void 0,void 0,(function(){return Fr(this,(function(t){switch(t.label){case 0:return this.setState({showDialog:!1}),Or.success("Evaluation started"),[4,this.evaluationService.runEvaluation(e,n,r,o)];case 1:return t.sent(),this.setState({hasInProgressEvaluation:!1}),[4,this.loadRuns()];case 2:return t.sent(),[2]}}))}))},t.handleResumeEvaluation=function(){return zr(t,void 0,void 0,(function(){var e;return Fr(this,(function(n){switch(n.label){case 0:this.setState({hasInProgressEvaluation:!1}),n.label=1;case 1:return n.trys.push([1,4,,5]),[4,this.evaluationService.resumeEvaluation()];case 2:return n.sent(),[4,this.loadRuns()];case 3:return n.sent(),[3,5];case 4:return e=n.sent(),console.error("Failed to resume evaluation:",e),this.props.setError(e instanceof Error?e.message:"Failed to resume evaluation"),[3,5];case 5:return[2]}}))}))},t.handleStartFresh=function(){Ct.clearState(),t.setState({hasInProgressEvaluation:!1,remainingQuestionsCount:0}),t.handleOpenDialog()},t.handleStopEvaluation=function(){t.evaluationService.stopEvaluation(),Or.info("Evaluation paused")},t.handleDismissResumeBanner=function(){t.setState({hasInProgressEvaluation:!1})},t.handleSelectRun=function(e){t.loadResults(e)},t.handleTabChange=function(e){t.setState({activeTab:e})},t.handleSearchChange=function(e){t.setState({searchTerm:e})},t.handleFilterChange=function(e){t.setState({correctnessFilter:e})},t.handleStatusFilterChange=function(e){t.setState({statusFilter:e})},t.toggleResultExpanded=function(e){t.setState((function(n){var t=new Set(n.expandedResultIds);return t.has(e)?t.delete(e):t.add(e),{expandedResultIds:t}}))},t.getFilteredResults=function(){var e=t.state,n=e.detailedResults,r=e.searchTerm,o=e.correctnessFilter;return n.filter((function(e){var n=e.question.toLowerCase().includes(r.toLowerCase())||e.llm_answer.toLowerCase().includes(r.toLowerCase()),t="all"===o||"correct"===o&&e.judge_correct||"incorrect"===o&&!e.judge_correct;return n&&t}))},t.getFilteredRuns=function(){var e=t.state,n=e.pastRuns,r=e.statusFilter;return"all"===r?n:n.filter((function(e){return e.status===r}))},t.getStatusCounts=function(){var e=t.state.pastRuns;return{all:e.length,pending:e.filter((function(e){return"pending"===e.status})).length,running:e.filter((function(e){return"running"===e.status})).length,completed:e.filter((function(e){return"completed"===e.status})).length,failed:e.filter((function(e){return"failed"===e.status})).length}},t.aiService=new Be(n.services.api),n.services.api&&(t.modelConfigLoader=new Tn(n.services.api)),t.modelSelector=new Rn,n.services.api&&(t.personaResolver=new tt({api:n.services.api})),t.state=Lr(Lr({},Ur),{selectedModel:null,availableModels:[],availablePersonas:[],isLoadingModels:!1,isLoadingPersonas:!1,activeTab:"runs",selectedRunId:null,detailedResults:[],searchTerm:"",correctnessFilter:"all",currentTheme:"light",statusFilter:"all",expandedResultIds:new Set,showDialog:!1,hasInProgressEvaluation:!1,remainingQuestionsCount:0,lastUpdatedTimestamp:null}),t.evaluationService=new Et(Ur,{aiService:t.aiService,setError:n.setError},(function(e){return t.setState((function(n){return Lr(Lr({},n),e)}))})),t}return Dr(n,e),n.prototype.componentDidMount=function(){return zr(this,void 0,void 0,(function(){var e,n,t,r,o,a,s,i=this;return Fr(this,(function(l){switch(l.label){case 0:(null===(o=this.props.services)||void 0===o?void 0:o.theme)&&(e=this.props.services.theme.getCurrentTheme(),this.setState({currentTheme:e}),this.themeChangeListener=function(e){i.setState({currentTheme:e})},this.props.services.theme.addThemeChangeListener(this.themeChangeListener)),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,null===(s=null===(a=this.props.services)||void 0===a?void 0:a.api)||void 0===s?void 0:s.get("/api/v1/auth/me")];case 2:return n=l.sent(),(t=n.id)&&this.evaluationService.setUserId(t),[3,4];case 3:return r=l.sent(),console.warn("Could not fetch user ID:",r),[3,4];case 4:return this.loadModels(),this.loadPersonas(),this.loadRuns(),this.checkForInProgressEvaluation(),[2]}}))}))},n.prototype.componentWillUnmount=function(){var e;(null===(e=this.props.services)||void 0===e?void 0:e.theme)&&this.themeChangeListener&&this.props.services.theme.removeThemeChangeListener(this.themeChangeListener)},n.prototype.render=function(){var e,n=this,t=this.state,o=t.availableModels,a=t.availablePersonas,s=t.isLoadingModels,i=t.isLoadingPersonas,l=t.activeTab,c=t.pastRuns,d=t.selectedHistoryRun,u=t.expandedResultIds,p=t.searchTerm,h=t.correctnessFilter,m=t.statusFilter,g=t.showDialog,f=t.hasInProgressEvaluation,v=t.remainingQuestionsCount,b=t.lastUpdatedTimestamp,x=t.isRunning,y=t.activeRun,w=t.currentTheme,S=this.getFilteredResults(),j=this.getFilteredRuns(),C=this.getStatusCounts(),N=c.length>0?c[0]:null;return(0,r.jsx)("div",{className:"evaluation-view ".concat("dark"===w?"dark dark-theme":""),children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[f&&(0,r.jsxs)(Er,{className:"mb-6 border-blue-500 bg-blue-50 dark-theme:bg-blue-950",children:[(0,r.jsx)(k.A,{className:"h-4 w-4 text-blue-600 dark-theme:text-blue-400"}),(0,r.jsxs)(Tr,{className:"ml-2 flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-blue-900 dark-theme:text-blue-100",children:"In-progress evaluation found"}),(0,r.jsxs)("span",{className:"text-blue-700 dark-theme:text-blue-300 ml-2",children:["(",v," questions remaining)"]})]}),b&&(0,r.jsxs)("div",{className:"text-sm text-blue-600 dark-theme:text-blue-400 mt-1",children:["Last updated: ",this.formatTimeAgo(b)]})]}),(0,r.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,r.jsx)(Ft,{onClick:this.handleResumeEvaluation,size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Resume"}),(0,r.jsx)(Ft,{onClick:this.handleStartFresh,variant:"outline",size:"sm",className:"border-blue-600 text-blue-600 hover:bg-blue-100 dark-theme:hover:bg-blue-900",children:"Start Fresh"}),(0,r.jsx)(Ft,{onClick:this.handleDismissResumeBanner,variant:"ghost",size:"sm",className:"text-blue-600 hover:text-blue-700",children:"Dismiss"})]})]})]}),x&&y&&(0,r.jsx)(cr,{processedCount:y.evaluated_count||0,totalCount:y.total_questions||0,accuracy:y.accuracy||0,startTime:y.started_at||(new Date).toISOString(),onAbort:this.handleStopEvaluation,currentStage:this.state.currentStage,stageProgress:this.state.stageProgress,generatedCount:(null===(e=this.evaluationService.processedQuestionIds)||void 0===e?void 0:e.size)||0}),(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold eval-table-cell",children:"Chat with Docs System Evaluation"}),(0,r.jsx)("p",{className:"mt-2 text-sm eval-table-cell-secondary",children:"Test and measure the accuracy of your RAG system"})]}),(0,r.jsxs)("button",{onClick:this.handleOpenDialog,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[(0,r.jsx)(pt.A,{className:"h-4 w-4 mr-2"}),"Run New Evaluation"]})]})}),(0,r.jsx)(pr,{activeTab:l,onTabChange:this.handleTabChange,resultsEnabled:null!==d}),"runs"===l&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(gr,{stats:N?{accuracy:N.accuracy,correctCount:N.correct_count,incorrectCount:N.incorrect_count,totalQuestions:N.total_questions,duration:N.duration_seconds}:null}),(0,r.jsx)(vr,{runs:j,onSelectRun:this.handleSelectRun,headerActions:(0,r.jsx)(kr,{currentStatus:m,onStatusChange:this.handleStatusFilterChange,counts:C})})]}),"results"===l&&d&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(br,{run:d}),(0,r.jsx)(wr,{searchTerm:p,correctnessFilter:h,onSearchChange:this.handleSearchChange,onFilterChange:this.handleFilterChange}),(0,r.jsxs)("div",{className:"eval-stats-card shadow rounded-lg overflow-hidden",children:[(0,r.jsx)("div",{className:"px-4 py-5 sm:px-6 border-b eval-table-row",children:(0,r.jsx)("h3",{className:"text-lg leading-6 font-medium eval-table-cell",children:"Test Results"})}),(0,r.jsx)("div",{className:"divide-y eval-table-row",children:0===S.length?(0,r.jsx)("div",{className:"px-6 py-12 text-center",children:(0,r.jsx)("p",{className:"text-sm eval-table-cell-secondary",children:"No results match your filters"})}):S.map((function(e){return(0,r.jsx)(yr,{result:e,isExpanded:u.has(e.test_case_id),onToggle:function(){return n.toggleResultExpanded(e.test_case_id)}},e.test_case_id)}))})]})]}),(0,r.jsx)(sr,{isOpen:g,onClose:this.handleCloseDialog,onSubmit:this.handleSubmitEvaluation,availableModels:o,availablePersonas:a,collections:this.props.collections,isLoadingModels:s,isLoadingPersonas:i}),(0,r.jsx)(_r,{})]})})},n}(a().Component),Gr=function(){return(0,r.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"stroke-[2]",children:[(0,r.jsx)("path",{d:"M10 4V4C8.13623 4 7.20435 4 6.46927 4.30448C5.48915 4.71046 4.71046 5.48915 4.30448 6.46927C4 7.20435 4 8.13623 4 10V13.6C4 15.8402 4 16.9603 4.43597 17.816C4.81947 18.5686 5.43139 19.1805 6.18404 19.564C7.03968 20 8.15979 20 10.4 20H14C15.8638 20 16.7956 20 17.5307 19.6955C18.5108 19.2895 19.2895 18.5108 19.6955 17.5307C20 16.7956 20 15.8638 20 14V14",stroke:"currentColor",strokeLinecap:"square"}),(0,r.jsx)("path",{d:"M12.4393 14.5607L19.5 7.5C20.3284 6.67157 20.3284 5.32843 19.5 4.5C18.6716 3.67157 17.3284 3.67157 16.5 4.5L9.43934 11.5607C9.15804 11.842 9 12.2235 9 12.6213V15H11.3787C11.7765 15 12.158 14.842 12.4393 14.5607Z",stroke:"currentColor",strokeLinecap:"square"})]})},qr=function(){return(0,r.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:(0,r.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})})},Hr=function(){return(0,r.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:(0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})},Vr=function(){return(0,r.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:(0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})},Kr=function(){return(0,r.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:(0,r.jsx)("path",{d:"M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"})})},Wr=function(){return(0,r.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:(0,r.jsx)("path",{d:"M8 5v14l11-7z"})})},Qr=function(){return(0,r.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:(0,r.jsx)("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})})},Yr=function(){return(0,r.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:(0,r.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"})})},Xr=function(){return(0,r.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:(0,r.jsx)("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})})},Jr=function(){return(0,r.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:(0,r.jsx)("path",{d:"M6 6h12v12H6z"})})},Zr=function(){return(0,r.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:(0,r.jsx)("path",{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"})})},$r=function(e){var n=e.isActive;return(0,r.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",className:n?"text-blue-500":"",children:(0,r.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})})},eo=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),no=function(e){function n(n){var t=e.call(this,n)||this;return t.buttonRef=a().createRef(),t.inputRef=a().createRef(),t.listRef=a().createRef(),t.handleDocumentClick=function(e){if(t.state.isOpen){var n=e.target,r=t.buttonRef.current,o=t.listRef.current;r&&r.contains(n)||o&&o.contains(n)||t.closeMenu()}},t.openMenu=function(){t.props.disabled||t.props.loading||t.state.isOpen||t.setState({isOpen:!0})},t.closeMenu=function(){(t.state.isOpen||""!==t.state.query)&&t.setState({isOpen:!1,query:"",activeIndex:-1},(function(){var e=t.buttonRef.current;e&&e.focus({preventScroll:!0})}))},t.toggleMenu=function(){t.state.isOpen?t.closeMenu():t.openMenu()},t.handleSelect=function(e){e.disabled||(t.props.onSelect(e.value),t.closeMenu())},t.handleButtonKeyDown=function(e){if(!t.props.disabled&&!t.props.loading)return"ArrowDown"===e.key||"ArrowUp"===e.key?(e.preventDefault(),void(t.state.isOpen||t.openMenu())):"Enter"===e.key||" "===e.key?(e.preventDefault(),void t.toggleMenu()):void(1!==e.key.length||e.altKey||e.ctrlKey||e.metaKey||(e.preventDefault(),t.setState((function(n){return{isOpen:!0,query:"".concat(n.isOpen?n.query:"").concat(e.key)}}))))},t.handleInputChange=function(e){t.setState({query:e.target.value})},t.handleInputKeyDown=function(e){if(t.state.isOpen){var n=t.getFilteredOptions(),r=n.length;if("ArrowDown"!==e.key)if("ArrowUp"!==e.key)if("Enter"!==e.key)"Escape"===e.key&&(e.preventDefault(),t.closeMenu());else{e.preventDefault();var o=t.state.activeIndex;o>=0&&o<r&&t.handleSelect(n[o])}else{if(e.preventDefault(),0===r)return;t.setState((function(e){var n=e.activeIndex-1;return{activeIndex:n<0?r-1:n}}))}else{if(e.preventDefault(),0===r)return;t.setState((function(e){var n=e.activeIndex+1;return{activeIndex:n>=r?0:n}}))}}},t.handleOptionMouseEnter=function(e){e!==t.state.activeIndex&&t.setState({activeIndex:e})},t.handleOptionMouseDown=function(e,n){e.preventDefault(),t.handleSelect(n)},t.state={isOpen:!1,query:"",activeIndex:-1},t}return eo(n,e),n.prototype.componentDidMount=function(){document.addEventListener("mousedown",this.handleDocumentClick)},n.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.handleDocumentClick)},n.prototype.componentDidUpdate=function(e,n){!n.isOpen&&this.state.isOpen&&this.focusInput(),n.isOpen===this.state.isOpen&&n.query===this.state.query&&e.options===this.props.options&&e.value===this.props.value||this.syncActiveIndex()},n.prototype.focusInput=function(){var e=this.inputRef.current;e&&(e.focus({preventScroll:!0}),e.select())},n.prototype.getFilteredOptions=function(){var e=this.props.options,n=this.state.query.trim().toLowerCase();return n?e.filter((function(e){return function(e,n,t){if(t||2===arguments.length)for(var r,o=0,a=n.length;o<a;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))}([e.label,e.description],e.keywords||[],!0).filter(Boolean).join(" ").toLowerCase().includes(n)})):e},n.prototype.syncActiveIndex=function(){var e=this;if(this.state.isOpen){var n=this.getFilteredOptions();if(0!==n.length){var t=n.findIndex((function(n){return n.value===e.props.value})),r=t>=0?t:this.state.activeIndex;(r<0||r>=n.length)&&(r=0),r!==this.state.activeIndex&&this.setState({activeIndex:r})}else-1!==this.state.activeIndex&&this.setState({activeIndex:-1})}else-1!==this.state.activeIndex&&this.setState({activeIndex:-1})},n.prototype.render=function(){var e=this,n=this.props,t=n.id,o=n.value,a=n.placeholder,s=n.searchPlaceholder,i=n.noResultsText,l=n.disabled,c=n.loading,d=n.className,u=n.triggerClassName,p=n.menuClassName,h=n.inputClassName,m=n.renderOption,g=n.renderValue,f=this.state,v=f.isOpen,b=f.activeIndex,x=f.query,y=this.getFilteredOptions(),w=this.props.options.find((function(e){return e.value===o}))||null,k="".concat(t,"-listbox"),S=v&&b>=0?"".concat(t,"-option-").concat(b):void 0;return(0,r.jsxs)("div",{className:"searchable-dropdown ".concat(d," ").concat(v?"open":""," ").concat(l||c?"disabled":"").trim(),role:"combobox","aria-haspopup":"listbox","aria-owns":k,"aria-expanded":v,"aria-controls":v?k:void 0,children:[(0,r.jsxs)("button",{ref:this.buttonRef,type:"button",className:"searchable-dropdown-trigger ".concat(u).trim(),"aria-haspopup":"listbox","aria-expanded":v,"aria-controls":v?k:void 0,"aria-disabled":l||c,onClick:this.toggleMenu,onKeyDown:this.handleButtonKeyDown,disabled:l||c,children:[(0,r.jsx)("span",{className:"searchable-dropdown-value",children:c?"Loading...":g?g(w):(null==w?void 0:w.label)||a}),(0,r.jsx)("span",{className:"searchable-dropdown-icon","aria-hidden":"true",children:"â–¾"})]}),v&&(0,r.jsxs)("div",{ref:this.listRef,className:"searchable-dropdown-menu ".concat(p).trim(),children:[(0,r.jsx)("div",{className:"searchable-dropdown-search",children:(0,r.jsx)("input",{ref:this.inputRef,type:"text",className:"searchable-dropdown-input ".concat(h).trim(),placeholder:s,value:x,onChange:this.handleInputChange,onKeyDown:this.handleInputKeyDown,"aria-controls":k,"aria-activedescendant":S})}),(0,r.jsx)("div",{className:"searchable-dropdown-options",role:"listbox",id:k,children:0===y.length?(0,r.jsx)("div",{className:"searchable-dropdown-empty",role:"alert",children:i}):y.map((function(n,a){var s="".concat(t,"-option-").concat(a),i=n.value===o,l=a===b;return(0,r.jsx)("div",{id:s,role:"option","aria-selected":i,"aria-disabled":n.disabled,className:"searchable-dropdown-option ".concat(i?"selected":""," ").concat(l?"active":""," ").concat(n.disabled?"disabled":"").trim(),onMouseDown:function(t){return e.handleOptionMouseDown(t,n)},onMouseEnter:function(){return e.handleOptionMouseEnter(a)},children:m?m(n,{isActive:l,isSelected:i}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"searchable-dropdown-option-label",children:n.label}),n.description&&(0,r.jsx)("span",{className:"searchable-dropdown-option-description",children:n.description})]})},s)}))})]})]})},n.defaultProps={placeholder:"Select...",searchPlaceholder:"Type to search...",noResultsText:"No results found",disabled:!1,loading:!1,className:"",triggerClassName:"",menuClassName:"",inputClassName:""},n}(a().Component);const to=no;var ro=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),oo=function(e,n,t){if(t||2===arguments.length)for(var r,o=0,a=n.length;o<a;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))};!function(e){function n(n){var t=e.call(this,n)||this;return t.menuButtonRef=null,t.menuRef=null,t.handleDocumentClick=function(e){var n,r,o=e.target;t.state.isMenuOpen&&o&&!(null===(n=t.menuRef)||void 0===n?void 0:n.contains(o))&&!(null===(r=t.menuButtonRef)||void 0===r?void 0:r.contains(o))&&t.setState({isMenuOpen:!1})},t.handleModelSelect=function(e){var n=t.props.onModelChange;n&&n(t.emitSelectEvent(e))},t.handlePersonaSelect=function(e){var n=t.props.onPersonaChange;n&&n(t.emitSelectEvent(e))},t.handleConversationSelect=function(e){var n=t.props,r=n.onConversationSelect,o=n.onNewChatClick;if(!e)return o(),void t.setState({isMenuOpen:!1});r(t.emitSelectEvent(e)),t.setState({isMenuOpen:!1})},t.state={isMenuOpen:!1},t}ro(n,e),n.prototype.componentDidMount=function(){document.addEventListener("mousedown",this.handleDocumentClick)},n.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.handleDocumentClick)},n.prototype.emitSelectEvent=function(e){return{target:{value:e},currentTarget:{value:e}}},n.prototype.render=function(){var e=this,n=this.props,t=n.models,o=n.selectedModel,a=n.isLoadingModels,s=(n.onModelChange,n.showModelSelection),i=n.personas,l=n.selectedPersona,c=(n.onPersonaChange,n.showPersonaSelection),d=n.conversations,u=n.selectedConversation,p=(n.onConversationSelect,n.onNewChatClick),h=n.showConversationHistory,m=n.isLoading,g=n.isLoadingHistory,f=t.map((function(e){return{value:"".concat(e.provider,"_").concat(e.serverId,"_").concat(e.name),label:"".concat(e.name," (").concat(e.serverName,")"),keywords:[e.provider,e.serverName,e.name]}})),v=oo([{value:"",label:"No Persona"}],i.map((function(e){return{value:e.id,label:e.name,keywords:[e.description||"",e.name]}})),!0),b=oo([{value:"",label:"Start New Chat"}],d.map((function(e){return{value:e.id,label:e.title||"Untitled",description:e.updated_at||e.created_at?z(e.updated_at||e.created_at):void 0,keywords:[e.title||"",e.id]}})),!0),x=o?"".concat(o.provider,"_").concat(o.serverId,"_").concat(o.name):"",y=(null==l?void 0:l.id)||"",w=(null==u?void 0:u.id)||"";return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"chat-header-redesigned",children:[s&&(0,r.jsxs)("div",{className:"header-model-section",children:[(0,r.jsx)("label",{className:"header-label",children:"Models"}),(0,r.jsx)(to,{id:"model-selection",value:x,options:f,onSelect:this.handleModelSelect,placeholder:0===t.length?"No models available":"Select model",searchPlaceholder:"Search models",noResultsText:"No models found",disabled:0===t.length,loading:a,triggerClassName:"header-select"})]}),c&&(0,r.jsxs)("div",{className:"header-persona-section",children:[(0,r.jsx)("label",{className:"header-label",children:"Persona"}),(0,r.jsx)(to,{id:"persona-selection",value:y,options:v,onSelect:this.handlePersonaSelect,placeholder:"No Persona",searchPlaceholder:"Search personas",noResultsText:"No personas found",disabled:this.props.isLoading||this.props.isLoadingHistory,triggerClassName:"header-select"})]}),h&&(0,r.jsxs)("div",{className:"header-history-section",children:[(0,r.jsx)("label",{className:"header-label",children:"History"}),(0,r.jsx)(to,{id:"conversation-selection",value:w,options:b,onSelect:this.handleConversationSelect,placeholder:"Start New Chat",searchPlaceholder:"Search conversations",noResultsText:"No conversations found",disabled:m||g,loading:g,triggerClassName:"header-select header-select-history",renderOption:function(e,n){var t=n.isSelected;return(0,r.jsxs)("div",{className:"searchable-dropdown-option-content",children:[(0,r.jsxs)("span",{className:"searchable-dropdown-option-label",children:[e.label,t?" (current)":""]}),e.description&&(0,r.jsx)("span",{className:"searchable-dropdown-option-description",children:e.description})]})},renderValue:function(e){return e?e.description?"".concat(e.label," â€¢ ").concat(e.description):e.label:"Start New Chat"}}),(0,r.jsxs)("div",{className:"history-actions-wrapper",style:{position:"relative"},children:[(0,r.jsx)("button",{className:"header-icon-only",ref:function(n){return e.menuButtonRef=n},onClick:function(){return e.setState({isMenuOpen:!e.state.isMenuOpen})},title:"Conversation actions",disabled:!u||m||g,"aria-haspopup":"menu","aria-expanded":this.state.isMenuOpen,children:(0,r.jsx)(qr,{})}),this.state.isMenuOpen&&u&&(0,r.jsxs)("div",{className:"conversation-menu",ref:function(n){return e.menuRef=n},role:"menu",style:{top:"calc(100% + 6px)"},children:[(0,r.jsx)("div",{className:"conversation-menu-item datetime",children:u.updated_at?"Updated ".concat(z(u.updated_at)):"Created ".concat(z(u.created_at))}),(0,r.jsxs)("button",{className:"conversation-menu-item",role:"menuitem",onClick:function(){var n,t;e.setState({isMenuOpen:!1}),null===(t=(n=e.props).onRenameSelectedConversation)||void 0===t||t.call(n,u.id)},children:[(0,r.jsx)(Hr,{}),(0,r.jsx)("span",{children:"Rename"})]}),(0,r.jsxs)("button",{className:"conversation-menu-item danger",role:"menuitem",onClick:function(){var n,t;e.setState({isMenuOpen:!1}),null===(t=(n=e.props).onDeleteSelectedConversation)||void 0===t||t.call(n,u.id)},children:[(0,r.jsx)(Vr,{}),(0,r.jsx)("span",{children:"Delete"})]})]})]})]}),(0,r.jsx)("div",{className:"header-actions-section",children:(0,r.jsx)("button",{className:"header-new-chat-button",onClick:p,disabled:m,title:"Start New Chat",children:(0,r.jsx)(Gr,{})})})]})})}}(a().Component);var ao=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const so=function(e){function n(n){var t=e.call(this,n)||this;t.copyToClipboard=function(){return e=t,n=void 0,o=function(){var e,n=this;return function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,navigator.clipboard.writeText(this.props.children)];case 1:return t.sent(),this.setState({isCopied:!0}),setTimeout((function(){n.setState({isCopied:!1})}),2e3),[3,3];case 2:return e=t.sent(),console.error("Failed to copy code:",e),[3,3];case 3:return[2]}}))},new((r=void 0)||(r=Promise))((function(t,a){function s(e){try{l(o.next(e))}catch(e){a(e)}}function i(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(e){e(n)}))).then(s,i)}l((o=o.apply(e,n||[])).next())}));var e,n,r,o},t.toggleCollapse=function(){console.log("ðŸ”§ EnhancedCodeBlock toggleCollapse called, current state: ".concat(t.state.isCollapsed)),t.setState((function(e){var n=!e.isCollapsed;return console.log("ðŸ”§ EnhancedCodeBlock setting isCollapsed to: ".concat(n)),{isCollapsed:n}}))};var r=n.children.split("\n");return t.contentHash=t.generateContentHash(n.children),t.state={isCollapsed:!1,isCopied:!1},console.log("ðŸ”§ EnhancedCodeBlock created with hash: ".concat(t.contentHash.substring(0,8),", ").concat(r.length," lines, collapsible: ").concat(r.length>3)),t}return ao(n,e),n.prototype.componentDidMount=function(){console.log("ðŸ”§ EnhancedCodeBlock mounted, isCollapsed: ".concat(this.state.isCollapsed))},n.prototype.componentDidUpdate=function(e,n){n.isCollapsed!==this.state.isCollapsed&&console.log("ðŸ”§ EnhancedCodeBlock collapse state changed: ".concat(n.isCollapsed," -> ").concat(this.state.isCollapsed))},n.prototype.generateContentHash=function(e){for(var n=0,t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n&=n;return Math.abs(n).toString(16)},Object.defineProperty(n.prototype,"detectedLanguage",{get:function(){var e,n;return this.props.language||(null===(n=null===(e=this.props.className)||void 0===e?void 0:e.match(/language-(\w+)/))||void 0===n?void 0:n[1])||"text"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lines",{get:function(){return this.props.children.split("\n")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isCollapsible",{get:function(){return this.lines.length>3},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"displayLines",{get:function(){return this.state.isCollapsed?this.lines.slice(0,3):this.lines},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"displayContent",{get:function(){return this.displayLines.join("\n")},enumerable:!1,configurable:!0}),n.prototype.render=function(){this.props.className;var e=this.state,n=e.isCollapsed,t=e.isCopied;return(0,r.jsxs)("div",{className:"enhanced-code-block",children:[(0,r.jsxs)("div",{className:"code-block-header",children:[(0,r.jsxs)("div",{className:"code-block-info",children:[(0,r.jsx)("span",{className:"code-language",children:this.detectedLanguage}),(0,r.jsxs)("span",{className:"code-lines",children:[this.lines.length," line",1!==this.lines.length?"s":""]})]}),(0,r.jsxs)("div",{className:"code-block-actions",children:[this.isCollapsible&&(0,r.jsx)("button",{onClick:this.toggleCollapse,className:"code-action-btn",title:n?"Expand code":"Collapse code",children:(0,r.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n?(0,r.jsx)("polyline",{points:"6,9 12,15 18,9"}):(0,r.jsx)("polyline",{points:"18,15 12,9 6,15"})})}),(0,r.jsx)("button",{onClick:this.copyToClipboard,className:"code-action-btn ".concat(t?"copied":""),title:t?"Copied!":"Copy code",children:(0,r.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:t?(0,r.jsx)("polyline",{points:"20,6 9,17 4,12"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),(0,r.jsx)("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})})]})]}),(0,r.jsxs)("div",{className:"code-block-content ".concat(n?"collapsed":""),children:[(0,r.jsx)(je.A,{language:this.detectedLanguage,style:Ce.A,customStyle:{margin:0,borderRadius:0,fontSize:"0.875rem",lineHeight:1.5,fontFamily:"'Monaco', 'Menlo', 'Ubuntu Mono', monospace"},showLineNumbers:this.lines.length>1,wrapLines:!0,lineNumberStyle:{minWidth:"2.5em",paddingRight:"1em",textAlign:"right",userSelect:"none",color:"#6c757d"},children:this.displayContent}),n&&(0,r.jsx)("button",{className:"code-collapse-indicator",onClick:this.toggleCollapse,title:"Click to expand",children:(0,r.jsxs)("span",{children:["... ",this.lines.length-3," more lines"]})})]})]})},n}(a().Component);var io=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();const lo=function(e){function n(n){var t=e.call(this,n)||this;return t.ellipsisTimer=null,t.toggleExpanded=function(){t.setState((function(e){return{isExpanded:!e.isExpanded}}))},t.startEllipsisLoop=function(){null===t.ellipsisTimer&&(t.ellipsisTimer=window.setInterval((function(){t.setState((function(e){return{ellipsisStage:e.ellipsisStage>=0?(e.ellipsisStage+1)%3:0}}))}),500))},t.stopEllipsisLoop=function(e){null!==t.ellipsisTimer&&(window.clearInterval(t.ellipsisTimer),t.ellipsisTimer=null),e&&-1!==t.state.ellipsisStage&&t.setState({ellipsisStage:-1})},t.state={isExpanded:!1,ellipsisStage:-1},t}return io(n,e),n.prototype.componentDidMount=function(){this.props.isStreaming&&this.setState({ellipsisStage:0},this.startEllipsisLoop)},n.prototype.componentDidUpdate=function(e){!e.isStreaming&&this.props.isStreaming&&this.setState({isExpanded:!1,ellipsisStage:0},this.startEllipsisLoop),e.isStreaming&&!this.props.isStreaming&&this.stopEllipsisLoop(!0)},n.prototype.componentWillUnmount=function(){this.stopEllipsisLoop(!1)},n.prototype.render=function(){var e=this.props,n=e.children,t=e.isStreaming,o=this.state,a=o.isExpanded,s=o.ellipsisStage,i=n.replace(/<\/?think>/g,"").trim(),l=t&&s>=0?" ".concat(".".repeat(s+1)):"",c="Thinking Process".concat(l);return(0,r.jsxs)("div",{className:"thinking-block ".concat(a?"expanded":"collapsed"," ").concat(t?"thinking-streaming":""),children:[(0,r.jsxs)("button",{type:"button",className:"thinking-header",onClick:this.toggleExpanded,"aria-expanded":a,children:[(0,r.jsx)("span",{className:"thinking-title",children:c}),(0,r.jsx)("span",{className:"thinking-toggle","aria-hidden":"true",children:a?"â–¼":"â–¶"})]}),(0,r.jsx)("div",{className:"thinking-panel","aria-hidden":!a,children:a&&(0,r.jsx)("div",{className:"thinking-content",children:i})})]})},n}(a().Component);var co=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),uo=function(){return uo=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},uo.apply(this,arguments)},po=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(t[r[o]]=e[r[o]])}return t};!function(e){function n(n){var t=e.call(this,n)||this;return t.toggleSearchResults=function(e){t.setState((function(n){var t=new Set(n.expandedSearchResults);return t.has(e)?t.delete(e):t.add(e),{expandedSearchResults:t}}))},t.toggleDocumentContext=function(e){t.setState((function(n){var t=new Set(n.expandedDocumentContext);return t.has(e)?t.delete(e):t.add(e),{expandedDocumentContext:t}}))},t.renderSearchResult=function(e,n){return(0,r.jsxs)("div",{className:"search-result-item",children:[(0,r.jsxs)("div",{className:"search-result-header",children:[(0,r.jsxs)("span",{className:"search-result-number",children:[n+1,"."]}),(0,r.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"search-result-title",children:e.title})]}),(0,r.jsx)("div",{className:"search-result-url",children:e.url}),e.content&&(0,r.jsx)("div",{className:"search-result-content",children:e.content})]},n)},t.renderDocumentContext=function(e){var n=e.documentData;if(!n)return null;var o=t.state.expandedDocumentContext.has(e.id),a=n.results;return(0,r.jsx)("div",{className:"message message-ai message-document-context",children:(0,r.jsxs)("div",{className:"message-bubble",children:[(0,r.jsxs)("div",{className:"message-body",children:[(0,r.jsxs)("div",{className:"document-context-header",children:[(0,r.jsxs)("div",{className:"document-context-summary",children:[(0,r.jsx)("span",{className:"document-icon",children:"ðŸ“„"}),(0,r.jsx)("span",{className:"document-filename",children:1===a.length?a[0].filename:"".concat(a.length," documents")}),(0,r.jsx)("span",{className:"document-info",children:1===a.length?"".concat(a[0].file_type.toUpperCase()," â€¢ ").concat(a[0].text_length," chars"):"".concat(a.length," files processed")})]}),(0,r.jsxs)("button",{onClick:function(){return t.toggleDocumentContext(e.id)},className:"document-toggle-btn",title:o?"Hide document content":"Show document content",children:[(0,r.jsx)("span",{className:"document-toggle-text",children:o?"Hide":"Show"}),(0,r.jsx)("span",{className:"document-toggle-icon ".concat(o?"expanded":""),children:o?"â–¼":"â–¶"})]})]}),o&&(0,r.jsx)("div",{className:"document-context-content",children:(0,r.jsx)("div",{className:"document-content",children:n.context})})]}),(0,r.jsx)("div",{className:"message-meta",children:(0,r.jsx)("span",{className:"message-timestamp",children:F(e.timestamp)})})]})},e.id)},t.renderSearchResultsMessage=function(e){var n=e.searchData;if(!n)return null;var o=t.state.expandedSearchResults.has(e.id),a=n.scrapedContent&&n.successfulScrapes&&n.successfulScrapes>0;return(0,r.jsx)("div",{className:"message message-ai message-search-results",children:(0,r.jsxs)("div",{className:"message-bubble",children:[(0,r.jsxs)("div",{className:"message-body",children:[(0,r.jsxs)("div",{className:"search-results-header",children:[(0,r.jsxs)("div",{className:"search-results-summary",children:[(0,r.jsx)("span",{className:"search-icon",children:(0,r.jsx)($r,{})}),(0,r.jsxs)("span",{className:"search-query",children:['"',n.query,'"']}),(0,r.jsxs)("span",{className:"search-count",children:["(",n.totalResults," results)"]}),a&&(0,r.jsxs)("span",{className:"scraping-info",children:["+ ",n.successfulScrapes," pages scraped"]})]}),(0,r.jsxs)("button",{className:"search-toggle-btn",onClick:function(){return t.toggleSearchResults(e.id)},"aria-label":o?"Collapse search results":"Expand search results",children:[(0,r.jsx)("span",{className:"search-toggle-icon",children:o?"â–¼":"â–¶"}),(0,r.jsx)("span",{className:"search-toggle-text",children:o?"Hide sources":"Show sources"})]})]}),o&&(0,r.jsxs)("div",{className:"search-results-content",children:[(0,r.jsx)("div",{className:"search-results-list",children:n.results.map((function(e,n){return t.renderSearchResult(e,n)}))}),a&&(0,r.jsx)("div",{className:"scraping-summary",children:(0,r.jsxs)("div",{className:"scraping-header",children:[(0,r.jsx)("span",{className:"scraping-icon",children:"ðŸ“„"}),(0,r.jsxs)("span",{children:["Detailed content scraped from ",n.successfulScrapes," web page(s)"]})]})})]})]}),(0,r.jsx)("div",{className:"message-meta",children:(0,r.jsx)("span",{className:"message-timestamp",children:F(e.timestamp)})})]})},e.id)},t.renderMessage=function(e){if(e.isSearchResults)return t.renderSearchResultsMessage(e);if(e.isDocumentContext)return t.renderDocumentContext(e);var n=e.sender,o=e.content,a=e.timestamp,s=e.isStreaming,i=e.isEditable,l=e.isEdited,c=e.canRegenerate,d=e.canContinue,u=e.showRawMarkdown,p=o.indexOf("<think>"),h=o,m=null;if(-1!==p){var g=o.slice(0,p),f=o.slice(p+7),v=f.indexOf("</think>");if(-1!==v){m=f.slice(0,v);var b=f.slice(v+8);h="".concat(g).concat(b)}else m=f,h=g;h=h.trim(),null!==m&&(m=m.trim())}var x,y=t.props.editingMessageId===e.id,w=["message","message-".concat(n),s?"message-streaming":"",y?"message-is-editing":"",u?"message-raw":""].filter(Boolean).join(" ");x=y?(0,r.jsxs)("div",{className:"message-edit-container",children:[(0,r.jsx)("textarea",{value:t.props.editingContent,onChange:function(e){return t.props.onEditingContentChange(e.target.value)},className:"message-edit-input",rows:Math.max(1,t.props.editingContent.split("\n").length),autoFocus:!0}),(0,r.jsxs)("div",{className:"message-edit-actions",children:[(0,r.jsx)("button",{onClick:t.props.onSaveEditing,className:"btn btn-primary btn-sm",disabled:!t.props.editingContent.trim(),children:"Save"}),(0,r.jsx)("button",{onClick:t.props.onCancelEditing,className:"btn btn-secondary btn-sm",children:"Cancel"})]})]}):"user"===n?(0,r.jsx)("div",{className:"message-text user-message-text",children:h}):u?(0,r.jsx)("pre",{className:"raw-markdown-content",children:(0,r.jsx)("code",{children:h})}):(0,r.jsx)(xe.oz,{remarkPlugins:[ye.A],components:{a:function(e){e.node;var n=po(e,["node"]);return(0,r.jsx)("a",uo({},n,{target:"_blank",rel:"noopener noreferrer",className:"markdown-link"}))},code:function(n){n.node;var t=n.inline,o=n.className,a=n.children,s=po(n,["node","inline","className","children"]),i=/language-(\w+)/.exec(o||""),l=String(a).replace(/\n$/,"");if(!t&&(l.includes("\n")||o)){var c="".concat(e.id,"-").concat(l.slice(0,50).replace(/\s/g,""),"-").concat(l.length);return(0,r.jsx)(so,{className:o,language:null==i?void 0:i[1],children:l},c)}return(0,r.jsx)("code",uo({className:"markdown-inline-code"},s,{children:l}))},blockquote:function(e){e.node;var n=po(e,["node"]);return(0,r.jsx)("blockquote",uo({className:"markdown-blockquote"},n))},table:function(e){e.node;var n=po(e,["node"]);return(0,r.jsx)("div",{className:"markdown-table-wrapper",children:(0,r.jsx)("table",uo({className:"markdown-table"},n))})},th:function(e){e.node;var n=po(e,["node"]);return(0,r.jsx)("th",uo({className:"markdown-table-header"},n))},td:function(e){e.node;var n=po(e,["node"]);return(0,r.jsx)("td",uo({className:"markdown-table-cell"},n))}},children:h});var k="user"===n&&i&&!y?(0,r.jsx)("button",{onClick:function(){return t.props.onStartEditing(e.id,o)},className:"message-action-btn",title:"Edit message",children:(0,r.jsx)(Hr,{})}):null,S="ai"!==n||s?null:(0,r.jsxs)("div",{className:"ai-message-actions",children:[(0,r.jsx)("button",{onClick:function(){var n,r;return null===(r=(n=t.props).onToggleMarkdown)||void 0===r?void 0:r.call(n,e.id)},className:"message-action-btn",title:u?"Show formatted view":"Show raw markdown",children:(0,r.jsx)(Yr,{})}),c&&(0,r.jsx)("button",{onClick:t.props.onRegenerateResponse,className:"message-action-btn",title:"Regenerate response",children:(0,r.jsx)(Kr,{})}),d&&(0,r.jsx)("button",{onClick:t.props.onContinueGeneration,className:"message-action-btn",title:"Continue generation",children:(0,r.jsx)(Wr,{})})]}),j=Boolean(k||S);return(0,r.jsx)("div",{className:w,"data-message-id":e.id,children:(0,r.jsxs)("div",{className:"message-bubble",children:[(0,r.jsxs)("div",{className:"message-body",children:["ai"===n&&m&&(0,r.jsx)(lo,{isStreaming:s,children:m}),(0,r.jsx)("div",{className:"message-content",children:x}),s&&0===h.length&&(0,r.jsxs)("span",{className:"typing-indicator",role:"status","aria-live":"polite",children:[(0,r.jsx)("span",{className:"typing-dot"}),(0,r.jsx)("span",{className:"typing-dot"}),(0,r.jsx)("span",{className:"typing-dot"})]})]}),(0,r.jsxs)("div",{className:"message-meta",children:[(0,r.jsx)("span",{className:"message-timestamp",children:F(a)}),l&&(0,r.jsx)("span",{className:"message-edited-indicator",children:"Edited"}),j&&(0,r.jsxs)("div",{className:"message-actions",children:[k,S]})]})]})},e.id)},t.renderLoadingIndicator=function(){return(0,r.jsx)("div",{className:"loading-indicator",children:(0,r.jsxs)("div",{className:"loading-dots",children:[(0,r.jsx)("div",{className:"loading-dot"}),(0,r.jsx)("div",{className:"loading-dot"}),(0,r.jsx)("div",{className:"loading-dot"})]})})},t.renderError=function(){return t.props.error?(0,r.jsx)("div",{className:"error-message",children:t.props.error}):null},t.renderEmptyState=function(){return t.props.messages.length>0?null:(0,r.jsxs)("div",{className:"empty-state",children:[(0,r.jsx)("div",{className:"empty-state-icon",children:"ðŸ’¬"}),(0,r.jsx)("div",{className:"empty-state-text",children:"Start a conversation by typing a message below."})]})},t.renderScrollToBottomButton=function(){var e=t.props,n=e.showScrollToBottom,o=e.onScrollToBottom;return n&&o?(0,r.jsx)("button",{type:"button",onClick:o,className:"scroll-to-bottom-button",title:"Scroll to bottom","aria-label":"Scroll to bottom",children:(0,r.jsx)(Qr,{})}):null},t.state={expandedSearchResults:new Set,expandedDocumentContext:new Set},t}co(n,e),n.prototype.render=function(){var e=this,n=this.props,t=n.messages,o=n.isLoadingHistory,a=n.chatHistoryRef;return(0,r.jsxs)("div",{className:"chat-history-container",children:[(0,r.jsxs)("div",{ref:a,className:"chat-history",onScroll:this.props.onScroll,children:[this.renderError(),o&&this.renderLoadingIndicator(),o||0!==t.length?t.map((function(n){return e.renderMessage(n)})):this.renderEmptyState()]}),this.renderScrollToBottomButton()]})}}(a().Component);var ho=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();!function(e){function n(n){var t=e.call(this,n)||this;return t.menuRef=a().createRef(),t.handleClickOutside=function(e){t.menuRef.current&&!t.menuRef.current.contains(e.target)&&t.setState({isMenuOpen:!1})},t.updateMultilineState=function(){var e,n=null===(e=t.props.inputRef)||void 0===e?void 0:e.current;if(n){var r=window.getComputedStyle(n),o=parseFloat(r.lineHeight||"0")||24,a=n.scrollHeight>1.6*o;a!==t.state.isMultiline&&t.setState({isMultiline:a})}},t.handleInputChangeProxy=function(e){t.props.onInputChange(e),requestAnimationFrame(t.updateMultilineState)},t.toggleMenu=function(){t.setState((function(e){return{isMenuOpen:!e.isMenuOpen}}))},t.handleFileUpload=function(){t.props.onFileUpload&&t.props.onFileUpload(),t.setState({isMenuOpen:!1})},t.handleWebSearchToggle=function(){t.props.onToggleWebSearch&&t.props.onToggleWebSearch(),t.setState({isMenuOpen:!1})},t.handlePersonaToggle=function(){t.setState((function(e){var n=!e.showPersonaSelector;return!n&&t.props.onPersonaToggle&&t.props.onPersonaToggle(),console.log("ðŸŽ­ ChatInput: Persona toggle - newShowPersonaSelector: ".concat(n)),{showPersonaSelector:n,isMenuOpen:!1}}))},t.state={isMenuOpen:!1,showPersonaSelector:!1,isMultiline:!1},t}ho(n,e),n.prototype.componentDidMount=function(){var e;document.addEventListener("mousedown",this.handleClickOutside),console.log("ðŸŽ­ ChatInput mounted - showPersonaSelection: ".concat(this.props.showPersonaSelection,", selectedPersona: ").concat((null===(e=this.props.selectedPersona)||void 0===e?void 0:e.name)||"null")),this.updateMultilineState()},n.prototype.componentDidUpdate=function(e){var n,t;e.selectedPersona!==this.props.selectedPersona&&console.log("ðŸŽ­ ChatInput: Persona changed from ".concat((null===(n=e.selectedPersona)||void 0===n?void 0:n.name)||"null"," to ").concat((null===(t=this.props.selectedPersona)||void 0===t?void 0:t.name)||"null")),e.showPersonaSelection!==this.props.showPersonaSelection&&(console.log("ðŸŽ­ ChatInput: showPersonaSelection changed from ".concat(e.showPersonaSelection," to ").concat(this.props.showPersonaSelection)),!this.props.showPersonaSelection&&this.state.showPersonaSelector&&(console.log("ðŸŽ­ ChatInput: Syncing local state - turning off persona selector because personas are globally disabled"),this.setState({showPersonaSelector:!1}))),e.inputText!==this.props.inputText&&this.updateMultilineState()},n.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.handleClickOutside)},n.prototype.render=function(){var e=this,n=this.props,t=n.inputText,o=n.isLoading,a=n.isLoadingHistory,s=n.isStreaming,i=n.selectedModel,l=n.promptQuestion,c=(n.onInputChange,n.onKeyPress),d=n.onSendMessage,u=n.onStopGeneration,p=(n.useWebSearch,n.inputRef),h=n.personas,m=n.selectedPersona,g=n.onPersonaChange,f=n.showPersonaSelection;return(0,r.jsx)("div",{className:"chat-input-container",children:(0,r.jsx)("div",{className:"chat-input-wrapper",children:(0,r.jsx)("div",{className:"input-with-buttons",children:(0,r.jsxs)("div",{className:"chat-input-row ".concat(this.state.isMultiline?"multiline":""),children:[f&&(0,r.jsxs)("select",{value:(null==m?void 0:m.id)||"",onChange:g,className:"persona-selector",disabled:o||a,title:"Select persona",children:[(0,r.jsx)("option",{value:"",children:"No Persona"}),h.map((function(e){return(0,r.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),(0,r.jsx)("textarea",{ref:p,value:t,onChange:this.handleInputChangeProxy,onKeyDown:function(n){c(n),requestAnimationFrame(e.updateMultilineState)},placeholder:l||"Type your message here...",className:"chat-input",disabled:o||a,rows:1}),(0,r.jsx)("button",{onClick:s?u:d,disabled:!t.trim()&&!s||a||!i,className:"input-button send-button ".concat(s?"stop-button":""),title:s?"Stop generation":"Send message",children:s?(0,r.jsx)(Jr,{}):(0,r.jsx)(Xr,{})})]})})})})}}(a().Component);var mo,go=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),fo=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}))},vo=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}};!function(e){function n(n){var t=e.call(this,n)||this;return t.fileInputRef=a().createRef(),t.initDocumentService=function(){return fo(t,void 0,void 0,(function(){var e,n,t;return vo(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),this.props.apiService?(e=new He(this.props.apiService),this.setState({documentService:e}),[4,e.getSupportedFileTypes()]):[3,2];case 1:n=r.sent(),this.setState({supportedTypes:n}),r.label=2;case 2:return[3,4];case 3:return t=r.sent(),console.error("Error initializing document service:",t),[3,4];case 4:return[2]}}))}))},t.handleFileSelect=function(e){return fo(t,void 0,void 0,(function(){var n,t,r,o,a,s,i,l,c,d;return vo(this,(function(u){switch(u.label){case 0:if(!(n=e.target.files)||0===n.length)return[2];if(!this.state.documentService)return this.props.onError("Document service not available"),[2];this.setState({isProcessing:!0}),u.label=1;case 1:u.trys.push([1,9,10,11]),t=Array.from(n),r=[],o=0,a=t,u.label=2;case 2:if(!(o<a.length))return[3,8];s=a[o],u.label=3;case 3:return u.trys.push([3,6,,7]),[4,this.state.documentService.validateFile(s)];case 4:return(i=u.sent()).valid?[4,this.state.documentService.processDocument(s)]:(this.props.onError("File ".concat(s.name,": ").concat(i.error)),[3,7]);case 5:return(l=u.sent()).processing_success?r.push(l):this.props.onError("Failed to process ".concat(s.name,": ").concat(l.error)),[3,7];case 6:return c=u.sent(),this.props.onError("Error processing ".concat(s.name,": ").concat(c instanceof Error?c.message:"Unknown error")),[3,7];case 7:return o++,[3,2];case 8:return r.length>0&&this.props.onDocumentsProcessed(r),[3,11];case 9:return d=u.sent(),this.props.onError("Error processing documents: ".concat(d instanceof Error?d.message:"Unknown error")),[3,11];case 10:return this.setState({isProcessing:!1}),this.fileInputRef.current&&(this.fileInputRef.current.value=""),[7];case 11:return[2]}}))}))},t.handleClick=function(){!t.props.disabled&&t.fileInputRef.current&&t.fileInputRef.current.click()},t.getAcceptedFileTypes=function(){return t.state.supportedTypes?Object.keys(t.state.supportedTypes.supported_types).join(","):""},t.state={isProcessing:!1,supportedTypes:null,documentService:null},t}go(n,e),n.prototype.componentDidMount=function(){this.initDocumentService()},n.prototype.render=function(){var e=this.props,n=e.disabled,t=e.className,o=void 0===t?"":t,a=this.state,s=a.isProcessing,i=a.supportedTypes;return(0,r.jsxs)("div",{className:"file-upload-container ".concat(o),children:[(0,r.jsx)("input",{ref:this.fileInputRef,type:"file",multiple:!0,accept:this.getAcceptedFileTypes(),onChange:this.handleFileSelect,style:{display:"none"},disabled:n||s}),(0,r.jsx)("button",{onClick:this.handleClick,disabled:n||s,className:"file-upload-button",title:"Upload documents (PDF, TXT, CSV, JSON, Excel)",children:s?(0,r.jsxs)("div",{className:"file-upload-loading",children:[(0,r.jsx)("div",{className:"loading-spinner"}),(0,r.jsx)("span",{children:"Processing..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Zr,{}),(0,r.jsx)("span",{children:"Upload Documents"})]})}),i&&(0,r.jsx)("div",{className:"file-upload-info",children:(0,r.jsxs)("small",{children:["Supported: PDF, TXT, CSV, JSON, Excel â€¢ Max: ",i.max_file_size_mb,"MB â€¢ Up to ",i.max_files_per_request," files"]})})]})}}(a().Component),function(e){e.GRID="grid",e.LIST="list"}(mo||(mo={}));var bo=function(){return(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(K.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No collections yet"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Create your first collection to get started"})]})},xo=function(e){var n=e.collections,t=e.onCollectionSelect,o=e.viewMode,a=e.maxHeight,s=void 0===a?"max-h-96":a;return o===mo.GRID?(0,r.jsx)("div",{className:"h-full ".concat(s," overflow-y-auto overflow-x-hidden"),children:(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-1",children:n.map((function(e){return function(e){var n={backgroundColor:e.color};return(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 hover:shadow-md transition-shadow cursor-pointer",onClick:function(){return t(e)},children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full mr-3",style:n,"aria-label":"Collection color indicator"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e.name})]}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:e.description||"No description"}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,r.jsxs)("span",{children:[e.document_count||0," documents"]}),(0,r.jsx)("span",{children:D(e.created_at)})]})]})},e.id)}(e)}))})}):(0,r.jsx)("div",{className:"h-full ".concat(s," overflow-y-auto"),children:(0,r.jsx)("ul",{id:"collections-list",className:"divide-y divide-gray-200",children:n.map((function(e){return function(e){var n={backgroundColor:e.color};return(0,r.jsx)("li",{className:"cursor-pointer hover:bg-gray-50 transition-colors",onClick:function(){return t(e)},children:(0,r.jsxs)("div",{className:"px-4 py-4 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full mr-3",style:n,"aria-label":"Collection color indicator"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e.description||"No description"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-xs text-gray-500",children:D(e.created_at)}),(0,r.jsx)(T.A,{className:"h-4 w-4 text-gray-400"})]})]})},e.id)}(e)}))})})},yo=function(e){var n=e.currentViewMode,t=e.onViewModeChange;return(0,r.jsxs)("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[(0,r.jsx)("button",{onClick:function(){return t(mo.LIST)},className:"flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat(n===mo.LIST?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"),"aria-label":"List view",children:(0,r.jsx)(q.A,{className:"h-4 w-4"})}),(0,r.jsx)("button",{onClick:function(){return t(mo.GRID)},className:"flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat(n===mo.GRID?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"),"aria-label":"Grid view",children:(0,r.jsx)(H.A,{className:"h-4 w-4"})})]})},wo=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),ko=function(){return ko=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},ko.apply(this,arguments)},So=(function(e){function n(n){var t=e.call(this,n)||this;return t.state={showCreateForm:!1,newCollection:{name:"",description:"",color:"#3B82F6"},currentViewMode:mo.LIST},t.handleCreateCollection=t.handleCreateCollection.bind(t),t.handleNameChange=t.handleNameChange.bind(t),t.handleDescriptionChange=t.handleDescriptionChange.bind(t),t.handleColorChange=t.handleColorChange.bind(t),t.handleShowCreateForm=t.handleShowCreateForm.bind(t),t.handleCancelCreateForm=t.handleCancelCreateForm.bind(t),t.handleViewModeChange=t.handleViewModeChange.bind(t),t}wo(n,e),n.prototype.handleCreateCollection=function(){return e=this,n=void 0,r=function(){var e,n,t,r;return function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(o){switch(o.label){case 0:return o.trys.push([0,4,,5]),e=this.state.newCollection,[4,fetch("".concat(O,"/collections/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})];case 1:return(n=o.sent()).ok?[3,3]:[4,n.json()];case 2:throw t=o.sent(),new Error(t.message||"Failed to create collection");case 3:return this.setState({newCollection:{name:"",description:"",color:"#3B82F6"},showCreateForm:!1}),this.props.onCollectionCreate(),[3,5];case 4:return r=o.sent(),this.props.setError(r.message),[3,5];case 5:return[2]}}))},new((t=void 0)||(t=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}));var e,n,t,r},n.prototype.handleNameChange=function(e){this.setState((function(n){return{newCollection:ko(ko({},n.newCollection),{name:e.target.value})}}))},n.prototype.handleDescriptionChange=function(e){this.setState((function(n){return{newCollection:ko(ko({},n.newCollection),{description:e.target.value})}}))},n.prototype.handleColorChange=function(e){this.setState((function(n){return{newCollection:ko(ko({},n.newCollection),{color:e.target.value})}}))},n.prototype.handleShowCreateForm=function(){this.setState({showCreateForm:!0})},n.prototype.handleCancelCreateForm=function(){this.setState({showCreateForm:!1})},n.prototype.handleViewModeChange=function(e){this.setState({currentViewMode:e})},n.prototype.render=function(){var e,n,t=this.props,o=t.collections,a=t.onCollectionSelect,s=this.state,i=s.showCreateForm,l=s.newCollection,c=s.currentViewMode;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("div",{className:"px-4 sm:px-6",children:[(0,r.jsx)("h2",{className:"text-lg leading-6 font-medium text-gray-900",children:"Your Collections"}),(0,r.jsx)("p",{className:"max-w-2xl text-sm text-gray-500",children:"Organize your documents into collections for better management"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(yo,{currentViewMode:c,onViewModeChange:this.handleViewModeChange}),(0,r.jsxs)("button",{onClick:this.handleShowCreateForm,className:"bg-blue-500 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center text-sm",children:[(0,r.jsx)(S.A,{className:"h-4 w-4 mr-2"}),"New Collection"]})]})]}),i&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-6 mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Create New Collection"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,r.jsx)("input",{type:"text",value:l.name,onChange:this.handleNameChange,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter collection name"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,r.jsx)("textarea",{value:l.description,onChange:this.handleDescriptionChange,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Enter collection description"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color"}),(0,r.jsx)("input",{type:"color",value:l.color,onChange:this.handleColorChange,className:"w-20 h-10 border border-gray-300 rounded-lg"})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("button",{onClick:this.handleCreateCollection,disabled:!(null===(e=l.name)||void 0===e?void 0:e.trim())||!(null===(n=l.description)||void 0===n?void 0:n.trim()),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:"Create Collection"}),(0,r.jsx)("button",{onClick:this.handleCancelCreateForm,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})]}),0===o.length?(0,r.jsx)(bo,{}):(0,r.jsx)(xo,{collections:o,onCollectionSelect:a,viewMode:c})]})}}(a().Component),function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}()),jo=(function(e){function n(n){var t=e.call(this,n)||this;return t.state={showDialog:!1,sessionName:"",isCreating:!1},t.buttonRef=a().createRef(),t.popupRef=a().createRef(),t.handleCreateSession=t.handleCreateSession.bind(t),t.handleKeyDown=t.handleKeyDown.bind(t),t.openDialog=t.openDialog.bind(t),t.closeDialog=t.closeDialog.bind(t),t.handleInputChange=t.handleInputChange.bind(t),t.handleClickOutside=t.handleClickOutside.bind(t),t}So(n,e),n.prototype.handleCreateSession=function(){return e=this,n=void 0,r=function(){var e,n,t,r,o,a,s,i,l,c;return function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(d){switch(d.label){case 0:if(e=this.state.sessionName,n=this.props,t=n.collectionId,r=n.onSessionCreated,o=n.onError,!(a=e.trim()))return vn("Please enter a session name","warning"),[2];this.setState({isCreating:!0}),d.label=1;case 1:return d.trys.push([1,4,,5]),[4,fetch("".concat(O,"/chat/sessions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,collection_id:t})})];case 2:if(!(s=d.sent()).ok)throw new Error("Failed to create chat session: ".concat(s.statusText));return[4,s.json()];case 3:return i=d.sent(),console.log("New Session: ",i),vn('Created session "'.concat(a,'"'),"success"),this.setState({sessionName:"",showDialog:!1,isCreating:!1}),r(i),[3,5];case 4:return l=d.sent(),vn(c=l.message||"Failed to create chat session","error"),o(c),this.setState({isCreating:!1}),[3,5];case 5:return[2]}}))},new((t=void 0)||(t=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}));var e,n,t,r},n.prototype.handleKeyDown=function(e){"Enter"!==e.key||this.state.isCreating?"Escape"===e.key&&this.closeDialog():this.handleCreateSession()},n.prototype.handleInputChange=function(e){this.setState({sessionName:e.target.value})},n.prototype.openDialog=function(){this.setState({showDialog:!0})},n.prototype.closeDialog=function(){this.setState({showDialog:!1,sessionName:"",isCreating:!1})},n.prototype.handleClickOutside=function(e){this.popupRef.current&&this.buttonRef.current&&!this.popupRef.current.contains(e.target)&&!this.buttonRef.current.contains(e.target)&&this.closeDialog()},n.prototype.render=function(){var e=this.state,n=e.showDialog,t=e.sessionName,o=e.isCreating,a=this.props,s=a.buttonText,i=void 0===s?"New Session":s,l=a.placeholder,c=void 0===l?"Session name":l;return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{ref:this.buttonRef,onClick:this.openDialog,className:"bg-gray-100 text-gray-700 hover:bg-gray-200 px-4 py-2 rounded-lg font-medium transition-colors flex items-center",disabled:o,children:[(0,r.jsx)(S.A,{className:"h-4 w-4 mr-2"}),i]}),n&&(0,r.jsxs)("div",{ref:this.popupRef,className:"absolute top-full right-0 mt-2 bg-white rounded-lg shadow-lg border border-gray-200 p-4 w-80 z-50",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"Create New Session"}),(0,r.jsx)("button",{onClick:this.closeDialog,disabled:o,className:"text-gray-400 hover:text-gray-600 transition-colors disabled:opacity-50",children:(0,r.jsx)(on.A,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("input",{type:"text",value:t,onChange:this.handleInputChange,placeholder:c,disabled:o,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50 text-sm",onKeyDown:this.handleKeyDown,autoFocus:!0}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:this.handleCreateSession,disabled:!t.trim()||o,className:"flex-1 bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:o?"Creating...":"Create"}),(0,r.jsx)("button",{onClick:this.closeDialog,disabled:o,className:"flex-1 bg-gray-200 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors disabled:opacity-50 text-sm",children:"Cancel"})]})]}),(0,r.jsx)("div",{className:"absolute -top-2 right-4 w-4 h-4 bg-white border-l border-t border-gray-200 transform rotate-45"})]})]})}}(o.Component),t(3540)),Co=t(3160),No=t(8852),_o=t(9492),Oo=function(e){var n=e.onClick,t=e.text,o=e.icon,a=e.isProcessing,s=void 0!==a&&a,i=e.disabled,l=void 0!==i&&i,c=e.processingText,d=l||s;return(0,r.jsxs)("button",{onClick:n,disabled:d,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm transition-all duration-200\n                ".concat(d?"text-gray-400 bg-gray-200 cursor-not-allowed":"text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 cursor-pointer","\n            "),children:[s&&(0,r.jsx)(w.A,{className:"w-4 h-4 mr-2 animate-spin"}),o,(0,r.jsx)("span",{className:"ml-1",children:s&&c?c:t})]})},Po=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),Mo=function(){return Mo=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},Mo.apply(this,arguments)},Io=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}))},Eo=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},To={LLM_PROVIDER:{label:"LLM Provider",description:"Choose your Large Language Model provider",type:"select",options:["ollama"],section:"providers",required:!0,placeholder:"Select LLM provider..."},EMBEDDING_PROVIDER:{label:"Embedding Provider",description:"Choose your embedding model provider",type:"select",options:["ollama"],section:"providers",required:!0,placeholder:"Select embedding provider..."},ENABLE_CONTEXTUAL_RETRIEVAL:{label:"Enable Contextual Retrieval",description:"Uses a separate smaller LLM to generate chunk context for better retrieval",type:"checkbox",section:"retrieval"},OLLAMA_LLM_BASE_URL:{label:"Ollama LLM Base URL",description:"Base URL for your Ollama server (e.g., http://localhost:11434)",type:"url",section:"ollama",placeholder:"http://localhost:11434",dependsOn:{field:"LLM_PROVIDER",value:"ollama"}},OLLAMA_LLM_MODEL:{label:"Ollama LLM Model",description:"The Ollama model to use for chat (e.g., qwen3:8b)",type:"text",section:"ollama",placeholder:"qwen3:8b",dependsOn:{field:"LLM_PROVIDER",value:"ollama"}},OLLAMA_EMBEDDING_BASE_URL:{label:"Ollama Embedding Base URL",description:"Base URL for Ollama embedding service",type:"url",section:"ollama",placeholder:"http://localhost:11434",dependsOn:{field:"EMBEDDING_PROVIDER",value:"ollama"}},OLLAMA_EMBEDDING_MODEL:{label:"Ollama Embedding Model",description:"The Ollama model to use for embeddings (e.g., mxbai-embed-large)",type:"text",section:"ollama",placeholder:"mxbai-embed-large",dependsOn:{field:"EMBEDDING_PROVIDER",value:"ollama"}},OLLAMA_CONTEXTUAL_LLM_BASE_URL:{label:"Contextual LLM Base URL",description:"Base URL for contextual retrieval Ollama service",type:"url",section:"contextual",placeholder:"http://localhost:11434",dependsOn:{field:"ENABLE_CONTEXTUAL_RETRIEVAL",value:!0}},OLLAMA_CONTEXTUAL_LLM_MODEL:{label:"Contextual LLM Model",description:"Smaller model for generating context (e.g., llama3.2:3b)",type:"text",section:"contextual",placeholder:"llama3.2:3b",dependsOn:{field:"ENABLE_CONTEXTUAL_RETRIEVAL",value:!0}},DOCUMENT_PROCESSOR_API_URL:{label:"Document Processor API URL",description:"URL for the Document Processor microservice",type:"url",section:"processor",placeholder:"http://host.docker.internal:8080/documents/",required:!0},DOCUMENT_PROCESSOR_API_KEY:{label:"Document Processor API Key",description:"API key for document processor authentication",type:"password",section:"processor",placeholder:"Enter API key...",required:!0},DOCUMENT_PROCESSOR_TIMEOUT:{label:"Timeout (seconds)",description:"Timeout in seconds for document processing",type:"number",section:"processor",min:30,max:1800,placeholder:"300"},DOCUMENT_PROCESSOR_MAX_RETRIES:{label:"Max Retries",description:"Maximum number of retry attempts for failed requests",type:"number",section:"processor",min:1,max:10,placeholder:"3"},OPENAI_EVALUATION_API_KEY:{label:"OpenAI API Key",description:"Your OpenAI API key for evaluation judge service",type:"password",section:"evaluation",placeholder:"sk-..."},OPENAI_EVALUATION_MODEL:{label:"OpenAI Evaluation Model",description:"The OpenAI model to use as judge for evaluation",type:"text",section:"evaluation",placeholder:"gpt-5-mini"}},Ro={providers:{title:"Provider Settings",icon:"ðŸ¤–"},retrieval:{title:"Contextual Retrieval",icon:"ðŸ§ "},ollama:{title:"Ollama Configuration",icon:"ðŸ¦™"},contextual:{title:"Contextual LLM Settings",icon:"ðŸ”"},processor:{title:"Document Processor",icon:"ðŸ“„"},evaluation:{title:"OpenAI Configuration (Evaluation)",icon:"âœ…"}},Ao=function(e){function n(n){var t=e.call(this,n)||this;return t.validateField=function(e,n){var t=To[e];if(!t)return null;if(t.required&&(!n||"string"==typeof n&&!n.trim()))return"".concat(t.label," is required");if("url"===t.type&&n)try{new URL(n)}catch(e){return"Please enter a valid URL"}if("number"===t.type&&void 0!==n){var r=Number(n);if(isNaN(r))return"Please enter a valid number";if("min"in t&&void 0!==t.min&&r<t.min)return"Minimum value is ".concat(t.min);if("max"in t&&void 0!==t.max&&r>t.max)return"Maximum value is ".concat(t.max)}return null},t.validateAllFields=function(){var e={};return Object.keys(t.state.settings).forEach((function(n){var r=t.validateField(n,t.state.settings[n]);r&&(e[n]=r)})),e},t.shouldShowField=function(e){var n=To[e];if(!(null==n?void 0:n.dependsOn))return!0;var r=n.dependsOn,o=r.field,a=r.value;return t.state.settings[o]===a},t.handleSaveOnly=function(){return Io(t,void 0,void 0,(function(){return Eo(this,(function(e){switch(e.label){case 0:return[4,this.saveSettingsOnly()];case 1:return e.sent(),[2]}}))}))},t.handleSaveAndRestart=function(){return Io(t,void 0,void 0,(function(){var e,n;return Eo(this,(function(t){switch(t.label){case 0:return[4,this.saveSettingsOnly()];case 1:return t.sent()?(e=j.PLUGIN_SLUG,n=j.DEFINITION_ID,[4,this.restartPluginServices(e,n,null)]):[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},t.handleDismissChanges=function(){t.loadSettings(),t.setState({hasUnsavedChanges:!1,error:null,success:null,fieldErrors:{}})},t.handleInputChange=function(e){var n=e.target,r=n.name,o=n.value,a=n.type;t.setState((function(e){var t,s;s="checkbox"===a&&n instanceof HTMLInputElement?n.checked:"number"===a?""===o?0:Number(o):o;var i=Mo({},e.fieldErrors);return delete i[r],{settings:Mo(Mo({},e.settings),(t={},t[r]=s,t)),hasUnsavedChanges:!0,fieldErrors:i}}))},t.renderField=function(e){var n=To[e],o=t.state.settings[e],a=t.state.fieldErrors[e];if(!n||!t.shouldShowField(e))return null;var s,i="mt-1 block w-full rounded-md border shadow-sm px-3 py-2 text-sm transition-colors ccs-input ".concat(a?"border-red-300":"");switch(n.type){case"select":var l=n;s=(0,r.jsxs)("select",{name:e,value:o,onChange:t.handleInputChange,className:i,children:[(0,r.jsx)("option",{value:"",children:l.placeholder||"Select option..."}),l.options.map((function(e){return(0,r.jsx)("option",{value:e,children:e},e)}))]});break;case"checkbox":s=(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{id:e,name:e,type:"checkbox",checked:o,onChange:t.handleInputChange,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("label",{htmlFor:e,className:"text-sm font-medium text-gray-700",children:n.label})]});break;case"password":var c=n;s=(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{name:e,type:t.state.showApiKey?"text":"password",value:o,onChange:t.handleInputChange,className:"".concat(i," pr-10"),placeholder:c.placeholder||""}),(0,r.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 flex items-center pr-3",onClick:function(){return t.setState({showApiKey:!t.state.showApiKey})},children:t.state.showApiKey?(0,r.jsx)(jo.A,{className:"h-4 w-4 text-gray-400"}):(0,r.jsx)(Co.A,{className:"h-4 w-4 text-gray-400"})})]});break;case"number":var d=n;s=(0,r.jsx)("input",{name:e,type:"number",value:o,onChange:t.handleInputChange,className:i,placeholder:d.placeholder||"",min:d.min,max:d.max});break;default:var u=n;s=(0,r.jsx)("input",{name:e,type:"url"===n.type?"url":"text",value:o,onChange:t.handleInputChange,className:i,placeholder:u.placeholder||""})}return"checkbox"===n.type?(0,r.jsxs)("div",{className:"space-y-2",children:[s,(0,r.jsxs)("p",{className:"text-xs ccs-help flex items-start space-x-1",children:[(0,r.jsx)(Tt.A,{className:"h-3 w-3 mt-0.5 flex-shrink-0"}),(0,r.jsx)("span",{children:n.description})]}),a&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:a})]},e):(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium ccs-label",children:[n.label,n.required&&(0,r.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),s,(0,r.jsxs)("p",{className:"text-xs ccs-help flex items-start space-x-1",children:[(0,r.jsx)(Tt.A,{className:"h-3 w-3 mt-0.5 flex-shrink-0"}),(0,r.jsx)("span",{children:n.description})]}),a&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:a})]},e)},t.renderSection=function(e){var n=Ro[e],o=Object.keys(To).filter((function(n){return To[n].section===e})).filter((function(e){return t.shouldShowField(e)}));return 0===o.length?null:(0,r.jsxs)("div",{className:"p-6 ccs-card",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center space-x-2 ccs-card-title",children:[(0,r.jsx)("span",{children:n.icon}),(0,r.jsx)("span",{children:n.title})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:o.map((function(e){return t.renderField(e)}))})]},e)},t.state={settings:j.DEFAULT_VALUE,isLoading:!1,isSaving:!1,isRestarting:!1,error:null,success:null,hasUnsavedChanges:!1,showApiKey:!1,fieldErrors:{},restartStatus:null},t}return Po(n,e),n.prototype.componentDidMount=function(){return Io(this,void 0,void 0,(function(){return Eo(this,(function(e){switch(e.label){case 0:return[4,this.loadSettings()];case 1:return e.sent(),[2]}}))}))},n.prototype.componentWillUnmount=function(){this.settingsUnsubscribe&&this.settingsUnsubscribe()},n.prototype.loadSettings=function(){return Io(this,void 0,void 0,(function(){var e,n,t,r,o,a,s,i,l;return Eo(this,(function(c){switch(c.label){case 0:e=this.props.services,this.setState({isLoading:!0,error:null}),c.label=1;case 1:return c.trys.push([1,7,8,9]),(null===(i=e.api)||void 0===i?void 0:i.get)?(n=new URLSearchParams({definition_id:j.DEFINITION_ID,user_id:"current",scope:"user"}).toString(),t="".concat(O,"/api/v1/settings/instances?").concat(n),[4,e.api.get(t)]):[3,3];case 2:return r=c.sent(),o=null,Array.isArray(r)&&r.length>0?o=r[0].value:r&&"object"==typeof r&&null!==r&&(o=r.value),o&&("string"==typeof o&&(o=JSON.parse(o)),console.log(o),this.setState({settings:Mo(Mo({},j.DEFAULT_VALUE),o)})),[3,6];case 3:return(null===(l=e.settings)||void 0===l?void 0:l.getSetting)?[4,e.settings.getSetting(j.DEFINITION_ID)]:[3,5];case 4:return(a=c.sent())&&this.setState({settings:Mo(Mo({},j.DEFAULT_VALUE),a)}),[3,6];case 5:this.setState({error:"No service available to load settings"}),c.label=6;case 6:return[3,9];case 7:return s=c.sent(),console.error("Failed to load settings:",s),this.setState({error:"Failed to load settings"}),[3,9];case 8:return this.setState({isLoading:!1,hasUnsavedChanges:!1}),[7];case 9:return[2]}}))}))},n.prototype.saveSettingsOnly=function(){return Io(this,void 0,void 0,(function(){var e,n,t,r,o,a,s,i,l,c,d,u=this;return Eo(this,(function(p){switch(p.label){case 0:if(e=this.validateAllFields(),this.setState({fieldErrors:e}),Object.keys(e).length>0)return this.setState({error:"Please fix validation errors before saving"}),[2,!1];this.setState({isSaving:!0,error:null,success:null}),n=this.props.services,p.label=1;case 1:if(p.trys.push([1,11,,12]),!(null===(c=n.api)||void 0===c?void 0:c.put))return[3,7];t=null,p.label=2;case 2:return p.trys.push([2,4,,5]),r=new URLSearchParams({definition_id:j.DEFINITION_ID,user_id:"current",scope:"user"}).toString(),o="".concat(O,"/api/v1/settings/instances?").concat(r),[4,n.api.get(o)];case 3:return a=p.sent(),Array.isArray(a)&&a.length>0?t=a[0].id:a&&"object"==typeof a&&null!==a&&"id"in a&&(t=a.id),[3,5];case 4:return s=p.sent(),console.warn("ComponentGeneralSettings: Could not search for existing instance:",s),[3,5];case 5:return i={definition_id:j.DEFINITION_ID,value:this.state.settings,name:j.NAME,scope:"user",user_id:"current"},t&&(i.id=t),[4,n.api.post("".concat(O,"/api/v1/settings/instances"),i)];case 6:return p.sent(),[3,10];case 7:return(null===(d=n.settings)||void 0===d?void 0:d.setSetting)?[4,n.settings.setSetting(j.DEFINITION_ID,this.state.settings,{userId:"current"})]:[3,9];case 8:return p.sent(),[3,10];case 9:throw new Error("No service available to save settings");case 10:return this.setState({isSaving:!1,success:"Settings saved successfully! The microservice will restart with new configuration.",hasUnsavedChanges:!1,fieldErrors:{}}),setTimeout((function(){return u.setState({success:null})}),5e3),[2,!0];case 11:return l=p.sent(),console.error("Failed to save settings:",l),this.setState({isSaving:!1,error:"Failed to save settings. Check console for details."}),[2,!1];case 12:return[2]}}))}))},n.prototype.restartPluginServices=function(e,n){return Io(this,arguments,void 0,(function(e,n,t){var r,o,a,s,i,l,c=this;return void 0===t&&(t=null),Eo(this,(function(d){switch(d.label){case 0:r=this.props.services,this.setState({isRestarting:!0,error:null,restartStatus:null}),d.label=1;case 1:return d.trys.push([1,4,,5]),(null===(l=r.api)||void 0===l?void 0:l.post)?(o={definition_id:n,user_id:"current"},t&&(o.service_name=t),a="".concat(O,"/api/v1/plugins/").concat(e,"/services/restart"),[4,r.api.post(a,o)]):[3,3];case 2:return s=d.sent(),this.setState({restartStatus:s,error:null,isRestarting:!1,success:(null==s?void 0:s.message)||"Plugin services have been restarted with the new configuration."}),console.log("Restart response:",s),setTimeout((function(){return c.setState({success:null,restartStatus:null})}),5e3),[2,!0];case 3:return[3,5];case 4:return i=d.sent(),console.error("Failed to restart services::",i),this.setState({isRestarting:!1,error:"Failed to restart services:. Check console for details."}),[2,!1];case 5:return[2,!1]}}))}))},n.prototype.renderForm=function(){var e=this,n=this.state,t=n.isSaving,o=n.isRestarting,a=n.error,s=n.success,i=n.hasUnsavedChanges,l=t||o;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"ccs-info p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(Tt.A,{className:"h-5 w-5 text-blue-400 mr-2 flex-shrink-0 mt-0.5"}),(0,r.jsx)("p",{className:"text-sm",children:'These settings configure your document processing microservice. Use "Save & Restart" to apply changes immediately, or "Save Only" to save without restarting the service.'})]})}),Object.keys(Ro).map((function(n){return e.renderSection(n)})),(0,r.jsxs)("div",{className:"flex items-center justify-between pt-6 ccs-divider",children:[(0,r.jsxs)("div",{className:"flex-1",children:[s&&(0,r.jsxs)("div",{className:"flex items-center text-green-600",children:[(0,r.jsx)(No.A,{className:"w-4 h-4 mr-2"}),(0,r.jsx)("span",{className:"text-sm",children:s})]}),a&&(0,r.jsxs)("div",{className:"flex items-center text-red-600",children:[(0,r.jsx)(mr.A,{className:"w-4 h-4 mr-2"}),(0,r.jsx)("span",{className:"text-sm",children:a})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[i&&(0,r.jsx)("span",{className:"text-sm text-orange-600 font-medium",children:"Unsaved changes"}),i&&(0,r.jsx)(Oo,{onClick:this.handleDismissChanges,disabled:l,text:"Dismiss",icon:(0,r.jsx)(on.A,{className:"w-4 h-4 mr-2"})}),(0,r.jsx)(Oo,{onClick:this.handleSaveOnly,text:"Save Only",icon:(0,r.jsx)(No.A,{className:"w-4 h-4"}),isProcessing:t&&!o,disabled:!i}),(0,r.jsx)(Oo,{onClick:this.handleSaveAndRestart,text:"Save & Restart",icon:(0,r.jsx)(_o.A,{className:"w-4 h-4"}),isProcessing:l,processingText:t?"Saving...":"Restarting...",disabled:!i})]})]})]})},n.prototype.render=function(){var e=this.state,n=e.isLoading,t=e.error;return(0,r.jsxs)("div",{className:"max-w-4xl mx-auto p-6 ccs-container",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h1",{className:"text-xl font-bold mb-2",children:"Plugin Service Runtime Settings"}),(0,r.jsx)("p",{className:"ccs-help",children:"Configure your LLM providers, document processing, and retrieval settings"})]}),n?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,r.jsx)(w.A,{className:"h-8 w-8 animate-spin text-blue-600 mb-4"}),(0,r.jsx)("p",{className:"ccs-help",children:"Loading settings..."})]}):t&&!this.state.settings?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,r.jsx)(k.A,{className:"h-8 w-8 text-red-500 mb-4"}),(0,r.jsx)("p",{className:"ccs-help",children:t})]}):this.renderForm()]})},n}(a().Component),Do=function(e){var n=e.error,t=e.onDismiss;return(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-3",children:(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center",children:[(0,r.jsx)(k.A,{className:"h-5 w-5 text-red-500 mr-3 flex-shrink-0"}),(0,r.jsx)("span",{className:"text-red-700 flex-1",children:n}),(0,r.jsx)("button",{onClick:t,className:"ml-auto text-red-500 hover:text-red-700 text-xl leading-none","aria-label":"Dismiss error",children:"Ã—"})]})})},Lo=function(e){var n=e.serviceStatuses,t=e.onClose,o=e.onRefresh;return(0,r.jsx)("div",{className:"absolute right-0 mt-2 w-80 rounded-lg shadow-lg border z-50",style:{backgroundColor:"var(--card-bg)",borderColor:"var(--border-color)"},children:(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("h3",{className:"font-semibold",style:{color:"var(--text-color)"},children:"Service Status"}),(0,r.jsx)("button",{onClick:t,className:"text-xl leading-none",style:{color:"var(--text-muted)"},onMouseEnter:function(e){return e.currentTarget.style.color="var(--text-secondary)"},onMouseLeave:function(e){return e.currentTarget.style.color="var(--text-muted)"},"aria-label":"Close",children:"Ã—"})]}),(0,r.jsx)("div",{className:"space-y-3",children:n.map((function(e,n){return(0,r.jsxs)("div",{className:"flex items-start justify-between pb-3 border-b last:border-b-0",style:{borderColor:"var(--border-color)"},children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium",style:{color:"var(--text-secondary)"},children:e.name.replace(/_/g," ").replace(/\b\w/g,(function(e){return e.toUpperCase()}))}),e.lastChecked&&(0,r.jsxs)("p",{className:"text-xs mt-1",style:{color:"var(--text-muted)"},children:["Last checked: ",e.lastChecked.toLocaleTimeString()]}),e.error&&(0,r.jsx)("p",{className:"text-xs mt-1",style:{color:"var(--error-text)"},children:e.error})]}),(0,r.jsxs)("div",{className:"ml-3",children:["ready"===e.status&&(0,r.jsx)(sn.A,{className:"h-5 w-5 text-green-500"}),"checking"===e.status&&(0,r.jsx)(w.A,{className:"h-5 w-5 text-blue-500 animate-spin"}),("not-ready"===e.status||"error"===e.status)&&(0,r.jsx)(mr.A,{className:"h-5 w-5 text-red-500"})]})]},n)}))}),(0,r.jsx)("button",{onClick:o,className:"w-full mt-3 px-4 py-2 rounded-lg transition-colors text-sm font-medium",style:{backgroundColor:"var(--button-primary-bg)",color:"var(--button-primary-text)"},onMouseEnter:function(e){return e.currentTarget.style.opacity="0.9"},onMouseLeave:function(e){return e.currentTarget.style.opacity="1"},children:"Refresh Status"})]})})},zo=function(e){var n,t,o,a=e.serviceStatuses,s=e.showDetails,i=e.onToggleDetails,l=e.onRefresh;switch(a.every((function(e){return"ready"===e.status}))?"ready":a.every((function(e){return"checking"===e.status}))?"checking":a.some((function(e){return"ready"===e.status}))?"partial":"not-ready"){case"ready":n=(0,r.jsx)(sn.A,{className:"h-5 w-5"}),t="Services Ready",o="text-green-600";break;case"checking":n=(0,r.jsx)(w.A,{className:"h-5 w-5 animate-spin"}),t="Checking Services...",o="text-blue-600";break;case"partial":n=(0,r.jsx)(ln.A,{className:"h-5 w-5"}),t="Services Starting...",o="text-yellow-600";break;case"not-ready":n=(0,r.jsx)(mr.A,{className:"h-5 w-5"}),t="Services Not Ready",o="text-red-600"}return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:i,className:"flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors ".concat(o),title:"Click for details",children:[n,(0,r.jsx)("span",{className:"text-sm font-medium",children:t})]}),s&&(0,r.jsx)(Lo,{serviceStatuses:a,onClose:i,onRefresh:l})]})},Fo=function(e){var n=e.serviceStatuses,t=n.every((function(e){return"ready"===e.status}))?"ready":n.every((function(e){return"checking"===e.status}))?"checking":"not-ready";if("ready"===t||"checking"===t)return null;var o=n.filter((function(e){return"ready"!==e.status}));return(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-3",children:(0,r.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)(ln.A,{className:"h-5 w-5 text-yellow-600 mr-3 mt-0.5 flex-shrink-0"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-yellow-800 mb-1",children:"Plugin Starting Services"}),(0,r.jsxs)("p",{className:"text-sm text-yellow-700",children:["The plugin is installing or starting required services (",o.map((function(e){return e.name})).join(", "),") and might take a few minutes (1 to 15 minutes). Please wait, the plugin will be ready to use when all services are up and running."]})]})]})})})},Uo=function(e){var n=e.areServicesReady,t=e.children;return n?(0,r.jsx)(r.Fragment,{children:t}):(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"opacity-50 pointer-events-none",children:t}),(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-60",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md text-center",children:[(0,r.jsx)(w.A,{className:"h-12 w-12 animate-spin text-blue-500 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Waiting for Services"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Backend services are starting. The plugin will be functional once all services are ready."})]})})]})},Bo=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}))},Go=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},qo=function(){function e(e,n){this.apiService=e,this.baseUrl=n}return e.prototype.get=function(e){return Bo(this,void 0,void 0,(function(){return Go(this,(function(n){return[2,this.request(e,"GET")]}))}))},e.prototype.post=function(e,n){return Bo(this,void 0,void 0,(function(){return Go(this,(function(t){return[2,this.request(e,"POST",n)]}))}))},e.prototype.put=function(e,n){return Bo(this,void 0,void 0,(function(){return Go(this,(function(t){return[2,this.request(e,"PUT",n)]}))}))},e.prototype.delete=function(e){return Bo(this,void 0,void 0,(function(){return Go(this,(function(n){return[2,this.request(e,"DELETE")]}))}))},e.prototype.request=function(e,n,t){return Bo(this,void 0,void 0,(function(){var r,o,a;return Go(this,(function(s){switch(s.label){case 0:if(r="".concat(this.baseUrl).concat(e),!this.apiService)return[3,1];switch(n){case"GET":return[2,this.apiService.get(r)];case"POST":return[2,this.apiService.post(r,t)];case"PUT":return[2,this.apiService.put(r,t)];case"DELETE":return[2,this.apiService.delete(r)]}return[3,3];case 1:return o={method:n,headers:{"Content-Type":"application/json"},body:t?JSON.stringify(t):void 0,signal:"GET"===n?AbortSignal.timeout(1e4):void 0},[4,fetch(r,o)];case 2:if(!(a=s.sent()).ok)throw new Error("HTTP ".concat(n," ").concat(r," failed: ").concat(a.status));return[2,204===a.status?{}:a.json()];case 3:return[2]}}))}))},e}(),Ho=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}))},Vo=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},Ko=function(){function e(e){this.http=e}return e.prototype.findAll=function(){return Ho(this,void 0,void 0,(function(){return Vo(this,(function(e){return[2,this.http.get("/collections/")]}))}))},e.prototype.findById=function(e){return Ho(this,void 0,void 0,(function(){return Vo(this,(function(n){return[2,this.http.get("/collections/".concat(e))]}))}))},e.prototype.create=function(e){return Ho(this,void 0,void 0,(function(){return Vo(this,(function(n){return[2,this.http.post("/collections/",e)]}))}))},e.prototype.update=function(e,n){return Ho(this,void 0,void 0,(function(){return Vo(this,(function(t){return[2,this.http.put("/collections/".concat(e),n)]}))}))},e.prototype.delete=function(e){return Ho(this,void 0,void 0,(function(){return Vo(this,(function(n){return[2,this.http.delete("/collections/".concat(e))]}))}))},e}(),Wo=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}))},Qo=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},Yo=function(){function e(e){this.http=e}return e.prototype.findByCollection=function(e){return Wo(this,void 0,void 0,(function(){return Qo(this,(function(n){return[2,this.http.get("/documents/?collection_id=".concat(e))]}))}))},e.prototype.findById=function(e){return Wo(this,void 0,void 0,(function(){return Qo(this,(function(n){return[2,this.http.get("/documents/".concat(e))]}))}))},e.prototype.create=function(e){return Wo(this,void 0,void 0,(function(){return Qo(this,(function(n){return[2,this.http.post("/documents/",e)]}))}))},e.prototype.update=function(e,n){return Wo(this,void 0,void 0,(function(){return Qo(this,(function(t){return[2,this.http.put("/documents/".concat(e),n)]}))}))},e.prototype.delete=function(e){return Wo(this,void 0,void 0,(function(){return Qo(this,(function(n){return[2,this.http.delete("/documents/".concat(e))]}))}))},e}(),Xo=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}))},Jo=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},Zo=function(){function e(e){this.http=e}return e.prototype.findAll=function(){return Xo(this,void 0,void 0,(function(){return Jo(this,(function(e){return[2,this.http.get("/chat/sessions")]}))}))},e.prototype.findById=function(e){return Xo(this,void 0,void 0,(function(){return Jo(this,(function(n){return[2,this.http.get("/chat/sessions/".concat(e))]}))}))},e.prototype.findMessages=function(e){return Xo(this,void 0,void 0,(function(){return Jo(this,(function(n){return[2,this.http.get("/chat/messages?session_id=".concat(e))]}))}))},e.prototype.createSession=function(e){return Xo(this,void 0,void 0,(function(){return Jo(this,(function(n){return[2,this.http.post("/chat/sessions",e)]}))}))},e.prototype.createMessage=function(e){return Xo(this,void 0,void 0,(function(){return Jo(this,(function(n){return[2,this.http.post("/chat/messages",e)]}))}))},e.prototype.deleteSession=function(e){return Xo(this,void 0,void 0,(function(){return Jo(this,(function(n){return[2,this.http.delete("/chat/sessions/".concat(e))]}))}))},e}(),$o=function(){function e(e){this.http=e}return e.prototype.search=function(e){return n=this,t=void 0,o=function(){return function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(n){return[2,this.http.post("/search/",e)]}))},new((r=void 0)||(r=Promise))((function(e,a){function s(e){try{l(o.next(e))}catch(e){a(e)}}function i(e){try{l(o.throw(e))}catch(e){a(e)}}function l(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,i)}l((o=o.apply(n,t||[])).next())}));var n,t,r,o},e}(),ea=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}))},na=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},ta=function(){function e(e,n){var t=this;this.getCollections=function(){return t.collectionRepo.findAll()},this.getDocuments=function(e){return ea(t,void 0,void 0,(function(){return na(this,(function(n){return[2,this.documentRepo.findByCollection(e)]}))}))},this.getChatSessions=function(){return ea(t,void 0,void 0,(function(){return na(this,(function(e){return[2,this.chatSessionRepo.findAll()]}))}))},this.getChatMessages=function(e){return ea(t,void 0,void 0,(function(){return na(this,(function(n){return[2,this.chatSessionRepo.findMessages(e)]}))}))},this.getRelevantContent=function(e,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];return ea(t,function(e,n,t){if(t||2===arguments.length)for(var r,o=0,a=n.length;o<a;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))}([e,n],r,!0),void 0,(function(e,n,t){var r;return void 0===t&&(t=[]),na(this,(function(o){return r={query_text:e,collection_id:n,chat_history:t,config:{use_chat_history:!0,max_history_turns:3,top_k:7,use_hybrid:!0,alpha:.5,use_intent_classification:!0,query_transformation:{enabled:!0,methods:[]},filters:{min_similarity:.8}}},[2,this.ragRepo.search(r)]}))}))};var r=new qo(e,n);this.collectionRepo=new Ko(r),this.documentRepo=new Yo(r),this.chatSessionRepo=new Zo(r),this.ragRepo=new $o(r)}return e.prototype.getCollectionRepository=function(){return this.collectionRepo},e.prototype.getDocumentRepository=function(){return this.documentRepo},e.prototype.getChatSessionRepository=function(){return this.chatSessionRepo},e.prototype.getRAGRepository=function(){return this.ragRepo},e}(),ra=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}))},oa=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},aa=function(e){var n=this;this.checkSingleService=function(e){return ra(n,void 0,void 0,(function(){var n,t;return oa(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,fetch(e.healthcheck_url,{method:"GET",signal:AbortSignal.timeout(5e3)})];case 1:return(n=r.sent()).ok?[2,{name:e.name,status:"ready",lastChecked:new Date}]:[2,{name:e.name,status:"not-ready",lastChecked:new Date,error:"HTTP ".concat(n.status)}];case 2:return t=r.sent(),[2,{name:e.name,status:"error",lastChecked:new Date,error:t.message||"Connection failed"}];case 3:return[2]}}))}))},this.checkAllServices=function(){return ra(n,void 0,void 0,(function(){var e=this;return oa(this,(function(n){return[2,Promise.all(this.requiredRuntimes.map((function(n){return e.checkSingleService(n)})))]}))}))},this.requiredRuntimes=e},sa=function(){return sa=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},sa.apply(this,arguments)},ia=function(e,n,t,r){return new(t||(t=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}))},la=function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},ca=function(){function e(e,n,t,r){var o=this;this.themeChangeListener=null,this.pageContextUnsubscribe=null,this.dataRefreshInterval=null,this.serviceCheckInterval=null,this.isMounted=!1,this.updateState=function(e){o.state=sa(sa({},o.state),e),o.isMounted&&o.updateComponentState(e)},this.initializePlugin=function(){return ia(o,void 0,void 0,(function(){var e;return la(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.setupExternalListeners(),[4,this.checkAllServices()];case 1:return n.sent(),this.setupPeriodicHealthCheck(),this.setupDataRefreshIfServicesReady(),this.updateState({isInitializing:!1}),[3,3];case 2:return e=n.sent(),console.error("PluginService: Failed to initialize:",e),this.updateState({error:"Failed to initialize plugin",isInitializing:!1}),[3,3];case 3:return[2]}}))}))},this.cleanup=function(){o.isMounted=!1,o.cleanupExternalListeners(),o.cleanupIntervals()},this.handleComponentUpdate=function(e){var n,t,r=o.state,a=r.selectedCollection,s=r.selectedChatSession,i=r.serviceStatuses,l=o.areServicesReady(e.serviceStatuses),c=o.areServicesReady(i);c&&(a&&(null===(n=e.selectedCollection)||void 0===n?void 0:n.id)!==a.id&&(o.loadDocuments(a.id),o.loadChatSessions()),s&&(null===(t=e.selectedChatSession)||void 0===t?void 0:t.id)!==s.id&&o.loadChatMessages(s.id)),!l&&c&&(o.loadInitialData(),o.setupDataRefreshIfServicesReady())},this.areServicesReady=function(e){return(e||o.state.serviceStatuses).every((function(e){return"ready"===e.status}))},this.setupExternalListeners=function(){o.services.theme&&(o.updateState({currentTheme:o.services.theme.getCurrentTheme()}),o.themeChangeListener=function(e){return o.updateState({currentTheme:e})},o.services.theme.addThemeChangeListener(o.themeChangeListener)),o.services.pageContext&&(o.pageContextUnsubscribe=o.services.pageContext.onPageContextChange((function(e){console.log("PluginService: Page context changed:",e)})))},this.cleanupExternalListeners=function(){o.services.theme&&o.themeChangeListener&&o.services.theme.removeThemeChangeListener(o.themeChangeListener),o.pageContextUnsubscribe&&o.pageContextUnsubscribe()},this.cleanupIntervals=function(){o.dataRefreshInterval&&clearInterval(o.dataRefreshInterval),o.serviceCheckInterval&&clearInterval(o.serviceCheckInterval)},this.checkAllServices=function(){return ia(o,void 0,void 0,(function(){var e;return la(this,(function(n){switch(n.label){case 0:return[4,this.healthCheckService.checkAllServices()];case 1:return e=n.sent(),this.updateState({serviceStatuses:e}),[2]}}))}))},this.setupPeriodicHealthCheck=function(){o.serviceCheckInterval=setInterval((function(){return o.checkAllServices()}),3e4)},this.loadInitialData=function(){return ia(o,void 0,void 0,(function(){var e;return la(this,(function(n){switch(n.label){case 0:if(!this.areServicesReady())return[2];this.updateState({loading:!0,error:null}),n.label=1;case 1:return n.trys.push([1,3,4,5]),console.log("Loading collections....."),[4,this.loadCollections()];case 2:return n.sent(),[3,5];case 3:return e=n.sent(),console.error("PluginService: Failed to load initial data:",e),this.updateState({error:"Failed to load initial data"}),[3,5];case 4:return this.updateState({loading:!1}),[7];case 5:return[2]}}))}))},this.loadCollections=function(){return ia(o,void 0,void 0,(function(){var e,n;return la(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.dataRepository.getCollections()];case 1:return e=t.sent(),console.log("loaded collections: ",e),this.updateState({collections:e,error:null}),[3,3];case 2:return n=t.sent(),this.updateState({error:"Failed to load collections: ".concat(n.message)}),[3,3];case 3:return[2]}}))}))},this.loadDocuments=function(e){return ia(o,void 0,void 0,(function(){var n,t;return la(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.dataRepository.getDocuments(e)];case 1:return n=r.sent(),this.updateState({documents:n,error:null}),[3,3];case 2:return t=r.sent(),this.updateState({error:"Failed to load documents: ".concat(t.message)}),[3,3];case 3:return[2]}}))}))},this.loadChatSessions=function(){return ia(o,void 0,void 0,(function(){var e,n,t,r=this;return la(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.dataRepository.getChatSessions()];case 1:return e=o.sent(),n=e.filter((function(e){var n;return e.collection_id===(null===(n=r.state.selectedCollection)||void 0===n?void 0:n.id)})),this.updateState({chatSessions:n,error:null}),[3,3];case 2:return t=o.sent(),this.updateState({error:"Failed to load chat sessions: ".concat(t.message)}),[3,3];case 3:return[2]}}))}))},this.loadChatMessages=function(e){return ia(o,void 0,void 0,(function(){var n,t;return la(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.dataRepository.getChatMessages(e)];case 1:return n=r.sent(),this.updateState({chatMessages:n,error:null}),[3,3];case 2:return t=r.sent(),this.updateState({error:"Failed to load messages: ".concat(t.message)}),[3,3];case 3:return[2]}}))}))},this.setupDataRefreshIfServicesReady=function(){var e;o.cleanupIntervals();var n=null===(e=o.config)||void 0===e?void 0:e.refreshInterval;n&&n>0&&o.areServicesReady()?o.dataRefreshInterval=setInterval(o.refreshData.bind(o),1e3*n):o.areServicesReady()&&o.loadInitialData()},this.refreshData=function(){return ia(o,void 0,void 0,(function(){var e;return la(this,(function(n){switch(n.label){case 0:if(!this.areServicesReady()||this.state.loading)return[2];n.label=1;case 1:return n.trys.push([1,6,,7]),[4,this.loadCollections()];case 2:return n.sent(),this.state.selectedCollection?[4,this.loadDocuments(this.state.selectedCollection.id)]:[3,5];case 3:return n.sent(),[4,this.loadChatSessions()];case 4:n.sent(),n.label=5;case 5:return[3,7];case 6:return e=n.sent(),console.error("PluginService: Failed to refresh data silently:",e),[3,7];case 7:return[2]}}))}))},this.handleViewChange=function(e){console.log("handleViewChange: ",e),o.updateState({currentView:e,error:null})},this.handleCollectionSelect=function(e){o.updateState({selectedCollection:e,selectedChatSession:null,chatMessages:[],currentView:nn.CHAT})},this.handleChatSessionSelect=function(e){return ia(o,void 0,void 0,(function(){return la(this,(function(n){return e&&this.updateState({selectedChatSession:e}),[2]}))}))},this.handleBack=function(){var e=o.state.currentView,n={};e===nn.CHAT?n={currentView:nn.COLLECTIONS,selectedChatSession:null,chatMessages:[]}:e===nn.DOCUMENTS?n={currentView:nn.COLLECTIONS,selectedCollection:null,documents:[],chatSessions:[]}:(e===nn.SETTINGS||e===nn.EVALUATION)&&(n={currentView:nn.COLLECTIONS}),o.updateState(n)},this.setError=function(e){o.updateState({error:e})},this.toggleServiceDetails=function(){o.updateState({showServiceDetails:!o.state.showServiceDetails})},this.getCurrentState=function(){return o.state},this.getDataRepository=function(){return o.dataRepository},this.state=e,this.updateComponentState=r,this.services=n,this.config=t,this.apiBaseUrl=(null==t?void 0:t.apiBaseUrl)||_,this.dataRepository=new ta(n.api,this.apiBaseUrl),this.healthCheckService=new aa(N)}return e.prototype.setMounted=function(e){this.isMounted=e,e&&this.areServicesReady()&&(this.loadInitialData(),this.setupDataRefreshIfServicesReady())},e}(),da=t(232),ua=t(3414),pa=t(964),ha=function(e){var n=e.pluginService,t=e.currentView,o=e.serviceStatuses,a=e.showServiceDetails,s=e.areServicesReady,i=e.collectionName,l=function(e){return n.handleViewChange(e)};return(0,r.jsx)("div",{className:"plugin-header-bg shadow-sm border-b",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[t!==nn.COLLECTIONS&&(0,r.jsxs)("button",{onClick:function(){return n.handleBack()},className:"flex items-center plugin-header-button",disabled:!s,children:[(0,r.jsx)(da.A,{className:"h-5 w-5 mr-2"}),"Back"]}),(0,r.jsxs)("h1",{className:"text-base font-medium plugin-header-title mb-0",children:[t===nn.COLLECTIONS&&"Collections",t===nn.DOCUMENTS&&"Documents - ".concat(i),t===nn.CHAT&&"Chat with ".concat(i," collection"),t===nn.SETTINGS&&"Plugin Settings",t===nn.EVALUATION&&"Chat with Docs System Evaluation"]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(zo,{serviceStatuses:o,showDetails:a,onToggleDetails:n.toggleServiceDetails,onRefresh:function(){return n.checkAllServices()}}),t!==nn.EVALUATION&&(0,r.jsx)("button",{onClick:function(){return l(nn.EVALUATION)},className:"p-2 rounded-full plugin-header-button",title:"Evaluation",disabled:!s,children:(0,r.jsx)(ua.A,{className:"w-5 h-5"})}),t!==nn.SETTINGS&&(0,r.jsx)("button",{onClick:function(){return l(nn.SETTINGS)},className:"p-2 rounded-full plugin-header-button",title:"Settings",disabled:!s,children:(0,r.jsx)(pa.A,{className:"w-5 h-5"})})]})]})})})},ma=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),ga=function(){return ga=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},ga.apply(this,arguments)},fa=function(e){function n(n){var t,r=e.call(this,n)||this;r.handleCollectionSelect=function(e){return r.pluginService.handleCollectionSelect(e)},null===(t=n.config)||void 0===t||t.apiBaseUrl;var o={currentView:nn.COLLECTIONS,selectedCollection:null,selectedChatSession:null,collections:[],documents:[],chatSessions:[],chatMessages:[],loading:!1,error:null,currentTheme:"light",isInitializing:!0,serviceStatuses:N.map((function(e){return{name:e.name,status:"checking"}})),showServiceDetails:!1};return r.pluginService=new ca(o,n.services,n.config,(function(e){return r.setState((function(n){return ga(ga({},n),e)}))})),r.state=o,r}return ma(n,e),n.prototype.componentDidMount=function(){return e=this,n=void 0,r=function(){var e;return function(e,n){var t,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=i(0),s.throw=i(1),s.return=i(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(a=0)),a;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,(function(n){switch(n.label){case 0:this.pluginService.setMounted(!0),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.pluginService.initializePlugin()];case 2:return n.sent(),this.setState({isInitializing:!1}),[3,4];case 3:return e=n.sent(),console.error("ChatCollectionsPlugin: Failed to initialize:",e),this.setState({error:"Failed to initialize plugin",isInitializing:!1}),[3,4];case 4:return[2]}}))},new((t=void 0)||(t=Promise))((function(o,a){function s(e){try{l(r.next(e))}catch(e){a(e)}}function i(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,i)}l((r=r.apply(e,n||[])).next())}));var e,n,t,r},n.prototype.componentWillUnmount=function(){this.pluginService.setMounted(!1),this.pluginService.cleanup()},n.prototype.componentDidUpdate=function(e,n){this.pluginService.handleComponentUpdate(n)},n.prototype.renderLoading=function(){return(0,r.jsxs)("div",{className:"plugin-template-loading",children:[(0,r.jsx)("div",{className:"loading-spinner",children:(0,r.jsx)(w.A,{className:"h-8 w-8 animate-spin"})}),(0,r.jsx)("p",{children:"Initializing Chat Collections Plugin..."})]})},n.prototype.renderError=function(){var e=this;return(0,r.jsxs)("div",{className:"plugin-template-error",children:[(0,r.jsx)("div",{className:"error-icon",children:(0,r.jsx)(k.A,{className:"h-8 w-8 text-red-500"})}),(0,r.jsx)("p",{children:this.state.error}),(0,r.jsx)("button",{onClick:function(){return e.setState({error:null})},className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Retry"})]})},n.prototype.renderContent=function(){var e=this,n=this.state,t=n.currentView,o=n.selectedCollection,a=n.collections,s=n.error,i=n.serviceStatuses,l=n.showServiceDetails,c=this.props.services,d=this.pluginService.areServicesReady();return(0,r.jsxs)("div",{className:"chat-collections-plugin-content plugin-content-bg",children:[(0,r.jsx)(ha,{pluginService:this.pluginService,currentView:t,serviceStatuses:i,showServiceDetails:l,areServicesReady:d,collectionName:null==o?void 0:o.name}),(0,r.jsx)(Fo,{serviceStatuses:i}),s&&(0,r.jsx)(Do,{error:s,onDismiss:function(){return e.pluginService.setError(null)}}),(0,r.jsx)(Uo,{areServicesReady:d,children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[t===nn.COLLECTIONS&&(0,r.jsx)(J,{collections:a,onCollectionSelect:this.handleCollectionSelect,onCollectionCreate:this.pluginService.loadCollections,setError:this.pluginService.setError,dataRepository:this.pluginService.getDataRepository()}),t===nn.CHAT&&o&&(0,r.jsx)(ut,{services:c,dataRepository:this.pluginService.getDataRepository(),selectedCollection:o}),t===nn.SETTINGS&&(0,r.jsx)(Ao,{services:c}),t===nn.EVALUATION&&(0,r.jsx)(Br,{services:c,setError:this.pluginService.setError,collections:this.state.collections})]})})]})},n.prototype.render=function(){var e=this.state,n=e.currentTheme,t=e.isInitializing,o=e.error;return(0,r.jsx)("div",{className:"plugin-template chat-collections-plugin ".concat("dark"===n?"dark-theme dark":""),children:t?this.renderLoading():o&&!this.state.collections.length?this.renderError():this.renderContent()})},n}(a().Component);const va=fa;var ba="1.0.0"},7472:(e,n,t)=>{t.d(n,{A:()=>i});var r=t(1601),o=t.n(r),a=t(6314),s=t.n(a)()(o());s.push([e.id,'/*! tailwindcss v4.1.14 | MIT License | https://tailwindcss.com */\n:root {\n  --bg-color: #ffffff;\n  --paper-bg: #ffffff;\n  --secondary-bg: #f5f5f5;\n  --tertiary-bg: #f9fafb;\n  --text-color: #333333;\n  --text-secondary: #666666;\n  --text-muted: #999999;\n  --border-color: rgba(0, 0, 0, 0.12);\n  --hover-color: rgba(0, 0, 0, 0.05);\n  --active-bg: rgba(0, 0, 0, 0.1);\n  --input-bg: #ffffff;\n  --input-border: rgba(0, 0, 0, 0.2);\n  --input-focus-border: #2196f3;\n  --button-primary-bg: #2196f3;\n  --button-primary-text: #ffffff;\n  --button-secondary-bg: #e0e0e0;\n  --button-secondary-text: #333333;\n  --button-danger-bg: #f44336;\n  --button-danger-text: #ffffff;\n  --status-success-color: #4caf50;\n  --status-error-color: #f44336;\n  --status-checking-color: #ff9800;\n  --status-processing-bg: #fef3c7;\n  --status-processing-text: #92400e;\n  --status-success-bg: #d1fae5;\n  --status-success-text: #065f46;\n  --status-error-bg: #fee2e2;\n  --status-error-text: #991b1b;\n  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);\n  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);\n  --card-bg: #ffffff;\n  --card-border: #e5e7eb;\n  --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  --modal-backdrop: rgba(115, 112, 112, 0.7);\n  --modal-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n  --error-bg: #fee2e2;\n  --error-text: #b91c1c;\n  --error-border: #f87171;\n  --info-bg: #eff6ff;\n  --info-border: #60a5fa;\n  --info-text: #1e40af;\n}\n* {\n  box-sizing: border-box;\n}\n.flex {\n  display: flex;\n}\n.flex-col {\n  flex-direction: column;\n}\n.flex-row {\n  flex-direction: row;\n}\n.flex-1 {\n  flex: 1;\n}\n.flex-none {\n  flex: none;\n}\n.items-center {\n  align-items: center;\n}\n.items-start {\n  align-items: flex-start;\n}\n.items-end {\n  align-items: flex-end;\n}\n.justify-center {\n  justify-content: center;\n}\n.justify-between {\n  justify-content: space-between;\n}\n.justify-start {\n  justify-content: flex-start;\n}\n.justify-end {\n  justify-content: flex-end;\n}\n.gap-1 {\n  gap: 0.25rem;\n}\n.gap-2 {\n  gap: 0.5rem;\n}\n.gap-3 {\n  gap: 0.75rem;\n}\n.gap-4 {\n  gap: 1rem;\n}\n.gap-6 {\n  gap: 1.5rem;\n}\n.gap-8 {\n  gap: 2rem;\n}\n.p-0 {\n  padding: 0;\n}\n.p-1 {\n  padding: 0.25rem;\n}\n.p-2 {\n  padding: 0.5rem;\n}\n.p-3 {\n  padding: 0.75rem;\n}\n.p-4 {\n  padding: 1rem;\n}\n.p-6 {\n  padding: 1.5rem;\n}\n.p-8 {\n  padding: 2rem;\n}\n.px-2 {\n  padding-left: 0.5rem;\n  padding-right: 0.5rem;\n}\n.px-3 {\n  padding-left: 0.75rem;\n  padding-right: 0.75rem;\n}\n.px-4 {\n  padding-left: 1rem;\n  padding-right: 1rem;\n}\n.px-6 {\n  padding-left: 1.5rem;\n  padding-right: 1.5rem;\n}\n.py-1 {\n  padding-top: 0.25rem;\n  padding-bottom: 0.25rem;\n}\n.py-2 {\n  padding-top: 0.5rem;\n  padding-bottom: 0.5rem;\n}\n.py-3 {\n  padding-top: 0.75rem;\n  padding-bottom: 0.75rem;\n}\n.py-4 {\n  padding-top: 1rem;\n  padding-bottom: 1rem;\n}\n.m-0 {\n  margin: 0;\n}\n.m-1 {\n  margin: 0.25rem;\n}\n.m-2 {\n  margin: 0.5rem;\n}\n.m-3 {\n  margin: 0.75rem;\n}\n.m-4 {\n  margin: 1rem;\n}\n.mx-auto {\n  margin-left: auto;\n  margin-right: auto;\n}\n.my-2 {\n  margin-top: 0.5rem;\n  margin-bottom: 0.5rem;\n}\n.my-4 {\n  margin-top: 1rem;\n  margin-bottom: 1rem;\n}\n.mt-1 {\n  margin-top: 0.25rem;\n}\n.mt-2 {\n  margin-top: 0.5rem;\n}\n.mt-4 {\n  margin-top: 1rem;\n}\n.mb-2 {\n  margin-bottom: 0.5rem;\n}\n.mb-4 {\n  margin-bottom: 1rem;\n}\n.ml-2 {\n  margin-left: 0.5rem;\n}\n.mr-2 {\n  margin-right: 0.5rem;\n}\n.w-full {\n  width: 100%;\n}\n.w-auto {\n  width: auto;\n}\n.w-fit {\n  width: fit-content;\n}\n.h-full {\n  height: 100%;\n}\n.h-auto {\n  height: auto;\n}\n.h-fit {\n  height: fit-content;\n}\n.min-h-0 {\n  min-height: 0;\n}\n.max-w-xs {\n  max-width: 20rem;\n}\n.max-w-sm {\n  max-width: 24rem;\n}\n.max-w-md {\n  max-width: 28rem;\n}\n.max-w-lg {\n  max-width: 32rem;\n}\n.max-w-xl {\n  max-width: 36rem;\n}\n.relative {\n  position: relative;\n}\n.absolute {\n  position: absolute;\n}\n.fixed {\n  position: fixed;\n}\n.top-0 {\n  top: 0;\n}\n.right-0 {\n  right: 0;\n}\n.bottom-0 {\n  bottom: 0;\n}\n.left-0 {\n  left: 0;\n}\n.border {\n  border: 1px solid var(--border-color);\n}\n.border-t {\n  border-top: 1px solid var(--border-color);\n}\n.border-b {\n  border-bottom: 1px solid var(--border-color);\n}\n.border-l {\n  border-left: 1px solid var(--border-color);\n}\n.border-r {\n  border-right: 1px solid var(--border-color);\n}\n.border-none {\n  border: none;\n}\n.rounded {\n  border-radius: 0.25rem;\n}\n.rounded-md {\n  border-radius: 0.375rem;\n}\n.rounded-lg {\n  border-radius: 0.5rem;\n}\n.rounded-xl {\n  border-radius: 0.75rem;\n}\n.rounded-2xl {\n  border-radius: 1rem;\n}\n.rounded-full {\n  border-radius: 9999px;\n}\n.bg-transparent {\n  background-color: transparent;\n}\n.bg-white {\n  background-color: #ffffff;\n}\n.bg-gray-50 {\n  background-color: #f9fafb;\n}\n.bg-gray-100 {\n  background-color: #f3f4f6;\n}\n.bg-gray-200 {\n  background-color: #e5e7eb;\n}\n.bg-blue-500 {\n  background-color: #3b82f6;\n}\n.bg-blue-600 {\n  background-color: #2563eb;\n}\n.bg-red-500 {\n  background-color: #ef4444;\n}\n.bg-green-500 {\n  background-color: #10b981;\n}\n.text-xs {\n  font-size: 0.75rem;\n  line-height: 1rem;\n}\n.text-sm {\n  font-size: 0.875rem;\n  line-height: 1.25rem;\n}\n.text-base {\n  font-size: 1rem;\n  line-height: 1.5rem;\n}\n.text-lg {\n  font-size: 1.125rem;\n  line-height: 1.75rem;\n}\n.text-xl {\n  font-size: 1.25rem;\n  line-height: 1.75rem;\n}\n.font-normal {\n  font-weight: 400;\n}\n.font-medium {\n  font-weight: 500;\n}\n.font-semibold {\n  font-weight: 600;\n}\n.font-bold {\n  font-weight: 700;\n}\n.text-left {\n  text-align: left;\n}\n.text-center {\n  text-align: center;\n}\n.text-right {\n  text-align: right;\n}\n.text-white {\n  color: #ffffff;\n}\n.text-gray-500 {\n  color: #6b7280;\n}\n.text-gray-600 {\n  color: #4b5563;\n}\n.text-gray-700 {\n  color: #374151;\n}\n.text-gray-900 {\n  color: #111827;\n}\n.shadow-sm {\n  box-shadow: var(--shadow-sm);\n}\n.shadow {\n  box-shadow: var(--shadow-md);\n}\n.shadow-md {\n  box-shadow: var(--shadow-md);\n}\n.shadow-lg {\n  box-shadow: var(--shadow-lg);\n}\n.shadow-xl {\n  box-shadow: var(--shadow-xl);\n}\n.overflow-hidden {\n  overflow: hidden;\n}\n.overflow-auto {\n  overflow: auto;\n}\n.overflow-y-auto {\n  overflow-y: auto;\n}\n.overflow-x-hidden {\n  overflow-x: hidden;\n}\n.cursor-pointer {\n  cursor: pointer;\n}\n.cursor-not-allowed {\n  cursor: not-allowed;\n}\n.opacity-50 {\n  opacity: 0.5;\n}\n.opacity-70 {\n  opacity: 0.7;\n}\n.opacity-90 {\n  opacity: 0.9;\n}\n.transition {\n  transition: all 0.15s ease-in-out;\n}\n.transition-colors {\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out;\n}\n.transition-transform {\n  transition: transform 0.15s ease-in-out;\n}\n.scale-105 {\n  transform: scale(1.05);\n}\n.scale-110 {\n  transform: scale(1.1);\n}\n.hover\\:opacity-90:hover {\n  opacity: 0.9;\n}\n.hover\\:scale-105:hover {\n  transform: scale(1.05);\n}\n.hover\\:bg-blue-600:hover {\n  background-color: #2563eb;\n}\n.focus\\:outline-none:focus {\n  outline: none;\n}\n.focus\\:ring-2:focus {\n  box-shadow: 0 0 0 2px var(--button-primary-bg);\n}\n.disabled\\:opacity-50:disabled {\n  opacity: 0.5;\n}\n.disabled\\:cursor-not-allowed:disabled {\n  cursor: not-allowed;\n}\n.braindrive-chat-container {\n  color: var(--text-color);\n  background-color: var(--bg-color);\n  transition: background-color 0.3s ease, color 0.3s ease;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  max-height: 100%;\n  width: 100%;\n  overflow: hidden;\n  position: relative;\n}\n.chat-paper {\n  background-color: var(--paper-bg);\n  border-radius: 0.5rem;\n  box-shadow: var(--shadow-lg);\n  overflow: hidden;\n  transition: background-color 0.3s ease, box-shadow 0.3s ease;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  max-height: 100%;\n  min-height: 0;\n  position: relative;\n}\n.chat-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.75rem 1rem;\n  border-bottom: 1px solid var(--border-color);\n  background-color: var(--paper-bg);\n  flex-shrink: 0;\n}\n.chat-controls {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n.chat-history-container {\n  position: relative;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  min-height: 0;\n  max-height: 100%;\n  overflow: hidden;\n}\n.chat-history {\n  flex: 1;\n  overflow-y: auto;\n  overflow-x: hidden;\n  padding: 1rem 1rem 6rem;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  scrollbar-width: thin;\n  scrollbar-color: var(--border-color) transparent;\n  min-height: 0;\n  max-height: 100%;\n  height: 0;\n}\n.chat-history::-webkit-scrollbar {\n  width: 6px;\n}\n.chat-history::-webkit-scrollbar-track {\n  background: transparent;\n}\n.chat-history::-webkit-scrollbar-thumb {\n  background-color: var(--border-color);\n  border-radius: 3px;\n}\n.chat-input-container {\n  display: flex;\n  padding: 1rem;\n  background-color: var(--paper-bg);\n  flex-shrink: 0;\n  border: none;\n}\n.chat-input-wrapper {\n  position: relative;\n  flex: 1;\n  max-width: 100%;\n  display: flex;\n  align-items: stretch;\n  border: none;\n}\n.input-with-buttons {\n  position: relative;\n  flex: 1;\n  border: 1px solid var(--border-color);\n  border-radius: 0.5rem;\n  background-color: var(--input-bg);\n  transition: border-color 0.3s ease;\n  padding: 0.25rem 0.5rem;\n}\n.input-with-buttons:focus-within {\n  border-color: var(--button-primary-bg);\n}\n.chat-input-row {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.chat-input-row.multiline {\n  align-items: flex-end;\n}\n.chat-input {\n  width: 100%;\n  padding: 0.5rem 0.75rem;\n  border: none !important;\n  border-radius: 0.5rem;\n  background-color: transparent;\n  color: var(--text-color);\n  resize: none;\n  min-height: calc(1.5em + 0.5rem);\n  max-height: calc(1.5em * 4 + 0.5rem);\n  overflow-y: auto;\n  scrollbar-width: thin;\n  scrollbar-color: var(--border-color) transparent;\n  font-family: inherit;\n  font-size: inherit;\n  line-height: 1.5;\n  box-shadow: none !important;\n  outline: none;\n}\n.chat-input:focus {\n  outline: none;\n}\n.resize-handle {\n  height: 8px;\n  background-color: transparent;\n  cursor: row-resize;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  position: relative;\n  transition: background-color 0.2s ease;\n}\n.resize-handle:hover {\n  background-color: var(--border-color);\n}\n.resize-handle-line {\n  width: 40px;\n  height: 2px;\n  background-color: var(--border-color);\n  border-radius: 1px;\n  transition: all 0.2s ease;\n}\n.resize-handle:hover .resize-handle-line {\n  width: 60px;\n  background-color: var(--button-primary-bg);\n}\n.history-section {\n  border-top: 1px solid var(--border-color);\n  background-color: var(--paper-bg);\n  padding: 1rem;\n  flex-shrink: 0;\n  transition: padding 0.3s ease;\n}\n.history-section.collapsed {\n  padding: 0.5rem 1rem;\n}\n.history-header {\n  margin-bottom: 0.75rem;\n}\n.history-list {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n  max-height: calc(40vh - 60px);\n  overflow-y: auto;\n  scrollbar-width: thin;\n  scrollbar-color: var(--border-color) transparent;\n  padding-right: 8px;\n  margin-bottom: 8px;\n}\n.history-list::-webkit-scrollbar {\n  width: 4px;\n}\n.history-list::-webkit-scrollbar-track {\n  background: transparent;\n}\n.history-list::-webkit-scrollbar-thumb {\n  background-color: var(--border-color);\n  border-radius: 2px;\n}\n.chat-header-redesigned {\n  display: grid;\n  grid-template-columns: 1fr auto auto 1.5fr auto;\n  align-items: center;\n  border-bottom: 1px solid var(--border-color);\n  background-color: var(--paper-bg);\n  flex-shrink: 0;\n  gap: 1.5rem;\n  min-height: 64px;\n}\n.header-model-section {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  justify-self: start;\n}\n.header-docs-section {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  justify-self: start;\n  min-width: 0;\n}\n.header-persona-section {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  justify-self: start;\n  min-width: 0;\n}\n.header-history-section {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  justify-self: start;\n  min-width: 0;\n  max-width: none;\n  width: 100%;\n}\n.header-actions-section {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  justify-self: end;\n}\n.header-new-chat-button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 36px;\n  height: 36px;\n  padding: 0.5rem;\n  background-color: var(--button-primary-bg);\n  color: var(--button-primary-text);\n  border: none;\n  border-radius: 0.375rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.header-new-chat-button:hover:not(:disabled) {\n  opacity: 0.9;\n  transform: translateY(-1px);\n  box-shadow: var(--shadow-sm);\n}\n.header-new-chat-button:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n  transform: none;\n}\n.header-label {\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: var(--text-color);\n  white-space: nowrap;\n  opacity: 0.8;\n  min-width: fit-content;\n}\n.header-loading {\n  font-size: 0.875rem;\n  color: var(--text-color);\n  opacity: 0.7;\n}\n.header-select {\n  padding: 0.5rem 0.75rem;\n  border: 1px solid var(--border-color);\n  border-radius: 0.375rem;\n  background-color: var(--input-bg);\n  color: var(--text-color);\n  font-size: 0.875rem;\n  transition: border-color 0.2s ease, box-shadow 0.2s ease;\n  min-height: 40px;\n}\n.header-select:focus {\n  outline: none;\n  border-color: var(--button-primary-bg);\n  box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.1);\n}\n.header-model-section .searchable-dropdown {\n  flex: 1 1 0%;\n  min-width: 0;\n}\n.header-model-section .searchable-dropdown-trigger, .header-model-section .header-select {\n  min-width: 0;\n  max-width: 100%;\n  flex: 1 1 auto;\n}\n.header-persona-section .header-select {\n  min-width: 0;\n  max-width: 100%;\n  flex: 1 1 auto;\n}\n.header-select-history {\n  flex: 1 1 0%;\n  min-width: 0;\n}\n.searchable-dropdown {\n  position: relative;\n  min-width: 0;\n}\n.searchable-dropdown.disabled {\n  pointer-events: none;\n}\n.searchable-dropdown-trigger {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 0.5rem;\n  width: 100%;\n  background-color: var(--input-bg);\n  color: var(--text-color);\n}\n.searchable-dropdown-trigger:focus {\n  outline: none;\n  border-color: var(--button-primary-bg);\n  box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.1);\n}\n.searchable-dropdown-value {\n  flex: 1;\n  min-width: 0;\n  text-align: left;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.searchable-dropdown-icon {\n  opacity: 0.6;\n  font-size: 0.75rem;\n}\n.searchable-dropdown-menu {\n  position: absolute;\n  z-index: 20;\n  top: calc(100% + 0.35rem);\n  left: 0;\n  right: 0;\n  background-color: var(--paper-bg);\n  border: 1px solid var(--border-color);\n  border-radius: 0.5rem;\n  box-shadow: var(--shadow-md);\n  display: flex;\n  flex-direction: column;\n  max-height: 320px;\n  overflow: hidden;\n}\n.searchable-dropdown-search {\n  padding: 0.5rem;\n  border-bottom: 1px solid var(--border-color);\n}\n.searchable-dropdown-input {\n  width: 100%;\n  padding: 0.4rem 0.5rem;\n  font-size: 0.875rem;\n  border: 1px solid var(--border-color);\n  border-radius: 0.375rem;\n  background-color: var(--input-bg);\n  color: var(--text-color);\n}\n.searchable-dropdown-input:focus {\n  outline: none;\n  border-color: var(--button-primary-bg);\n  box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.1);\n}\n.searchable-dropdown-options {\n  padding: 0.25rem 0;\n  overflow-y: auto;\n}\n.searchable-dropdown-option {\n  padding: 0.5rem 0.75rem;\n  font-size: 0.875rem;\n  cursor: pointer;\n  display: flex;\n  flex-direction: column;\n  gap: 0.15rem;\n}\n.searchable-dropdown-option-content {\n  display: flex;\n  flex-direction: column;\n  gap: 0.15rem;\n}\n.searchable-dropdown-option:hover, .searchable-dropdown-option.active {\n  background-color: rgba(33, 150, 243, 0.08);\n}\n.searchable-dropdown-option.selected {\n  font-weight: 600;\n}\n.searchable-dropdown-option.disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.searchable-dropdown-option-label {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.searchable-dropdown-option-description {\n  font-size: 0.75rem;\n  color: var(--text-muted);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.searchable-dropdown-empty {\n  padding: 0.75rem;\n  font-size: 0.8125rem;\n  color: var(--text-muted);\n  text-align: center;\n}\n.header-icon-only {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 36px;\n  height: 36px;\n  border: none;\n  border-radius: 0.375rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  flex-shrink: 0;\n  background-color: transparent;\n  color: var(--text-color);\n  opacity: 0.7;\n}\n.header-icon-only:hover:not(:disabled) {\n  opacity: 1;\n  background-color: var(--border-color);\n  transform: translateY(-1px);\n}\n.header-icon-only:disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n.header-icon-only:disabled:hover {\n  background-color: transparent;\n  transform: none;\n}\n.header-icon-danger:hover:not(:disabled) {\n  background-color: rgba(244, 67, 54, 0.1);\n  color: var(--button-danger-bg);\n}\n.header-icon-streaming.active {\n  color: var(--button-primary-bg);\n  opacity: 1;\n}\n.header-icon-streaming.inactive {\n  color: var(--text-color);\n  opacity: 0.5;\n}\n.header-icon-streaming.active:hover:not(:disabled) {\n  background-color: rgba(33, 150, 243, 0.1);\n  color: var(--button-primary-bg);\n}\n.header-icon-streaming.inactive:hover:not(:disabled) {\n  background-color: var(--border-color);\n  color: var(--text-color);\n  opacity: 0.8;\n}\n.header-icon-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  border: none;\n  border-radius: 0.375rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  flex-shrink: 0;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n}\n.header-icon-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.header-icon-btn-primary {\n  background-color: var(--button-primary-bg);\n  color: var(--button-primary-text);\n}\n.header-icon-btn-primary:hover:not(:disabled) {\n  opacity: 0.9;\n  transform: translateY(-1px);\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);\n}\n.header-icon-btn-secondary {\n  background-color: var(--button-secondary-bg);\n  color: var(--button-secondary-text);\n}\n.header-icon-btn-secondary:hover:not(:disabled) {\n  opacity: 0.9;\n  transform: translateY(-1px);\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);\n}\n.header-icon-btn-danger {\n  background-color: var(--button-danger-bg);\n  color: var(--button-danger-text);\n}\n.header-icon-btn-danger:hover:not(:disabled) {\n  opacity: 0.9;\n  transform: translateY(-1px);\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);\n}\n.streaming-toggle {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  padding: 0.25rem;\n}\n.toggle-input {\n  display: none;\n}\n.toggle-label-modern {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  cursor: pointer;\n  user-select: none;\n}\n.toggle-slider {\n  position: relative;\n  width: 44px;\n  height: 24px;\n  background-color: var(--border-color);\n  border-radius: 12px;\n  transition: background-color 0.2s ease;\n  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);\n}\n.toggle-slider::before {\n  content: \'\';\n  position: absolute;\n  top: 2px;\n  left: 2px;\n  width: 20px;\n  height: 20px;\n  background-color: white;\n  border-radius: 50%;\n  transition: transform 0.2s ease;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);\n}\n.toggle-input:checked + .toggle-label-modern .toggle-slider {\n  background-color: var(--button-primary-bg);\n}\n.toggle-input:checked + .toggle-label-modern .toggle-slider::before {\n  transform: translateX(20px);\n}\n.toggle-text {\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: var(--text-color);\n  white-space: nowrap;\n}\n.persona-selector {\n  padding: 0.375rem 0.5rem;\n  border: 1px solid var(--border-color);\n  border-radius: 0.25rem;\n  background-color: var(--input-bg);\n  color: var(--text-color);\n  font-size: 0.75rem;\n  min-width: 120px;\n  max-width: 150px;\n  transition: border-color 0.2s ease;\n}\n.persona-selector:focus {\n  outline: none;\n  border-color: var(--button-primary-bg);\n  box-shadow: 0 0 0 1px rgba(33, 150, 243, 0.2);\n}\n.persona-selector:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.input-button {\n  background-color: var(--button-secondary-bg);\n  color: var(--button-secondary-text);\n  border: none;\n  border-radius: 0.375rem;\n  width: 2rem;\n  height: 2rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  opacity: 0.7;\n}\n.input-button:hover:not(:disabled) {\n  opacity: 1;\n  box-shadow: var(--shadow-sm);\n}\n.input-button:disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n.input-button.send-button {\n  background-color: var(--button-primary-bg);\n  color: var(--button-primary-text);\n  opacity: 0.9;\n}\n.input-button.send-button:hover:not(:disabled) {\n  opacity: 1;\n  box-shadow: var(--shadow-md);\n}\n.input-button.send-button.stop-button {\n  background-color: var(--button-danger-bg);\n  color: var(--button-danger-text);\n}\n.send-button {\n  position: static;\n  background-color: var(--button-primary-bg);\n  color: var(--button-primary-text);\n  border: none;\n  border-radius: 0.375rem;\n  width: 2rem;\n  height: 2rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: background-color 0.3s ease;\n}\n.send-button:hover {\n  opacity: 0.9;\n}\n.send-button:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.new-chat-button-history {\n  background-color: var(--button-secondary-bg);\n  color: var(--button-secondary-text);\n  border: none;\n  border-radius: 0.375rem;\n  width: 2.5rem;\n  height: 2.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  opacity: 0.8;\n  flex-shrink: 0;\n}\n.new-chat-button-history:hover:not(:disabled) {\n  opacity: 1;\n  transform: translateY(-1px);\n  box-shadow: var(--shadow-sm);\n}\n.new-chat-button-history:disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n.menu-container {\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n.dropdown-menu {\n  position: absolute;\n  bottom: 100%;\n  left: 0;\n  margin-bottom: 0.5rem;\n  background-color: var(--paper-bg);\n  border: 1px solid var(--border-color);\n  border-radius: 0.5rem;\n  box-shadow: var(--shadow-lg);\n  min-width: 180px;\n  z-index: 1000;\n  overflow: hidden;\n}\n.menu-item {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  width: 100%;\n  padding: 0.75rem 1rem;\n  background: none;\n  border: none;\n  color: var(--text-color);\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n  font-size: 0.875rem;\n  text-align: left;\n}\n.menu-item:hover:not(:disabled) {\n  background-color: var(--hover-color);\n}\n.menu-item:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.menu-item.active {\n  background-color: rgba(33, 150, 243, 0.1);\n  color: var(--button-primary-bg);\n}\n.menu-item.active:hover:not(:disabled) {\n  background-color: rgba(33, 150, 243, 0.15);\n}\n.scroll-to-bottom-button {\n  position: absolute;\n  bottom: 1.5rem;\n  right: 1.25rem;\n  width: 48px;\n  height: 48px;\n  border-radius: 999px;\n  background-color: var(--button-primary-bg);\n  color: var(--button-primary-text);\n  border: none;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 14px 30px rgba(33, 150, 243, 0.3);\n  transition: transform 0.2s ease, opacity 0.2s ease, box-shadow 0.2s ease;\n  z-index: 15;\n  opacity: 0.92;\n}\n.scroll-to-bottom-button:hover {\n  opacity: 1;\n  transform: translateY(-3px);\n  box-shadow: 0 18px 36px rgba(33, 150, 243, 0.35);\n}\n.scroll-to-bottom-button:active {\n  transform: translateY(0);\n}\n.scroll-to-bottom-button:focus-visible {\n  outline: 2px solid rgba(255, 255, 255, 0.9);\n  outline-offset: 2px;\n}\n.history-accordion-button {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 0;\n  transition: opacity 0.2s ease;\n}\n.history-accordion-button:hover {\n  opacity: 0.8;\n}\n.history-label {\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: var(--text-color);\n  opacity: 0.8;\n  display: block;\n  margin: 0;\n  cursor: pointer;\n}\n.history-accordion-icon {\n  transition: transform 0.2s ease;\n  opacity: 0.6;\n}\n.history-accordion-icon.expanded {\n  transform: rotate(0deg);\n}\n.history-accordion-icon.collapsed {\n  transform: rotate(-90deg);\n}\n.history-item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0.5rem 0.75rem;\n  background-color: transparent;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  position: relative;\n  border-radius: 0.25rem;\n}\n.history-item:hover {\n  background-color: var(--hover-color);\n}\n.history-item.active {\n  background-color: rgba(33, 150, 243, 0.05);\n}\n.history-item-content {\n  display: flex;\n  align-items: center;\n  gap: 0.375rem;\n  flex: 1;\n  min-width: 0;\n}\n.history-item-title {\n  font-size: 0.75rem;\n  color: var(--text-color);\n  font-weight: 400;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  opacity: 0.8;\n}\n.history-item-actions {\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n.history-action-button {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 0.25rem;\n  border-radius: 0.25rem;\n  color: var(--text-color);\n  opacity: 0.6;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.history-action-button:hover {\n  opacity: 1;\n  background-color: var(--border-color);\n}\n.conversation-menu {\n  position: absolute;\n  right: 0;\n  background-color: var(--paper-bg);\n  border: 1px solid var(--border-color);\n  border-radius: 0.375rem;\n  box-shadow: var(--shadow-xl);\n  min-width: 200px;\n  max-width: 250px;\n  z-index: 99999;\n  overflow: hidden;\n}\n.conversation-menu-item {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  width: 100%;\n  padding: 0.75rem;\n  background: none;\n  border: none;\n  color: var(--text-color);\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n  font-size: 0.875rem;\n  text-align: left;\n}\n.conversation-menu-item:hover:not(.datetime) {\n  background-color: var(--hover-color);\n}\n.conversation-menu-item.datetime {\n  background-color: rgba(0, 0, 0, 0.02);\n  cursor: default;\n  font-size: 0.75rem;\n  opacity: 0.8;\n  border-bottom: 1px solid var(--border-color);\n}\n.conversation-menu-item.danger {\n  color: var(--button-danger-bg);\n}\n.conversation-menu-item.danger:hover {\n  background-color: rgba(244, 67, 54, 0.1);\n}\n.see-more-button {\n  padding: 0.75rem;\n  background: none;\n  border: 1px dashed var(--border-color);\n  border-radius: 0.375rem;\n  color: var(--text-color);\n  cursor: pointer;\n  font-size: 0.875rem;\n  transition: all 0.2s ease;\n  opacity: 0.7;\n}\n.see-more-button:hover:not(:disabled) {\n  opacity: 1;\n  background-color: var(--hover-color);\n  border-style: solid;\n}\n.see-more-button:disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n.plugin-header-bg {\n  background-color: var(--bg-color);\n  border-color: var(--border-color);\n  transition: background-color 0.3s ease, border-color 0.3s ease;\n}\n.plugin-header-title {\n  color: var(--text-color);\n  transition: color 0.3s ease;\n}\n.plugin-header-button {\n  color: var(--text-secondary);\n  transition: color 0.3s ease, background-color 0.3s ease;\n}\n.plugin-header-button:hover {\n  background-color: var(--hover-color);\n  color: var(--text-color);\n}\n.collection-list-item {\n  background-color: var(--card-bg);\n  border-color: var(--card-border);\n  transition: background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;\n}\n.collection-list-item:hover {\n  background-color: var(--hover-color);\n  border-color: var(--text-muted);\n}\n.collection-item-title {\n  color: var(--text-color);\n  transition: color 0.3s ease;\n}\n.collection-item-description {\n  color: var(--text-secondary);\n  transition: color 0.3s ease;\n}\n.collection-item-meta {\n  color: var(--text-muted);\n  transition: color 0.3s ease;\n}\n.collection-list-bg {\n  background-color: var(--bg-color);\n  transition: background-color 0.3s ease;\n}\n.collection-list-divider {\n  border-color: var(--border-color);\n  transition: border-color 0.3s ease;\n}\n.plugin-content-bg {\n  background-color: var(--bg-color);\n  transition: background-color 0.3s ease;\n}\n.collection-form-container {\n  background-color: var(--card-bg);\n  border-color: var(--card-border);\n  transition: background-color 0.3s ease, border-color 0.3s ease;\n}\n.collection-form-title {\n  color: var(--text-color);\n  transition: color 0.3s ease;\n}\n.collection-form-label {\n  color: var(--text-secondary);\n  transition: color 0.3s ease;\n}\n.collection-form-input {\n  background-color: var(--input-bg);\n  border-color: var(--border-color);\n  color: var(--text-color);\n  transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;\n}\n.collection-form-input::placeholder {\n  color: var(--text-muted);\n}\n.collection-form-input:focus {\n  outline: none;\n  border-color: var(--input-focus-border);\n}\n.collection-form-button-cancel {\n  background-color: var(--secondary-bg);\n  color: var(--text-color);\n  transition: background-color 0.3s ease, color 0.3s ease;\n}\n.collection-form-button-cancel:hover:not(:disabled) {\n  background-color: var(--hover-color);\n}\n.toggle-switch {\n  display: flex;\n  align-items: center;\n  gap: 0.375rem;\n  cursor: pointer;\n  user-select: none;\n}\n.toggle-switch input[type="checkbox"] {\n  appearance: none;\n  -webkit-appearance: none;\n  width: 2.25rem;\n  height: 1.125rem;\n  border-radius: 0.625rem;\n  background-color: var(--border-color);\n  position: relative;\n  cursor: pointer;\n  transition: background-color 0.3s ease;\n}\n.toggle-switch input[type="checkbox"]:checked {\n  background-color: var(--button-primary-bg);\n}\n.toggle-switch input[type="checkbox"]::before {\n  content: \'\';\n  position: absolute;\n  width: 0.875rem;\n  height: 0.875rem;\n  border-radius: 50%;\n  background-color: white;\n  top: 0.125rem;\n  left: 0.125rem;\n  transition: transform 0.3s ease;\n}\n.toggle-switch input[type="checkbox"]:checked::before {\n  transform: translateX(1.125rem);\n}\n.toggle-switch input[type="checkbox"]:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.toggle-label {\n  font-size: 0.75rem;\n  color: var(--text-color);\n}\n.dropdown-container {\n  position: relative;\n  width: 100%;\n}\n.dropdown-select {\n  width: 100%;\n  padding: 0.5rem 0.75rem;\n  border: 1px solid var(--border-color);\n  border-radius: 0.375rem;\n  background-color: var(--input-bg);\n  color: var(--text-color);\n  cursor: pointer;\n  transition: border-color 0.3s ease;\n}\n.dropdown-select:focus {\n  outline: none;\n  border-color: var(--button-primary-bg);\n}\n.dropdown-select:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.btn {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0.5rem 1rem;\n  border-radius: 0.375rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  border: none;\n  text-decoration: none;\n}\n.btn-primary {\n  background-color: var(--button-primary-bg);\n  color: var(--button-primary-text);\n}\n.btn-primary:hover {\n  opacity: 0.9;\n  transform: translateY(-1px);\n}\n.btn-secondary {\n  background-color: var(--button-secondary-bg);\n  color: var(--button-secondary-text);\n}\n.btn-secondary:hover {\n  opacity: 0.9;\n}\n.btn-danger {\n  background-color: var(--button-danger-bg);\n  color: var(--button-danger-text);\n}\n.btn-danger:hover {\n  opacity: 0.9;\n}\n.btn-sm {\n  padding: 0.25rem 0.5rem;\n  font-size: 0.875rem;\n}\n.btn-xs {\n  padding: 0.125rem 0.375rem;\n  font-size: 0.75rem;\n}\n.btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n  transform: none;\n}\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  padding: 1rem;\n}\n.modal-content {\n  background-color: var(--paper-bg);\n  border-radius: 0.5rem;\n  box-shadow: var(--shadow-xl);\n  width: 100%;\n  max-width: 400px;\n  max-height: 90vh;\n  overflow: hidden;\n}\n.modal-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1rem 1.25rem;\n  border-bottom: 1px solid var(--border-color);\n}\n.modal-title {\n  font-size: 1.125rem;\n  font-weight: 600;\n  color: var(--text-color);\n  margin: 0;\n}\n.modal-close {\n  background: none;\n  border: none;\n  font-size: 1.5rem;\n  color: var(--text-color);\n  cursor: pointer;\n  padding: 0;\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 0.25rem;\n  transition: background-color 0.2s ease;\n}\n.modal-close:hover {\n  background-color: var(--border-color);\n}\n.modal-body {\n  padding: 1.25rem;\n}\n.modal-form {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n.modal-input {\n  padding: 0.75rem;\n  border: 1px solid var(--border-color);\n  border-radius: 0.375rem;\n  background-color: var(--input-bg);\n  color: var(--text-color);\n  font-size: 0.875rem;\n  transition: border-color 0.2s ease, box-shadow 0.2s ease;\n}\n.modal-input:focus {\n  outline: none;\n  border-color: var(--button-primary-bg);\n  box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.1);\n}\n.modal-text {\n  color: var(--text-color);\n  line-height: 1.5;\n  margin: 0;\n}\n.modal-actions {\n  display: flex;\n  gap: 0.75rem;\n  justify-content: flex-end;\n}\n.modal-btn {\n  padding: 0.5rem 1rem;\n  border: none;\n  border-radius: 0.375rem;\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  min-width: 80px;\n}\n.modal-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.modal-btn-primary {\n  background-color: var(--button-primary-bg);\n  color: var(--button-primary-text);\n}\n.modal-btn-primary:hover:not(:disabled) {\n  opacity: 0.9;\n}\n.modal-btn-secondary {\n  background-color: var(--button-secondary-bg);\n  color: var(--button-secondary-text);\n}\n.modal-btn-secondary:hover:not(:disabled) {\n  opacity: 0.9;\n}\n.modal-btn-danger {\n  background-color: var(--button-danger-bg);\n  color: var(--button-danger-text);\n}\n.modal-btn-danger:hover:not(:disabled) {\n  opacity: 0.9;\n}\n.file-upload-container {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  margin-bottom: 1rem;\n}\n.file-upload-button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1rem;\n  background-color: var(--button-secondary-bg);\n  color: var(--button-secondary-text);\n  border: 2px dashed var(--border-color);\n  border-radius: 0.5rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 0.875rem;\n  font-weight: 500;\n}\n.file-upload-button:hover:not(:disabled) {\n  background-color: var(--border-color);\n  border-color: var(--button-primary-bg);\n  transform: translateY(-1px);\n}\n.file-upload-button:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.file-upload-loading {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.loading-spinner {\n  width: 16px;\n  height: 16px;\n  border: 2px solid var(--border-color);\n  border-top: 2px solid var(--button-primary-bg);\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n@keyframes spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n.file-upload-info {\n  text-align: center;\n  color: var(--text-color);\n  opacity: 0.7;\n}\n.file-upload-info small {\n  font-size: 0.75rem;\n}\n.dark-theme {\n  --bg-color: #121a28;\n  --paper-bg: #1a2332;\n  --secondary-bg: #1f2937;\n  --tertiary-bg: #111827;\n  --text-color: #e0e0e0;\n  --text-secondary: #b0b0b0;\n  --text-muted: #808080;\n  --border-color: rgba(255, 255, 255, 0.1);\n  --hover-color: rgba(255, 255, 255, 0.1);\n  --active-bg: rgba(255, 255, 255, 0.15);\n  --input-bg: #1e293b;\n  --input-border: rgba(255, 255, 255, 0.2);\n  --input-focus-border: #2196f3;\n  --button-primary-bg: #2196f3;\n  --button-primary-text: #ffffff;\n  --button-secondary-bg: #2c3a4f;\n  --button-secondary-text: #ffffff;\n  --button-danger-bg: #f44336;\n  --button-danger-text: #ffffff;\n  --status-success-color: #4caf50;\n  --status-error-color: #f44336;\n  --status-checking-color: #ff9800;\n  --status-processing-bg: rgba(254, 243, 199, 0.15);\n  --status-processing-text: #fbbf24;\n  --status-success-bg: rgba(209, 250, 229, 0.15);\n  --status-success-text: #34d399;\n  --status-error-bg: rgba(254, 226, 226, 0.15);\n  --status-error-text: #fca5a5;\n  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);\n  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4);\n  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.5);\n  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.6);\n  --card-bg: #1e1e1e;\n  --card-border: #374151;\n  --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n  --modal-backdrop: rgba(37, 36, 69, 0.7);\n  --modal-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);\n  --error-bg: #450a0a;\n  --error-text: #fecaca;\n  --error-border: #dc2626;\n  --info-bg: #0b1220;\n  --info-border: #3b82f6;\n  --info-text: #93c5fd;\n}\n.dark-theme .header-icon-only:hover:not(:disabled) {\n  background-color: rgba(255, 255, 255, 0.1);\n}\n.dark-theme .header-icon-danger:hover:not(:disabled) {\n  background-color: rgba(244, 67, 54, 0.15);\n}\n.dark-theme .header-icon-streaming.active:hover:not(:disabled) {\n  background-color: rgba(33, 150, 243, 0.15);\n}\n.dark-theme .header-icon-streaming.inactive:hover:not(:disabled) {\n  background-color: rgba(255, 255, 255, 0.1);\n}\n.dark-theme .scroll-to-bottom-button {\n  background-color: rgba(33, 150, 243, 0.85);\n  color: #ffffff;\n  box-shadow: 0 16px 34px rgba(8, 47, 73, 0.55);\n}\n.dark-theme .scroll-to-bottom-button:hover {\n  box-shadow: 0 20px 40px rgba(8, 47, 73, 0.6);\n}\n.dark-theme .message-ai .message-bubble {\n  background-color: rgba(255, 255, 255, 0.04);\n  border-color: rgba(255, 255, 255, 0.08);\n  box-shadow: 0 12px 34px rgba(8, 47, 73, 0.55);\n}\n.dark-theme .message-user .message-bubble {\n  background-color: rgba(33, 150, 243, 0.2);\n  border-color: rgba(33, 150, 243, 0.35);\n  color: var(--text-color);\n}\n.dark-theme .message-action-btn {\n  background-color: rgba(255, 255, 255, 0.08);\n  border-color: rgba(255, 255, 255, 0.16);\n}\n.dark-theme .message-action-btn:hover {\n  background-color: rgba(33, 150, 243, 0.25);\n  border-color: rgba(33, 150, 243, 0.45);\n}\n.dark-theme .message-edit-input {\n  background-color: var(--bg-color);\n  border-color: var(--button-primary-bg);\n}\n.dark-theme .message-search-results .message-bubble {\n  background-color: rgba(33, 150, 243, 0.12);\n  border-color: rgba(33, 150, 243, 0.32);\n}\n.dark-theme .search-result-item {\n  background-color: var(--bg-color);\n}\n.dark-theme .search-toggle-btn:hover {\n  background-color: rgba(255, 255, 255, 0.1);\n}\n.dark-theme .scraping-summary {\n  background-color: rgba(76, 175, 80, 0.1);\n  border-color: rgba(76, 175, 80, 0.3);\n}\n.dark-theme .message-document-context .message-bubble {\n  background-color: rgba(76, 175, 80, 0.12);\n  border-color: rgba(76, 175, 80, 0.3);\n}\n.dark-theme .document-toggle-btn:hover {\n  background-color: rgba(255, 255, 255, 0.1);\n}\n.dark-theme .document-content {\n  background-color: var(--bg-color);\n}\n.dark-theme .conversation-menu-item.datetime {\n  background-color: rgba(255, 255, 255, 0.02);\n}\n.dark-theme .history-item.active {\n  background-color: rgba(33, 150, 243, 0.08);\n}\n.dark-theme .markdown-inline-code {\n  background-color: rgba(255, 255, 255, 0.08);\n  color: #f8bbd9;\n  border-color: rgba(255, 255, 255, 0.15);\n}\n.dark-theme .markdown-code-block {\n  background-color: rgba(255, 255, 255, 0.05);\n  border-color: rgba(255, 255, 255, 0.1);\n}\n.dark-theme .markdown-blockquote {\n  background-color: rgba(33, 150, 243, 0.1);\n}\n.dark-theme .markdown-table-header {\n  background-color: rgba(255, 255, 255, 0.05);\n}\n.dark-theme .enhanced-code-block .code-block-header {\n  background-color: rgba(255, 255, 255, 0.05);\n}\n.dark-theme .code-block-content .react-syntax-highlighter {\n  background-color: rgba(255, 255, 255, 0.02) !important;\n}\n.dark-theme .raw-markdown-content {\n  background-color: rgba(255, 255, 255, 0.02);\n}\n.dark-theme .message-body .thinking-block {\n  background-color: rgba(33, 150, 243, 0.12);\n  border-color: rgba(33, 150, 243, 0.35);\n  color: rgba(255, 255, 255, 0.8);\n}\n.dark-theme .message-body .thinking-block .thinking-header {\n  background-color: rgba(33, 150, 243, 0.16);\n}\n@media (min-width: 1400px) {\n  .chat-header-redesigned {\n    gap: 2rem;\n  }\n  .header-model-section .header-select {\n    min-width: 180px;\n    max-width: 200px;\n  }\n  .header-persona-section .header-select {\n    min-width: 160px;\n    max-width: 180px;\n  }\n}\n@media (max-width: 1200px) {\n  .chat-header-redesigned {\n    grid-template-columns: auto auto 1fr auto;\n    gap: 1rem;\n  }\n  .header-model-section .header-select {\n    max-width: 150px;\n  }\n  .header-persona-section .header-select {\n    max-width: 140px;\n  }\n}\n@media (max-width: 768px) {\n  .chat-header-redesigned {\n    grid-template-columns: 1fr;\n    gap: 1rem;\n    padding: 0.75rem 1rem;\n    min-height: auto;\n  }\n  .header-model-section {\n    justify-self: stretch;\n    order: 1;\n  }\n  .header-model-section .header-select {\n    max-width: none;\n    flex: 1;\n  }\n  .header-persona-section {\n    justify-self: stretch;\n    order: 2;\n  }\n  .header-persona-section .header-select {\n    max-width: none;\n    flex: 1;\n  }\n  .header-history-section {\n    justify-self: stretch;\n    max-width: none;\n    order: 3;\n  }\n  .header-actions-section {\n    justify-self: center;\n    order: 4;\n    gap: 0.75rem;\n  }\n  .header-new-chat-button {\n    width: 40px;\n    height: 40px;\n    padding: 0.5rem;\n  }\n  .header-icon-only {\n    width: 40px;\n    height: 40px;\n  }\n  .modal-overlay {\n    padding: 0.5rem;\n  }\n  .modal-content {\n    max-width: none;\n  }\n  .header-select {\n    font-size: 0.875rem;\n    padding: 0.5rem 0.75rem;\n  }\n  .history-accordion-button {\n    padding: 0.75rem 0;\n  }\n  .history-accordion-icon {\n    opacity: 0.8;\n  }\n  .message {\n    max-width: 90%;\n  }\n  .chat-input-container {\n    padding: 0.75rem;\n  }\n  .chat-input {\n    padding: 0.625rem;\n  }\n  .chat-header {\n    padding: 0.5rem 0.75rem;\n  }\n  .chat-controls {\n    gap: 0.5rem;\n  }\n  .search-results-header {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 0.75rem;\n  }\n  .search-toggle-btn {\n    align-self: flex-end;\n  }\n  .search-results-summary {\n    flex-wrap: wrap;\n  }\n  .message-search-results {\n    max-width: 95%;\n  }\n  .document-context-header {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 0.75rem;\n  }\n  .document-toggle-btn {\n    align-self: flex-end;\n  }\n  .document-context-summary {\n    flex-wrap: wrap;\n  }\n  .message-document-context {\n    max-width: 95%;\n  }\n  .message-actions {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 0.25rem;\n  }\n  .ai-message-actions {\n    align-self: flex-end;\n  }\n  .message-action-btn {\n    min-width: 28px;\n    height: 28px;\n    font-size: 1rem;\n  }\n  .markdown-table-wrapper {\n    font-size: 0.75rem;\n  }\n  .markdown-code-block {\n    font-size: 0.75rem;\n    padding: 0.75rem;\n  }\n}\n@media (max-width: 480px) {\n  .header-actions-section {\n    gap: 0.5rem;\n  }\n  .header-icon-only {\n    width: 36px;\n    height: 36px;\n  }\n  .header-new-chat-button {\n    width: 36px;\n    height: 36px;\n    padding: 0.375rem;\n  }\n  .history-accordion-button {\n    padding: 0.5rem 0;\n  }\n  .message-bubble {\n    max-width: 96%;\n  }\n  .chat-history {\n    padding: 0.75rem 0.75rem 5rem;\n    gap: 0.75rem;\n  }\n  .chat-input-container {\n    padding: 0.5rem;\n  }\n  .chat-header {\n    padding: 0.5rem;\n  }\n  .search-results-summary {\n    font-size: 0.875rem;\n  }\n  .search-toggle-btn {\n    padding: 0.25rem 0.5rem;\n    font-size: 0.75rem;\n  }\n  .search-result-item {\n    padding: 0.5rem;\n  }\n  .document-context-summary {\n    font-size: 0.875rem;\n  }\n  .document-toggle-btn {\n    padding: 0.25rem 0.5rem;\n    font-size: 0.75rem;\n  }\n  .document-content {\n    font-size: 0.75rem;\n    max-height: 200px;\n  }\n  .message-edit-actions {\n    flex-direction: column;\n    gap: 0.25rem;\n  }\n  .message-edit-actions .btn {\n    width: 100%;\n  }\n  .markdown-table-wrapper {\n    font-size: 0.7rem;\n  }\n  .markdown-code-block {\n    font-size: 0.7rem;\n    padding: 0.5rem;\n  }\n}\n.evaluation-view {\n  width: 100%;\n  min-height: 100vh;\n  background: var(--bg-primary);\n  color: var(--text-primary);\n}\n.evaluation-container {\n  max-width: 900px;\n  margin: 0 auto;\n  padding: 2rem;\n}\n.evaluation-title {\n  font-size: 1.75rem;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n  color: var(--text-primary);\n}\n.evaluation-subtitle {\n  font-size: 0.95rem;\n  color: var(--text-secondary);\n  margin-bottom: 2rem;\n}\n.model-selection {\n  margin-bottom: 2rem;\n  padding: 1.5rem;\n  background: var(--bg-secondary);\n  border-radius: 8px;\n  border: 1px solid var(--border-color);\n}\n.model-selection label {\n  display: block;\n  font-weight: 500;\n  margin-bottom: 0.5rem;\n  color: var(--text-primary);\n}\n.model-selection select {\n  width: 100%;\n  padding: 0.75rem;\n  border: 1px solid var(--border-color);\n  border-radius: 6px;\n  background: var(--bg-primary);\n  color: var(--text-primary);\n  font-size: 0.95rem;\n}\n.model-selection select:focus {\n  outline: none;\n  border-color: var(--primary-color);\n}\n.evaluation-start-btn {\n  width: 100%;\n  padding: 1rem;\n  font-size: 1rem;\n  font-weight: 500;\n  background: var(--primary-color);\n  color: white;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: background 0.2s;\n}\n.evaluation-start-btn:hover:not(:disabled) {\n  background: var(--primary-hover);\n}\n.evaluation-start-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.evaluation-progress {\n  margin: 2rem 0;\n  padding: 2rem;\n  background: var(--bg-secondary);\n  border-radius: 8px;\n  text-align: center;\n}\n.progress-bar {\n  width: 100%;\n  height: 12px;\n  background: var(--bg-tertiary);\n  border-radius: 6px;\n  overflow: hidden;\n  margin: 1rem 0;\n}\n.progress-fill {\n  height: 100%;\n  background: var(--primary-color);\n  transition: width 0.3s ease;\n}\n.evaluation-progress p {\n  margin: 0.5rem 0;\n  color: var(--text-secondary);\n}\n.evaluation-progress button {\n  margin-top: 1rem;\n  padding: 0.5rem 1.5rem;\n  background: var(--danger-color);\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n}\n.evaluation-results {\n  margin: 2rem 0;\n  padding: 2rem;\n  background: var(--bg-secondary);\n  border-radius: 8px;\n  border: 1px solid var(--border-color);\n}\n.evaluation-results h3 {\n  font-size: 1.5rem;\n  font-weight: 600;\n  margin-bottom: 1.5rem;\n  color: var(--text-primary);\n  text-align: center;\n}\n.results-grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n}\n.result-card {\n  padding: 1.5rem;\n  background: var(--bg-primary);\n  border-radius: 8px;\n  border: 1px solid var(--border-color);\n  text-align: center;\n}\n.result-card label {\n  display: block;\n  font-size: 0.85rem;\n  font-weight: 500;\n  color: var(--text-secondary);\n  margin-bottom: 0.5rem;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n}\n.result-value {\n  font-size: 2rem;\n  font-weight: 700;\n  color: var(--primary-color);\n}\n.evaluation-id {\n  font-size: 0.85rem;\n  color: var(--text-tertiary);\n  text-align: center;\n  margin: 1rem 0;\n  font-family: monospace;\n}\n.evaluation-results button {\n  width: 100%;\n  margin-top: 1rem;\n}\n.evaluation-error {\n  margin: 1rem 0;\n  padding: 1rem;\n  background: var(--danger-bg);\n  border: 1px solid var(--danger-color);\n  border-radius: 6px;\n  color: var(--danger-color);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.evaluation-error p {\n  margin: 0;\n  flex: 1;\n}\n.evaluation-error button {\n  padding: 0.5rem 1rem;\n  background: transparent;\n  border: 1px solid var(--danger-color);\n  color: var(--danger-color);\n  border-radius: 4px;\n  cursor: pointer;\n}\n.past-runs {\n  margin-top: 3rem;\n  padding-top: 2rem;\n  border-top: 1px solid var(--border-color);\n}\n.past-runs h3 {\n  font-size: 1.25rem;\n  font-weight: 600;\n  margin-bottom: 1rem;\n  color: var(--text-primary);\n}\n.runs-list {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n}\n.run-item {\n  padding: 1rem;\n  background: var(--bg-secondary);\n  border: 1px solid var(--border-color);\n  border-radius: 6px;\n  transition: border-color 0.2s;\n}\n.run-item:hover {\n  border-color: var(--primary-color);\n}\n.run-info {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0.5rem;\n}\n.run-date {\n  font-size: 0.9rem;\n  color: var(--text-secondary);\n}\n.run-accuracy {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: var(--primary-color);\n}\n.run-stats {\n  font-size: 0.85rem;\n  color: var(--text-tertiary);\n}\n.empty-state {\n  padding: 3rem;\n  text-align: center;\n  color: var(--text-secondary);\n}\n.empty-state p {\n  font-size: 0.95rem;\n}\n.eval-stats-card {\n  background-color: var(--card-bg);\n  color: var(--text-color);\n  transition: background-color 0.3s ease, color 0.3s ease;\n}\n.eval-stats-label {\n  color: var(--text-secondary);\n  transition: color 0.3s ease;\n}\n.eval-stats-value {\n  color: var(--text-color);\n  transition: color 0.3s ease;\n}\n.eval-table-row {\n  background-color: var(--card-bg);\n  border-color: var(--border-color);\n  transition: background-color 0.3s ease, border-color 0.3s ease;\n}\n.eval-table-row:hover {\n  background-color: var(--hover-color);\n}\n.eval-table-cell {\n  color: var(--text-color);\n  transition: color 0.3s ease;\n}\n.eval-table-cell-secondary {\n  color: var(--text-secondary);\n  transition: color 0.3s ease;\n}\n.eval-input {\n  background-color: var(--input-bg);\n  border-color: var(--border-color);\n  color: var(--text-color);\n  transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;\n}\n.eval-input::placeholder {\n  color: var(--text-muted);\n}\n.eval-input:focus {\n  outline: none;\n  border-color: var(--input-focus-border);\n}\n.eval-result-item {\n  background-color: var(--card-bg);\n  border-color: var(--card-border);\n  transition: background-color 0.3s ease, border-color 0.3s ease;\n}\n.eval-result-header {\n  background-color: var(--secondary-bg);\n  transition: background-color 0.3s ease;\n}\n.eval-result-content {\n  background-color: var(--tertiary-bg);\n  color: var(--text-secondary);\n  transition: background-color 0.3s ease, color 0.3s ease;\n}\n.eval-tab {\n  color: var(--text-muted);\n  border-color: transparent;\n  transition: color 0.3s ease, border-color 0.3s ease;\n}\n.eval-tab:hover {\n  color: var(--text-secondary);\n  border-color: var(--border-color);\n}\n.eval-tab-active {\n  color: var(--button-primary-bg);\n  border-color: var(--button-primary-bg);\n}\n.eval-filter-btn {\n  background-color: var(--tertiary-bg);\n  color: var(--text-secondary);\n  transition: background-color 0.3s ease, color 0.3s ease;\n}\n.eval-filter-btn:hover {\n  background-color: var(--hover-color);\n  color: var(--text-color);\n}\n.eval-filter-btn-active {\n  background-color: var(--button-primary-bg);\n  color: var(--button-primary-text);\n}\n@media (max-width: 768px) {\n  .results-grid {\n    grid-template-columns: 1fr;\n  }\n  .evaluation-container {\n    padding: 1rem;\n  }\n  .result-value {\n    font-size: 1.5rem;\n  }\n}\n',""]);const i=s},7553:(e,n,t)=>{t.d(n,{A:()=>i});var r=t(1601),o=t.n(r),a=t(6314),s=t.n(a)()(o());s.push([e.id,'/*! tailwindcss v4.1.14 | MIT License | https://tailwindcss.com */\n@layer properties;\n@layer theme, base, components, utilities;\n@layer theme {\n  :root, :host {\n    --font-sans: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji",\n      "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";\n    --font-serif: ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;\n    --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",\n      "Courier New", monospace;\n    --color-red-50: oklch(97.1% 0.013 17.38);\n    --color-red-100: oklch(93.6% 0.032 17.717);\n    --color-red-200: oklch(88.5% 0.062 18.334);\n    --color-red-300: oklch(80.8% 0.114 19.571);\n    --color-red-400: oklch(70.4% 0.191 22.216);\n    --color-red-500: oklch(63.7% 0.237 25.331);\n    --color-red-600: oklch(57.7% 0.245 27.325);\n    --color-red-700: oklch(50.5% 0.213 27.518);\n    --color-red-800: oklch(44.4% 0.177 26.899);\n    --color-red-900: oklch(39.6% 0.141 25.723);\n    --color-red-950: oklch(25.8% 0.092 26.042);\n    --color-orange-50: oklch(98% 0.016 73.684);\n    --color-orange-100: oklch(95.4% 0.038 75.164);\n    --color-orange-200: oklch(90.1% 0.076 70.697);\n    --color-orange-300: oklch(83.7% 0.128 66.29);\n    --color-orange-400: oklch(75% 0.183 55.934);\n    --color-orange-500: oklch(70.5% 0.213 47.604);\n    --color-orange-600: oklch(64.6% 0.222 41.116);\n    --color-orange-700: oklch(55.3% 0.195 38.402);\n    --color-orange-800: oklch(47% 0.157 37.304);\n    --color-orange-900: oklch(40.8% 0.123 38.172);\n    --color-orange-950: oklch(26.6% 0.079 36.259);\n    --color-amber-50: oklch(98.7% 0.022 95.277);\n    --color-amber-100: oklch(96.2% 0.059 95.617);\n    --color-amber-200: oklch(92.4% 0.12 95.746);\n    --color-amber-300: oklch(87.9% 0.169 91.605);\n    --color-amber-400: oklch(82.8% 0.189 84.429);\n    --color-amber-500: oklch(76.9% 0.188 70.08);\n    --color-amber-600: oklch(66.6% 0.179 58.318);\n    --color-amber-700: oklch(55.5% 0.163 48.998);\n    --color-amber-800: oklch(47.3% 0.137 46.201);\n    --color-amber-900: oklch(41.4% 0.112 45.904);\n    --color-amber-950: oklch(27.9% 0.077 45.635);\n    --color-yellow-50: oklch(98.7% 0.026 102.212);\n    --color-yellow-100: oklch(97.3% 0.071 103.193);\n    --color-yellow-200: oklch(94.5% 0.129 101.54);\n    --color-yellow-300: oklch(90.5% 0.182 98.111);\n    --color-yellow-400: oklch(85.2% 0.199 91.936);\n    --color-yellow-500: oklch(79.5% 0.184 86.047);\n    --color-yellow-600: oklch(68.1% 0.162 75.834);\n    --color-yellow-700: oklch(55.4% 0.135 66.442);\n    --color-yellow-800: oklch(47.6% 0.114 61.907);\n    --color-yellow-900: oklch(42.1% 0.095 57.708);\n    --color-yellow-950: oklch(28.6% 0.066 53.813);\n    --color-lime-50: oklch(98.6% 0.031 120.757);\n    --color-lime-100: oklch(96.7% 0.067 122.328);\n    --color-lime-200: oklch(93.8% 0.127 124.321);\n    --color-lime-300: oklch(89.7% 0.196 126.665);\n    --color-lime-400: oklch(84.1% 0.238 128.85);\n    --color-lime-500: oklch(76.8% 0.233 130.85);\n    --color-lime-600: oklch(64.8% 0.2 131.684);\n    --color-lime-700: oklch(53.2% 0.157 131.589);\n    --color-lime-800: oklch(45.3% 0.124 130.933);\n    --color-lime-900: oklch(40.5% 0.101 131.063);\n    --color-lime-950: oklch(27.4% 0.072 132.109);\n    --color-green-50: oklch(98.2% 0.018 155.826);\n    --color-green-100: oklch(96.2% 0.044 156.743);\n    --color-green-200: oklch(92.5% 0.084 155.995);\n    --color-green-300: oklch(87.1% 0.15 154.449);\n    --color-green-400: oklch(79.2% 0.209 151.711);\n    --color-green-500: oklch(72.3% 0.219 149.579);\n    --color-green-600: oklch(62.7% 0.194 149.214);\n    --color-green-700: oklch(52.7% 0.154 150.069);\n    --color-green-800: oklch(44.8% 0.119 151.328);\n    --color-green-900: oklch(39.3% 0.095 152.535);\n    --color-green-950: oklch(26.6% 0.065 152.934);\n    --color-emerald-50: oklch(97.9% 0.021 166.113);\n    --color-emerald-100: oklch(95% 0.052 163.051);\n    --color-emerald-200: oklch(90.5% 0.093 164.15);\n    --color-emerald-300: oklch(84.5% 0.143 164.978);\n    --color-emerald-400: oklch(76.5% 0.177 163.223);\n    --color-emerald-500: oklch(69.6% 0.17 162.48);\n    --color-emerald-600: oklch(59.6% 0.145 163.225);\n    --color-emerald-700: oklch(50.8% 0.118 165.612);\n    --color-emerald-800: oklch(43.2% 0.095 166.913);\n    --color-emerald-900: oklch(37.8% 0.077 168.94);\n    --color-emerald-950: oklch(26.2% 0.051 172.552);\n    --color-teal-50: oklch(98.4% 0.014 180.72);\n    --color-teal-100: oklch(95.3% 0.051 180.801);\n    --color-teal-200: oklch(91% 0.096 180.426);\n    --color-teal-300: oklch(85.5% 0.138 181.071);\n    --color-teal-400: oklch(77.7% 0.152 181.912);\n    --color-teal-500: oklch(70.4% 0.14 182.503);\n    --color-teal-600: oklch(60% 0.118 184.704);\n    --color-teal-700: oklch(51.1% 0.096 186.391);\n    --color-teal-800: oklch(43.7% 0.078 188.216);\n    --color-teal-900: oklch(38.6% 0.063 188.416);\n    --color-teal-950: oklch(27.7% 0.046 192.524);\n    --color-cyan-50: oklch(98.4% 0.019 200.873);\n    --color-cyan-100: oklch(95.6% 0.045 203.388);\n    --color-cyan-200: oklch(91.7% 0.08 205.041);\n    --color-cyan-300: oklch(86.5% 0.127 207.078);\n    --color-cyan-400: oklch(78.9% 0.154 211.53);\n    --color-cyan-500: oklch(71.5% 0.143 215.221);\n    --color-cyan-600: oklch(60.9% 0.126 221.723);\n    --color-cyan-700: oklch(52% 0.105 223.128);\n    --color-cyan-800: oklch(45% 0.085 224.283);\n    --color-cyan-900: oklch(39.8% 0.07 227.392);\n    --color-cyan-950: oklch(30.2% 0.056 229.695);\n    --color-sky-50: oklch(97.7% 0.013 236.62);\n    --color-sky-100: oklch(95.1% 0.026 236.824);\n    --color-sky-200: oklch(90.1% 0.058 230.902);\n    --color-sky-300: oklch(82.8% 0.111 230.318);\n    --color-sky-400: oklch(74.6% 0.16 232.661);\n    --color-sky-500: oklch(68.5% 0.169 237.323);\n    --color-sky-600: oklch(58.8% 0.158 241.966);\n    --color-sky-700: oklch(50% 0.134 242.749);\n    --color-sky-800: oklch(44.3% 0.11 240.79);\n    --color-sky-900: oklch(39.1% 0.09 240.876);\n    --color-sky-950: oklch(29.3% 0.066 243.157);\n    --color-blue-50: oklch(97% 0.014 254.604);\n    --color-blue-100: oklch(93.2% 0.032 255.585);\n    --color-blue-200: oklch(88.2% 0.059 254.128);\n    --color-blue-300: oklch(80.9% 0.105 251.813);\n    --color-blue-400: oklch(70.7% 0.165 254.624);\n    --color-blue-500: oklch(62.3% 0.214 259.815);\n    --color-blue-600: oklch(54.6% 0.245 262.881);\n    --color-blue-700: oklch(48.8% 0.243 264.376);\n    --color-blue-800: oklch(42.4% 0.199 265.638);\n    --color-blue-900: oklch(37.9% 0.146 265.522);\n    --color-blue-950: oklch(28.2% 0.091 267.935);\n    --color-indigo-50: oklch(96.2% 0.018 272.314);\n    --color-indigo-100: oklch(93% 0.034 272.788);\n    --color-indigo-200: oklch(87% 0.065 274.039);\n    --color-indigo-300: oklch(78.5% 0.115 274.713);\n    --color-indigo-400: oklch(67.3% 0.182 276.935);\n    --color-indigo-500: oklch(58.5% 0.233 277.117);\n    --color-indigo-600: oklch(51.1% 0.262 276.966);\n    --color-indigo-700: oklch(45.7% 0.24 277.023);\n    --color-indigo-800: oklch(39.8% 0.195 277.366);\n    --color-indigo-900: oklch(35.9% 0.144 278.697);\n    --color-indigo-950: oklch(25.7% 0.09 281.288);\n    --color-violet-50: oklch(96.9% 0.016 293.756);\n    --color-violet-100: oklch(94.3% 0.029 294.588);\n    --color-violet-200: oklch(89.4% 0.057 293.283);\n    --color-violet-300: oklch(81.1% 0.111 293.571);\n    --color-violet-400: oklch(70.2% 0.183 293.541);\n    --color-violet-500: oklch(60.6% 0.25 292.717);\n    --color-violet-600: oklch(54.1% 0.281 293.009);\n    --color-violet-700: oklch(49.1% 0.27 292.581);\n    --color-violet-800: oklch(43.2% 0.232 292.759);\n    --color-violet-900: oklch(38% 0.189 293.745);\n    --color-violet-950: oklch(28.3% 0.141 291.089);\n    --color-purple-50: oklch(97.7% 0.014 308.299);\n    --color-purple-100: oklch(94.6% 0.033 307.174);\n    --color-purple-200: oklch(90.2% 0.063 306.703);\n    --color-purple-300: oklch(82.7% 0.119 306.383);\n    --color-purple-400: oklch(71.4% 0.203 305.504);\n    --color-purple-500: oklch(62.7% 0.265 303.9);\n    --color-purple-600: oklch(55.8% 0.288 302.321);\n    --color-purple-700: oklch(49.6% 0.265 301.924);\n    --color-purple-800: oklch(43.8% 0.218 303.724);\n    --color-purple-900: oklch(38.1% 0.176 304.987);\n    --color-purple-950: oklch(29.1% 0.149 302.717);\n    --color-fuchsia-50: oklch(97.7% 0.017 320.058);\n    --color-fuchsia-100: oklch(95.2% 0.037 318.852);\n    --color-fuchsia-200: oklch(90.3% 0.076 319.62);\n    --color-fuchsia-300: oklch(83.3% 0.145 321.434);\n    --color-fuchsia-400: oklch(74% 0.238 322.16);\n    --color-fuchsia-500: oklch(66.7% 0.295 322.15);\n    --color-fuchsia-600: oklch(59.1% 0.293 322.896);\n    --color-fuchsia-700: oklch(51.8% 0.253 323.949);\n    --color-fuchsia-800: oklch(45.2% 0.211 324.591);\n    --color-fuchsia-900: oklch(40.1% 0.17 325.612);\n    --color-fuchsia-950: oklch(29.3% 0.136 325.661);\n    --color-pink-50: oklch(97.1% 0.014 343.198);\n    --color-pink-100: oklch(94.8% 0.028 342.258);\n    --color-pink-200: oklch(89.9% 0.061 343.231);\n    --color-pink-300: oklch(82.3% 0.12 346.018);\n    --color-pink-400: oklch(71.8% 0.202 349.761);\n    --color-pink-500: oklch(65.6% 0.241 354.308);\n    --color-pink-600: oklch(59.2% 0.249 0.584);\n    --color-pink-700: oklch(52.5% 0.223 3.958);\n    --color-pink-800: oklch(45.9% 0.187 3.815);\n    --color-pink-900: oklch(40.8% 0.153 2.432);\n    --color-pink-950: oklch(28.4% 0.109 3.907);\n    --color-rose-50: oklch(96.9% 0.015 12.422);\n    --color-rose-100: oklch(94.1% 0.03 12.58);\n    --color-rose-200: oklch(89.2% 0.058 10.001);\n    --color-rose-300: oklch(81% 0.117 11.638);\n    --color-rose-400: oklch(71.2% 0.194 13.428);\n    --color-rose-500: oklch(64.5% 0.246 16.439);\n    --color-rose-600: oklch(58.6% 0.253 17.585);\n    --color-rose-700: oklch(51.4% 0.222 16.935);\n    --color-rose-800: oklch(45.5% 0.188 13.697);\n    --color-rose-900: oklch(41% 0.159 10.272);\n    --color-rose-950: oklch(27.1% 0.105 12.094);\n    --color-slate-50: oklch(98.4% 0.003 247.858);\n    --color-slate-100: oklch(96.8% 0.007 247.896);\n    --color-slate-200: oklch(92.9% 0.013 255.508);\n    --color-slate-300: oklch(86.9% 0.022 252.894);\n    --color-slate-400: oklch(70.4% 0.04 256.788);\n    --color-slate-500: oklch(55.4% 0.046 257.417);\n    --color-slate-600: oklch(44.6% 0.043 257.281);\n    --color-slate-700: oklch(37.2% 0.044 257.287);\n    --color-slate-800: oklch(27.9% 0.041 260.031);\n    --color-slate-900: oklch(20.8% 0.042 265.755);\n    --color-slate-950: oklch(12.9% 0.042 264.695);\n    --color-gray-50: oklch(98.5% 0.002 247.839);\n    --color-gray-100: oklch(96.7% 0.003 264.542);\n    --color-gray-200: oklch(92.8% 0.006 264.531);\n    --color-gray-300: oklch(87.2% 0.01 258.338);\n    --color-gray-400: oklch(70.7% 0.022 261.325);\n    --color-gray-500: oklch(55.1% 0.027 264.364);\n    --color-gray-600: oklch(44.6% 0.03 256.802);\n    --color-gray-700: oklch(37.3% 0.034 259.733);\n    --color-gray-800: oklch(27.8% 0.033 256.848);\n    --color-gray-900: oklch(21% 0.034 264.665);\n    --color-gray-950: oklch(13% 0.028 261.692);\n    --color-zinc-50: oklch(98.5% 0 0);\n    --color-zinc-100: oklch(96.7% 0.001 286.375);\n    --color-zinc-200: oklch(92% 0.004 286.32);\n    --color-zinc-300: oklch(87.1% 0.006 286.286);\n    --color-zinc-400: oklch(70.5% 0.015 286.067);\n    --color-zinc-500: oklch(55.2% 0.016 285.938);\n    --color-zinc-600: oklch(44.2% 0.017 285.786);\n    --color-zinc-700: oklch(37% 0.013 285.805);\n    --color-zinc-800: oklch(27.4% 0.006 286.033);\n    --color-zinc-900: oklch(21% 0.006 285.885);\n    --color-zinc-950: oklch(14.1% 0.005 285.823);\n    --color-neutral-50: oklch(98.5% 0 0);\n    --color-neutral-100: oklch(97% 0 0);\n    --color-neutral-200: oklch(92.2% 0 0);\n    --color-neutral-300: oklch(87% 0 0);\n    --color-neutral-400: oklch(70.8% 0 0);\n    --color-neutral-500: oklch(55.6% 0 0);\n    --color-neutral-600: oklch(43.9% 0 0);\n    --color-neutral-700: oklch(37.1% 0 0);\n    --color-neutral-800: oklch(26.9% 0 0);\n    --color-neutral-900: oklch(20.5% 0 0);\n    --color-neutral-950: oklch(14.5% 0 0);\n    --color-stone-50: oklch(98.5% 0.001 106.423);\n    --color-stone-100: oklch(97% 0.001 106.424);\n    --color-stone-200: oklch(92.3% 0.003 48.717);\n    --color-stone-300: oklch(86.9% 0.005 56.366);\n    --color-stone-400: oklch(70.9% 0.01 56.259);\n    --color-stone-500: oklch(55.3% 0.013 58.071);\n    --color-stone-600: oklch(44.4% 0.011 73.639);\n    --color-stone-700: oklch(37.4% 0.01 67.558);\n    --color-stone-800: oklch(26.8% 0.007 34.298);\n    --color-stone-900: oklch(21.6% 0.006 56.043);\n    --color-stone-950: oklch(14.7% 0.004 49.25);\n    --color-black: #000;\n    --color-white: #fff;\n    --spacing: 0.25rem;\n    --breakpoint-sm: 40rem;\n    --breakpoint-md: 48rem;\n    --breakpoint-lg: 64rem;\n    --breakpoint-xl: 80rem;\n    --breakpoint-2xl: 96rem;\n    --container-3xs: 16rem;\n    --container-2xs: 18rem;\n    --container-xs: 20rem;\n    --container-sm: 24rem;\n    --container-md: 28rem;\n    --container-lg: 32rem;\n    --container-xl: 36rem;\n    --container-2xl: 42rem;\n    --container-3xl: 48rem;\n    --container-4xl: 56rem;\n    --container-5xl: 64rem;\n    --container-6xl: 72rem;\n    --container-7xl: 80rem;\n    --text-xs: 0.75rem;\n    --text-xs--line-height: calc(1 / 0.75);\n    --text-sm: 0.875rem;\n    --text-sm--line-height: calc(1.25 / 0.875);\n    --text-base: 1rem;\n    --text-base--line-height: calc(1.5 / 1);\n    --text-lg: 1.125rem;\n    --text-lg--line-height: calc(1.75 / 1.125);\n    --text-xl: 1.25rem;\n    --text-xl--line-height: calc(1.75 / 1.25);\n    --text-2xl: 1.5rem;\n    --text-2xl--line-height: calc(2 / 1.5);\n    --text-3xl: 1.875rem;\n    --text-3xl--line-height: calc(2.25 / 1.875);\n    --text-4xl: 2.25rem;\n    --text-4xl--line-height: calc(2.5 / 2.25);\n    --text-5xl: 3rem;\n    --text-5xl--line-height: 1;\n    --text-6xl: 3.75rem;\n    --text-6xl--line-height: 1;\n    --text-7xl: 4.5rem;\n    --text-7xl--line-height: 1;\n    --text-8xl: 6rem;\n    --text-8xl--line-height: 1;\n    --text-9xl: 8rem;\n    --text-9xl--line-height: 1;\n    --font-weight-thin: 100;\n    --font-weight-extralight: 200;\n    --font-weight-light: 300;\n    --font-weight-normal: 400;\n    --font-weight-medium: 500;\n    --font-weight-semibold: 600;\n    --font-weight-bold: 700;\n    --font-weight-extrabold: 800;\n    --font-weight-black: 900;\n    --tracking-tighter: -0.05em;\n    --tracking-tight: -0.025em;\n    --tracking-normal: 0em;\n    --tracking-wide: 0.025em;\n    --tracking-wider: 0.05em;\n    --tracking-widest: 0.1em;\n    --leading-tight: 1.25;\n    --leading-snug: 1.375;\n    --leading-normal: 1.5;\n    --leading-relaxed: 1.625;\n    --leading-loose: 2;\n    --radius-xs: 0.125rem;\n    --radius-sm: calc(var(--radius) - 4px);\n    --radius-md: calc(var(--radius) - 2px);\n    --radius-lg: var(--radius);\n    --radius-xl: calc(var(--radius) + 4px);\n    --radius-2xl: 1rem;\n    --radius-3xl: 1.5rem;\n    --radius-4xl: 2rem;\n    --shadow-2xs: 0 1px rgb(0 0 0 / 0.05);\n    --shadow-xs: 0 1px 2px 0 rgb(0 0 0 / 0.05);\n    --shadow-sm: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);\n    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);\n    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);\n    --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);\n    --shadow-2xl: 0 25px 50px -12px rgb(0 0 0 / 0.25);\n    --inset-shadow-2xs: inset 0 1px rgb(0 0 0 / 0.05);\n    --inset-shadow-xs: inset 0 1px 1px rgb(0 0 0 / 0.05);\n    --inset-shadow-sm: inset 0 2px 4px rgb(0 0 0 / 0.05);\n    --drop-shadow-xs: 0 1px 1px rgb(0 0 0 / 0.05);\n    --drop-shadow-sm: 0 1px 2px rgb(0 0 0 / 0.15);\n    --drop-shadow-md: 0 3px 3px rgb(0 0 0 / 0.12);\n    --drop-shadow-lg: 0 4px 4px rgb(0 0 0 / 0.15);\n    --drop-shadow-xl: 0 9px 7px rgb(0 0 0 / 0.1);\n    --drop-shadow-2xl: 0 25px 25px rgb(0 0 0 / 0.15);\n    --text-shadow-2xs: 0px 1px 0px rgb(0 0 0 / 0.15);\n    --text-shadow-xs: 0px 1px 1px rgb(0 0 0 / 0.2);\n    --text-shadow-sm: 0px 1px 0px rgb(0 0 0 / 0.075), 0px 1px 1px rgb(0 0 0 / 0.075),\n      0px 2px 2px rgb(0 0 0 / 0.075);\n    --text-shadow-md: 0px 1px 1px rgb(0 0 0 / 0.1), 0px 1px 2px rgb(0 0 0 / 0.1),\n      0px 2px 4px rgb(0 0 0 / 0.1);\n    --text-shadow-lg: 0px 1px 2px rgb(0 0 0 / 0.1), 0px 3px 2px rgb(0 0 0 / 0.1),\n      0px 4px 8px rgb(0 0 0 / 0.1);\n    --ease-in: cubic-bezier(0.4, 0, 1, 1);\n    --ease-out: cubic-bezier(0, 0, 0.2, 1);\n    --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);\n    --animate-spin: spin 1s linear infinite;\n    --animate-ping: ping 1s cubic-bezier(0, 0, 0.2, 1) infinite;\n    --animate-pulse: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n    --animate-bounce: bounce 1s infinite;\n    --blur-xs: 4px;\n    --blur-sm: 8px;\n    --blur-md: 12px;\n    --blur-lg: 16px;\n    --blur-xl: 24px;\n    --blur-2xl: 40px;\n    --blur-3xl: 64px;\n    --perspective-dramatic: 100px;\n    --perspective-near: 300px;\n    --perspective-normal: 500px;\n    --perspective-midrange: 800px;\n    --perspective-distant: 1200px;\n    --aspect-video: 16 / 9;\n    --default-transition-duration: 150ms;\n    --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n    --default-font-family: var(--font-sans);\n    --default-mono-font-family: var(--font-mono);\n  }\n}\n@layer base {\n  *, ::after, ::before, ::backdrop, ::file-selector-button {\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0;\n    border: 0 solid;\n  }\n  html, :host {\n    line-height: 1.5;\n    -webkit-text-size-adjust: 100%;\n    tab-size: 4;\n    font-family: var(--default-font-family, ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");\n    font-feature-settings: var(--default-font-feature-settings, normal);\n    font-variation-settings: var(--default-font-variation-settings, normal);\n    -webkit-tap-highlight-color: transparent;\n  }\n  hr {\n    height: 0;\n    color: inherit;\n    border-top-width: 1px;\n  }\n  abbr:where([title]) {\n    -webkit-text-decoration: underline dotted;\n    text-decoration: underline dotted;\n  }\n  h1, h2, h3, h4, h5, h6 {\n    font-size: inherit;\n    font-weight: inherit;\n  }\n  a {\n    color: inherit;\n    -webkit-text-decoration: inherit;\n    text-decoration: inherit;\n  }\n  b, strong {\n    font-weight: bolder;\n  }\n  code, kbd, samp, pre {\n    font-family: var(--default-mono-font-family, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace);\n    font-feature-settings: var(--default-mono-font-feature-settings, normal);\n    font-variation-settings: var(--default-mono-font-variation-settings, normal);\n    font-size: 1em;\n  }\n  small {\n    font-size: 80%;\n  }\n  sub, sup {\n    font-size: 75%;\n    line-height: 0;\n    position: relative;\n    vertical-align: baseline;\n  }\n  sub {\n    bottom: -0.25em;\n  }\n  sup {\n    top: -0.5em;\n  }\n  table {\n    text-indent: 0;\n    border-color: inherit;\n    border-collapse: collapse;\n  }\n  :-moz-focusring {\n    outline: auto;\n  }\n  progress {\n    vertical-align: baseline;\n  }\n  summary {\n    display: list-item;\n  }\n  ol, ul, menu {\n    list-style: none;\n  }\n  img, svg, video, canvas, audio, iframe, embed, object {\n    display: block;\n    vertical-align: middle;\n  }\n  img, video {\n    max-width: 100%;\n    height: auto;\n  }\n  button, input, select, optgroup, textarea, ::file-selector-button {\n    font: inherit;\n    font-feature-settings: inherit;\n    font-variation-settings: inherit;\n    letter-spacing: inherit;\n    color: inherit;\n    border-radius: 0;\n    background-color: transparent;\n    opacity: 1;\n  }\n  :where(select:is([multiple], [size])) optgroup {\n    font-weight: bolder;\n  }\n  :where(select:is([multiple], [size])) optgroup option {\n    padding-inline-start: 20px;\n  }\n  ::file-selector-button {\n    margin-inline-end: 4px;\n  }\n  ::placeholder {\n    opacity: 1;\n  }\n  @supports (not (-webkit-appearance: -apple-pay-button))  or (contain-intrinsic-size: 1px) {\n    ::placeholder {\n      color: currentcolor;\n      @supports (color: color-mix(in lab, red, red)) {\n        color: color-mix(in oklab, currentcolor 50%, transparent);\n      }\n    }\n  }\n  textarea {\n    resize: vertical;\n  }\n  ::-webkit-search-decoration {\n    -webkit-appearance: none;\n  }\n  ::-webkit-date-and-time-value {\n    min-height: 1lh;\n    text-align: inherit;\n  }\n  ::-webkit-datetime-edit {\n    display: inline-flex;\n  }\n  ::-webkit-datetime-edit-fields-wrapper {\n    padding: 0;\n  }\n  ::-webkit-datetime-edit, ::-webkit-datetime-edit-year-field, ::-webkit-datetime-edit-month-field, ::-webkit-datetime-edit-day-field, ::-webkit-datetime-edit-hour-field, ::-webkit-datetime-edit-minute-field, ::-webkit-datetime-edit-second-field, ::-webkit-datetime-edit-millisecond-field, ::-webkit-datetime-edit-meridiem-field {\n    padding-block: 0;\n  }\n  ::-webkit-calendar-picker-indicator {\n    line-height: 1;\n  }\n  :-moz-ui-invalid {\n    box-shadow: none;\n  }\n  button, input:where([type="button"], [type="reset"], [type="submit"]), ::file-selector-button {\n    appearance: button;\n  }\n  ::-webkit-inner-spin-button, ::-webkit-outer-spin-button {\n    height: auto;\n  }\n  [hidden]:where(:not([hidden="until-found"])) {\n    display: none !important;\n  }\n}\n@layer utilities {\n  .pointer-events-auto {\n    pointer-events: auto;\n  }\n  .pointer-events-none {\n    pointer-events: none;\n  }\n  .collapse {\n    visibility: collapse;\n  }\n  .invisible {\n    visibility: hidden;\n  }\n  .visible {\n    visibility: visible;\n  }\n  .sr-only {\n    position: absolute;\n    width: 1px;\n    height: 1px;\n    padding: 0;\n    margin: -1px;\n    overflow: hidden;\n    clip-path: inset(50%);\n    white-space: nowrap;\n    border-width: 0;\n  }\n  .not-sr-only {\n    position: static;\n    width: auto;\n    height: auto;\n    padding: 0;\n    margin: 0;\n    overflow: visible;\n    clip-path: none;\n    white-space: normal;\n  }\n  .absolute {\n    position: absolute;\n  }\n  .fixed {\n    position: fixed;\n  }\n  .fixed\\! {\n    position: fixed !important;\n  }\n  .relative {\n    position: relative;\n  }\n  .static {\n    position: static;\n  }\n  .sticky {\n    position: sticky;\n  }\n  .inset-0 {\n    inset: calc(var(--spacing) * 0);\n  }\n  .inset-y-0 {\n    inset-block: calc(var(--spacing) * 0);\n  }\n  .-top-2 {\n    top: calc(var(--spacing) * -2);\n  }\n  .top-0 {\n    top: calc(var(--spacing) * 0);\n  }\n  .top-1 {\n    top: calc(var(--spacing) * 1);\n  }\n  .top-1\\/2 {\n    top: calc(1/2 * 100%);\n  }\n  .top-4 {\n    top: calc(var(--spacing) * 4);\n  }\n  .top-full {\n    top: 100%;\n  }\n  .right-0 {\n    right: calc(var(--spacing) * 0);\n  }\n  .right-2 {\n    right: calc(var(--spacing) * 2);\n  }\n  .right-4 {\n    right: calc(var(--spacing) * 4);\n  }\n  .bottom-0 {\n    bottom: calc(var(--spacing) * 0);\n  }\n  .bottom-2 {\n    bottom: calc(var(--spacing) * 2);\n  }\n  .bottom-8 {\n    bottom: calc(var(--spacing) * 8);\n  }\n  .left-0 {\n    left: calc(var(--spacing) * 0);\n  }\n  .left-2 {\n    left: calc(var(--spacing) * 2);\n  }\n  .left-3 {\n    left: calc(var(--spacing) * 3);\n  }\n  .isolate {\n    isolation: isolate;\n  }\n  .isolation-auto {\n    isolation: auto;\n  }\n  .z-1 {\n    z-index: 1;\n  }\n  .z-40 {\n    z-index: 40;\n  }\n  .z-50 {\n    z-index: 50;\n  }\n  .z-100 {\n    z-index: 100;\n  }\n  .col-start-2 {\n    grid-column-start: 2;\n  }\n  .row-span-2 {\n    grid-row: span 2 / span 2;\n  }\n  .row-start-1 {\n    grid-row-start: 1;\n  }\n  .container {\n    width: 100%;\n    @media (width >= 40rem) {\n      max-width: 40rem;\n    }\n    @media (width >= 48rem) {\n      max-width: 48rem;\n    }\n    @media (width >= 64rem) {\n      max-width: 64rem;\n    }\n    @media (width >= 80rem) {\n      max-width: 80rem;\n    }\n    @media (width >= 96rem) {\n      max-width: 96rem;\n    }\n  }\n  .m-0 {\n    margin: calc(var(--spacing) * 0);\n  }\n  .m-1 {\n    margin: calc(var(--spacing) * 1);\n  }\n  .m-2 {\n    margin: calc(var(--spacing) * 2);\n  }\n  .m-3 {\n    margin: calc(var(--spacing) * 3);\n  }\n  .m-4 {\n    margin: calc(var(--spacing) * 4);\n  }\n  .-mx-1 {\n    margin-inline: calc(var(--spacing) * -1);\n  }\n  .mx-4 {\n    margin-inline: calc(var(--spacing) * 4);\n  }\n  .mx-auto {\n    margin-inline: auto;\n  }\n  .my-1 {\n    margin-block: calc(var(--spacing) * 1);\n  }\n  .my-2 {\n    margin-block: calc(var(--spacing) * 2);\n  }\n  .my-4 {\n    margin-block: calc(var(--spacing) * 4);\n  }\n  .mt-0 {\n    margin-top: calc(var(--spacing) * 0);\n  }\n  .mt-0\\.5 {\n    margin-top: calc(var(--spacing) * 0.5);\n  }\n  .mt-1 {\n    margin-top: calc(var(--spacing) * 1);\n  }\n  .mt-2 {\n    margin-top: calc(var(--spacing) * 2);\n  }\n  .mt-3 {\n    margin-top: calc(var(--spacing) * 3);\n  }\n  .mt-4 {\n    margin-top: calc(var(--spacing) * 4);\n  }\n  .mt-5 {\n    margin-top: calc(var(--spacing) * 5);\n  }\n  .mt-6 {\n    margin-top: calc(var(--spacing) * 6);\n  }\n  .mr-1 {\n    margin-right: calc(var(--spacing) * 1);\n  }\n  .mr-2 {\n    margin-right: calc(var(--spacing) * 2);\n  }\n  .mr-3 {\n    margin-right: calc(var(--spacing) * 3);\n  }\n  .-mb-px {\n    margin-bottom: -1px;\n  }\n  .mb-0 {\n    margin-bottom: calc(var(--spacing) * 0);\n  }\n  .mb-1 {\n    margin-bottom: calc(var(--spacing) * 1);\n  }\n  .mb-2 {\n    margin-bottom: calc(var(--spacing) * 2);\n  }\n  .mb-3 {\n    margin-bottom: calc(var(--spacing) * 3);\n  }\n  .mb-4 {\n    margin-bottom: calc(var(--spacing) * 4);\n  }\n  .mb-6 {\n    margin-bottom: calc(var(--spacing) * 6);\n  }\n  .mb-8 {\n    margin-bottom: calc(var(--spacing) * 8);\n  }\n  .-ml-0 {\n    margin-left: calc(var(--spacing) * -0);\n  }\n  .-ml-0\\.5 {\n    margin-left: calc(var(--spacing) * -0.5);\n  }\n  .-ml-1 {\n    margin-left: calc(var(--spacing) * -1);\n  }\n  .ml-1 {\n    margin-left: calc(var(--spacing) * 1);\n  }\n  .ml-2 {\n    margin-left: calc(var(--spacing) * 2);\n  }\n  .ml-3 {\n    margin-left: calc(var(--spacing) * 3);\n  }\n  .ml-4 {\n    margin-left: calc(var(--spacing) * 4);\n  }\n  .ml-5 {\n    margin-left: calc(var(--spacing) * 5);\n  }\n  .ml-auto {\n    margin-left: auto;\n  }\n  .line-clamp-1 {\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: 1;\n  }\n  .line-clamp-2 {\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    -webkit-line-clamp: 2;\n  }\n  .block {\n    display: block;\n  }\n  .contents {\n    display: contents;\n  }\n  .flex {\n    display: flex;\n  }\n  .flow-root {\n    display: flow-root;\n  }\n  .grid {\n    display: grid;\n  }\n  .hidden {\n    display: none;\n  }\n  .inline {\n    display: inline;\n  }\n  .inline-block {\n    display: inline-block;\n  }\n  .inline-flex {\n    display: inline-flex;\n  }\n  .inline-grid {\n    display: inline-grid;\n  }\n  .inline-table {\n    display: inline-table;\n  }\n  .list-item {\n    display: list-item;\n  }\n  .table {\n    display: table;\n  }\n  .table-caption {\n    display: table-caption;\n  }\n  .table-cell {\n    display: table-cell;\n  }\n  .table-column {\n    display: table-column;\n  }\n  .table-column-group {\n    display: table-column-group;\n  }\n  .table-footer-group {\n    display: table-footer-group;\n  }\n  .table-header-group {\n    display: table-header-group;\n  }\n  .table-row {\n    display: table-row;\n  }\n  .table-row-group {\n    display: table-row-group;\n  }\n  .field-sizing-content {\n    field-sizing: content;\n  }\n  .field-sizing-fixed {\n    field-sizing: fixed;\n  }\n  .size-2 {\n    width: calc(var(--spacing) * 2);\n    height: calc(var(--spacing) * 2);\n  }\n  .size-3 {\n    width: calc(var(--spacing) * 3);\n    height: calc(var(--spacing) * 3);\n  }\n  .size-3\\.5 {\n    width: calc(var(--spacing) * 3.5);\n    height: calc(var(--spacing) * 3.5);\n  }\n  .size-4 {\n    width: calc(var(--spacing) * 4);\n    height: calc(var(--spacing) * 4);\n  }\n  .size-8 {\n    width: calc(var(--spacing) * 8);\n    height: calc(var(--spacing) * 8);\n  }\n  .size-9 {\n    width: calc(var(--spacing) * 9);\n    height: calc(var(--spacing) * 9);\n  }\n  .size-10 {\n    width: calc(var(--spacing) * 10);\n    height: calc(var(--spacing) * 10);\n  }\n  .size-full {\n    width: 100%;\n    height: 100%;\n  }\n  .h-2 {\n    height: calc(var(--spacing) * 2);\n  }\n  .h-3 {\n    height: calc(var(--spacing) * 3);\n  }\n  .h-4 {\n    height: calc(var(--spacing) * 4);\n  }\n  .h-5 {\n    height: calc(var(--spacing) * 5);\n  }\n  .h-6 {\n    height: calc(var(--spacing) * 6);\n  }\n  .h-8 {\n    height: calc(var(--spacing) * 8);\n  }\n  .h-9 {\n    height: calc(var(--spacing) * 9);\n  }\n  .h-10 {\n    height: calc(var(--spacing) * 10);\n  }\n  .h-12 {\n    height: calc(var(--spacing) * 12);\n  }\n  .h-\\[700px\\] {\n    height: 700px;\n  }\n  .h-auto {\n    height: auto;\n  }\n  .h-fit {\n    height: fit-content;\n  }\n  .h-full {\n    height: 100%;\n  }\n  .h-px {\n    height: 1px;\n  }\n  .max-h-60 {\n    max-height: calc(var(--spacing) * 60);\n  }\n  .max-h-64 {\n    max-height: calc(var(--spacing) * 64);\n  }\n  .max-h-96 {\n    max-height: calc(var(--spacing) * 96);\n  }\n  .max-h-\\[6lh\\] {\n    max-height: 6lh;\n  }\n  .max-h-\\[85vh\\] {\n    max-height: 85vh;\n  }\n  .max-h-full {\n    max-height: 100%;\n  }\n  .min-h-0 {\n    min-height: calc(var(--spacing) * 0);\n  }\n  .min-h-4 {\n    min-height: calc(var(--spacing) * 4);\n  }\n  .min-h-16 {\n    min-height: calc(var(--spacing) * 16);\n  }\n  .min-h-\\[50px\\] {\n    min-height: 50px;\n  }\n  .w-0 {\n    width: calc(var(--spacing) * 0);\n  }\n  .w-2 {\n    width: calc(var(--spacing) * 2);\n  }\n  .w-3 {\n    width: calc(var(--spacing) * 3);\n  }\n  .w-4 {\n    width: calc(var(--spacing) * 4);\n  }\n  .w-5 {\n    width: calc(var(--spacing) * 5);\n  }\n  .w-6 {\n    width: calc(var(--spacing) * 6);\n  }\n  .w-8 {\n    width: calc(var(--spacing) * 8);\n  }\n  .w-12 {\n    width: calc(var(--spacing) * 12);\n  }\n  .w-16 {\n    width: calc(var(--spacing) * 16);\n  }\n  .w-20 {\n    width: calc(var(--spacing) * 20);\n  }\n  .w-80 {\n    width: calc(var(--spacing) * 80);\n  }\n  .w-\\[85\\%\\] {\n    width: 85%;\n  }\n  .w-auto {\n    width: auto;\n  }\n  .w-fit {\n    width: fit-content;\n  }\n  .w-full {\n    width: 100%;\n  }\n  .w-max {\n    width: max-content;\n  }\n  .w-xl {\n    width: var(--container-xl);\n  }\n  .max-w-2xl {\n    max-width: var(--container-2xl);\n  }\n  .max-w-3xl {\n    max-width: var(--container-3xl);\n  }\n  .max-w-4xl {\n    max-width: var(--container-4xl);\n  }\n  .max-w-7xl {\n    max-width: var(--container-7xl);\n  }\n  .max-w-lg {\n    max-width: var(--container-lg);\n  }\n  .max-w-md {\n    max-width: var(--container-md);\n  }\n  .max-w-sm {\n    max-width: var(--container-sm);\n  }\n  .max-w-xl {\n    max-width: var(--container-xl);\n  }\n  .max-w-xs {\n    max-width: var(--container-xs);\n  }\n  .min-w-0 {\n    min-width: calc(var(--spacing) * 0);\n  }\n  .min-w-\\[8rem\\] {\n    min-width: 8rem;\n  }\n  .min-w-full {\n    min-width: 100%;\n  }\n  .flex-1 {\n    flex: 1;\n  }\n  .flex-none {\n    flex: none;\n  }\n  .flex-shrink {\n    flex-shrink: 1;\n  }\n  .flex-shrink-0 {\n    flex-shrink: 0;\n  }\n  .shrink {\n    flex-shrink: 1;\n  }\n  .shrink-0 {\n    flex-shrink: 0;\n  }\n  .flex-grow {\n    flex-grow: 1;\n  }\n  .grow {\n    flex-grow: 1;\n  }\n  .border-collapse {\n    border-collapse: collapse;\n  }\n  .translate-x-full {\n    --tw-translate-x: 100%;\n    translate: var(--tw-translate-x) var(--tw-translate-y);\n  }\n  .-translate-y-1 {\n    --tw-translate-y: calc(var(--spacing) * -1);\n    translate: var(--tw-translate-x) var(--tw-translate-y);\n  }\n  .-translate-y-1\\/2 {\n    --tw-translate-y: calc(calc(1/2 * 100%) * -1);\n    translate: var(--tw-translate-x) var(--tw-translate-y);\n  }\n  .translate-none {\n    translate: none;\n  }\n  .scale-105 {\n    --tw-scale-x: 105%;\n    --tw-scale-y: 105%;\n    --tw-scale-z: 105%;\n    scale: var(--tw-scale-x) var(--tw-scale-y);\n  }\n  .scale-110 {\n    --tw-scale-x: 110%;\n    --tw-scale-y: 110%;\n    --tw-scale-z: 110%;\n    scale: var(--tw-scale-x) var(--tw-scale-y);\n  }\n  .scale-3d {\n    scale: var(--tw-scale-x) var(--tw-scale-y) var(--tw-scale-z);\n  }\n  .-rotate-45 {\n    rotate: calc(45deg * -1);\n  }\n  .rotate-45 {\n    rotate: 45deg;\n  }\n  .rotate-180 {\n    rotate: 180deg;\n  }\n  .transform {\n    transform: var(--tw-rotate-x,) var(--tw-rotate-y,) var(--tw-rotate-z,) var(--tw-skew-x,) var(--tw-skew-y,);\n  }\n  .animate-in {\n    animation: enter var(--tw-animation-duration,var(--tw-duration,.15s))var(--tw-ease,ease)var(--tw-animation-delay,0s)var(--tw-animation-iteration-count,1)var(--tw-animation-direction,normal)var(--tw-animation-fill-mode,none);\n  }\n  .animate-spin {\n    animation: var(--animate-spin);\n  }\n  .cursor-default {\n    cursor: default;\n  }\n  .cursor-not-allowed {\n    cursor: not-allowed;\n  }\n  .cursor-pointer {\n    cursor: pointer;\n  }\n  .touch-pinch-zoom {\n    --tw-pinch-zoom: pinch-zoom;\n    touch-action: var(--tw-pan-x,) var(--tw-pan-y,) var(--tw-pinch-zoom,);\n  }\n  .touch-none {\n    touch-action: none;\n  }\n  .resize {\n    resize: both;\n  }\n  .resize-none {\n    resize: none;\n  }\n  .scroll-my-1 {\n    scroll-margin-block: calc(var(--spacing) * 1);\n  }\n  .list-inside {\n    list-style-position: inside;\n  }\n  .list-disc {\n    list-style-type: disc;\n  }\n  .auto-rows-min {\n    grid-auto-rows: min-content;\n  }\n  .grid-cols-1 {\n    grid-template-columns: repeat(1, minmax(0, 1fr));\n  }\n  .grid-cols-\\[0_1fr\\] {\n    grid-template-columns: 0 1fr;\n  }\n  .flex-col {\n    flex-direction: column;\n  }\n  .flex-col-reverse {\n    flex-direction: column-reverse;\n  }\n  .flex-row {\n    flex-direction: row;\n  }\n  .flex-nowrap {\n    flex-wrap: nowrap;\n  }\n  .flex-wrap {\n    flex-wrap: wrap;\n  }\n  .items-center {\n    align-items: center;\n  }\n  .items-end {\n    align-items: flex-end;\n  }\n  .items-start {\n    align-items: flex-start;\n  }\n  .justify-between {\n    justify-content: space-between;\n  }\n  .justify-center {\n    justify-content: center;\n  }\n  .justify-end {\n    justify-content: flex-end;\n  }\n  .justify-start {\n    justify-content: flex-start;\n  }\n  .justify-items-start {\n    justify-items: start;\n  }\n  .gap-1 {\n    gap: calc(var(--spacing) * 1);\n  }\n  .gap-1\\.5 {\n    gap: calc(var(--spacing) * 1.5);\n  }\n  .gap-2 {\n    gap: calc(var(--spacing) * 2);\n  }\n  .gap-3 {\n    gap: calc(var(--spacing) * 3);\n  }\n  .gap-4 {\n    gap: calc(var(--spacing) * 4);\n  }\n  .gap-5 {\n    gap: calc(var(--spacing) * 5);\n  }\n  .gap-6 {\n    gap: calc(var(--spacing) * 6);\n  }\n  .gap-8 {\n    gap: calc(var(--spacing) * 8);\n  }\n  .space-y-1 {\n    :where(& > :not(:last-child)) {\n      --tw-space-y-reverse: 0;\n      margin-block-start: calc(calc(var(--spacing) * 1) * var(--tw-space-y-reverse));\n      margin-block-end: calc(calc(var(--spacing) * 1) * calc(1 - var(--tw-space-y-reverse)));\n    }\n  }\n  .space-y-2 {\n    :where(& > :not(:last-child)) {\n      --tw-space-y-reverse: 0;\n      margin-block-start: calc(calc(var(--spacing) * 2) * var(--tw-space-y-reverse));\n      margin-block-end: calc(calc(var(--spacing) * 2) * calc(1 - var(--tw-space-y-reverse)));\n    }\n  }\n  .space-y-3 {\n    :where(& > :not(:last-child)) {\n      --tw-space-y-reverse: 0;\n      margin-block-start: calc(calc(var(--spacing) * 3) * var(--tw-space-y-reverse));\n      margin-block-end: calc(calc(var(--spacing) * 3) * calc(1 - var(--tw-space-y-reverse)));\n    }\n  }\n  .space-y-4 {\n    :where(& > :not(:last-child)) {\n      --tw-space-y-reverse: 0;\n      margin-block-start: calc(calc(var(--spacing) * 4) * var(--tw-space-y-reverse));\n      margin-block-end: calc(calc(var(--spacing) * 4) * calc(1 - var(--tw-space-y-reverse)));\n    }\n  }\n  .space-y-6 {\n    :where(& > :not(:last-child)) {\n      --tw-space-y-reverse: 0;\n      margin-block-start: calc(calc(var(--spacing) * 6) * var(--tw-space-y-reverse));\n      margin-block-end: calc(calc(var(--spacing) * 6) * calc(1 - var(--tw-space-y-reverse)));\n    }\n  }\n  .space-y-reverse {\n    :where(& > :not(:last-child)) {\n      --tw-space-y-reverse: 1;\n    }\n  }\n  .space-x-1 {\n    :where(& > :not(:last-child)) {\n      --tw-space-x-reverse: 0;\n      margin-inline-start: calc(calc(var(--spacing) * 1) * var(--tw-space-x-reverse));\n      margin-inline-end: calc(calc(var(--spacing) * 1) * calc(1 - var(--tw-space-x-reverse)));\n    }\n  }\n  .space-x-2 {\n    :where(& > :not(:last-child)) {\n      --tw-space-x-reverse: 0;\n      margin-inline-start: calc(calc(var(--spacing) * 2) * var(--tw-space-x-reverse));\n      margin-inline-end: calc(calc(var(--spacing) * 2) * calc(1 - var(--tw-space-x-reverse)));\n    }\n  }\n  .space-x-3 {\n    :where(& > :not(:last-child)) {\n      --tw-space-x-reverse: 0;\n      margin-inline-start: calc(calc(var(--spacing) * 3) * var(--tw-space-x-reverse));\n      margin-inline-end: calc(calc(var(--spacing) * 3) * calc(1 - var(--tw-space-x-reverse)));\n    }\n  }\n  .space-x-4 {\n    :where(& > :not(:last-child)) {\n      --tw-space-x-reverse: 0;\n      margin-inline-start: calc(calc(var(--spacing) * 4) * var(--tw-space-x-reverse));\n      margin-inline-end: calc(calc(var(--spacing) * 4) * calc(1 - var(--tw-space-x-reverse)));\n    }\n  }\n  .space-x-8 {\n    :where(& > :not(:last-child)) {\n      --tw-space-x-reverse: 0;\n      margin-inline-start: calc(calc(var(--spacing) * 8) * var(--tw-space-x-reverse));\n      margin-inline-end: calc(calc(var(--spacing) * 8) * calc(1 - var(--tw-space-x-reverse)));\n    }\n  }\n  .space-x-reverse {\n    :where(& > :not(:last-child)) {\n      --tw-space-x-reverse: 1;\n    }\n  }\n  .gap-y-0 {\n    row-gap: calc(var(--spacing) * 0);\n  }\n  .gap-y-0\\.5 {\n    row-gap: calc(var(--spacing) * 0.5);\n  }\n  .divide-x {\n    :where(& > :not(:last-child)) {\n      --tw-divide-x-reverse: 0;\n      border-inline-style: var(--tw-border-style);\n      border-inline-start-width: calc(1px * var(--tw-divide-x-reverse));\n      border-inline-end-width: calc(1px * calc(1 - var(--tw-divide-x-reverse)));\n    }\n  }\n  .divide-y {\n    :where(& > :not(:last-child)) {\n      --tw-divide-y-reverse: 0;\n      border-bottom-style: var(--tw-border-style);\n      border-top-style: var(--tw-border-style);\n      border-top-width: calc(1px * var(--tw-divide-y-reverse));\n      border-bottom-width: calc(1px * calc(1 - var(--tw-divide-y-reverse)));\n    }\n  }\n  .divide-y-reverse {\n    :where(& > :not(:last-child)) {\n      --tw-divide-y-reverse: 1;\n    }\n  }\n  .divide-gray-200 {\n    :where(& > :not(:last-child)) {\n      border-color: var(--color-gray-200);\n    }\n  }\n  .self-start {\n    align-self: flex-start;\n  }\n  .justify-self-end {\n    justify-self: flex-end;\n  }\n  .truncate {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n  .overflow-auto {\n    overflow: auto;\n  }\n  .overflow-hidden {\n    overflow: hidden;\n  }\n  .overflow-x-auto {\n    overflow-x: auto;\n  }\n  .overflow-x-hidden {\n    overflow-x: hidden;\n  }\n  .overflow-y-auto {\n    overflow-y: auto;\n  }\n  .rounded {\n    border-radius: 0.25rem;\n  }\n  .rounded-2xl {\n    border-radius: var(--radius-2xl);\n  }\n  .rounded-full {\n    border-radius: calc(infinity * 1px);\n  }\n  .rounded-lg {\n    border-radius: var(--radius);\n  }\n  .rounded-md {\n    border-radius: calc(var(--radius) - 2px);\n  }\n  .rounded-none {\n    border-radius: 0;\n  }\n  .rounded-sm {\n    border-radius: calc(var(--radius) - 4px);\n  }\n  .rounded-xl {\n    border-radius: calc(var(--radius) + 4px);\n  }\n  .rounded-xs {\n    border-radius: var(--radius-xs);\n  }\n  .rounded-s {\n    border-start-start-radius: 0.25rem;\n    border-end-start-radius: 0.25rem;\n  }\n  .rounded-ss {\n    border-start-start-radius: 0.25rem;\n  }\n  .rounded-e {\n    border-start-end-radius: 0.25rem;\n    border-end-end-radius: 0.25rem;\n  }\n  .rounded-se {\n    border-start-end-radius: 0.25rem;\n  }\n  .rounded-ee {\n    border-end-end-radius: 0.25rem;\n  }\n  .rounded-es {\n    border-end-start-radius: 0.25rem;\n  }\n  .rounded-t {\n    border-top-left-radius: 0.25rem;\n    border-top-right-radius: 0.25rem;\n  }\n  .rounded-l {\n    border-top-left-radius: 0.25rem;\n    border-bottom-left-radius: 0.25rem;\n  }\n  .rounded-tl {\n    border-top-left-radius: 0.25rem;\n  }\n  .rounded-r {\n    border-top-right-radius: 0.25rem;\n    border-bottom-right-radius: 0.25rem;\n  }\n  .rounded-tr {\n    border-top-right-radius: 0.25rem;\n  }\n  .rounded-b {\n    border-bottom-right-radius: 0.25rem;\n    border-bottom-left-radius: 0.25rem;\n  }\n  .rounded-br {\n    border-bottom-right-radius: 0.25rem;\n  }\n  .rounded-bl {\n    border-bottom-left-radius: 0.25rem;\n  }\n  .border {\n    border-style: var(--tw-border-style);\n    border-width: 1px;\n  }\n  .border-0 {\n    border-style: var(--tw-border-style);\n    border-width: 0px;\n  }\n  .border-0\\! {\n    border-style: var(--tw-border-style) !important;\n    border-width: 0px !important;\n  }\n  .border-x {\n    border-inline-style: var(--tw-border-style);\n    border-inline-width: 1px;\n  }\n  .border-y {\n    border-block-style: var(--tw-border-style);\n    border-block-width: 1px;\n  }\n  .border-s {\n    border-inline-start-style: var(--tw-border-style);\n    border-inline-start-width: 1px;\n  }\n  .border-e {\n    border-inline-end-style: var(--tw-border-style);\n    border-inline-end-width: 1px;\n  }\n  .border-t {\n    border-top-style: var(--tw-border-style);\n    border-top-width: 1px;\n  }\n  .border-t-0 {\n    border-top-style: var(--tw-border-style);\n    border-top-width: 0px;\n  }\n  .border-t-0\\! {\n    border-top-style: var(--tw-border-style) !important;\n    border-top-width: 0px !important;\n  }\n  .border-r {\n    border-right-style: var(--tw-border-style);\n    border-right-width: 1px;\n  }\n  .border-b {\n    border-bottom-style: var(--tw-border-style);\n    border-bottom-width: 1px;\n  }\n  .border-b-2 {\n    border-bottom-style: var(--tw-border-style);\n    border-bottom-width: 2px;\n  }\n  .border-l {\n    border-left-style: var(--tw-border-style);\n    border-left-width: 1px;\n  }\n  .border-l-4 {\n    border-left-style: var(--tw-border-style);\n    border-left-width: 4px;\n  }\n  .border-none {\n    --tw-border-style: none;\n    border-style: none;\n  }\n  .border-none\\! {\n    --tw-border-style: none !important;\n    border-style: none !important;\n  }\n  .border-blue-400 {\n    border-color: var(--color-blue-400);\n  }\n  .border-blue-500 {\n    border-color: var(--color-blue-500);\n  }\n  .border-blue-600 {\n    border-color: var(--color-blue-600);\n  }\n  .border-border {\n    border-color: var(--border);\n  }\n  .border-gray-200 {\n    border-color: var(--color-gray-200);\n  }\n  .border-gray-300 {\n    border-color: var(--color-gray-300);\n  }\n  .border-green-500 {\n    border-color: var(--color-green-500);\n  }\n  .border-input {\n    border-color: var(--input);\n  }\n  .border-red-200 {\n    border-color: var(--color-red-200);\n  }\n  .border-red-300 {\n    border-color: var(--color-red-300);\n  }\n  .border-red-500 {\n    border-color: var(--color-red-500);\n  }\n  .border-transparent {\n    border-color: transparent;\n  }\n  .border-white {\n    border-color: var(--color-white);\n  }\n  .border-yellow-200 {\n    border-color: var(--color-yellow-200);\n  }\n  .border-t-transparent {\n    border-top-color: transparent;\n  }\n  .border-l-transparent {\n    border-left-color: transparent;\n  }\n  .bg-background {\n    background-color: var(--background);\n  }\n  .bg-black {\n    background-color: var(--color-black);\n  }\n  .bg-blue-50 {\n    background-color: var(--color-blue-50);\n  }\n  .bg-blue-100 {\n    background-color: var(--color-blue-100);\n  }\n  .bg-blue-500 {\n    background-color: var(--color-blue-500);\n  }\n  .bg-blue-600 {\n    background-color: var(--color-blue-600);\n  }\n  .bg-border {\n    background-color: var(--border);\n  }\n  .bg-card {\n    background-color: var(--card);\n  }\n  .bg-destructive {\n    background-color: var(--destructive);\n  }\n  .bg-foreground {\n    background-color: var(--foreground);\n  }\n  .bg-gray-50 {\n    background-color: var(--color-gray-50);\n  }\n  .bg-gray-100 {\n    background-color: var(--color-gray-100);\n  }\n  .bg-gray-200 {\n    background-color: var(--color-gray-200);\n  }\n  .bg-gray-300 {\n    background-color: var(--color-gray-300);\n  }\n  .bg-gray-400 {\n    background-color: var(--color-gray-400);\n  }\n  .bg-green-100 {\n    background-color: var(--color-green-100);\n  }\n  .bg-green-500 {\n    background-color: var(--color-green-500);\n  }\n  .bg-green-600 {\n    background-color: var(--color-green-600);\n  }\n  .bg-popover {\n    background-color: var(--popover);\n  }\n  .bg-primary {\n    background-color: var(--primary);\n  }\n  .bg-red-50 {\n    background-color: var(--color-red-50);\n  }\n  .bg-red-100 {\n    background-color: var(--color-red-100);\n  }\n  .bg-red-500 {\n    background-color: var(--color-red-500);\n  }\n  .bg-secondary {\n    background-color: var(--secondary);\n  }\n  .bg-transparent {\n    background-color: transparent;\n  }\n  .bg-white {\n    background-color: var(--color-white);\n  }\n  .bg-yellow-50 {\n    background-color: var(--color-yellow-50);\n  }\n  .bg-yellow-100 {\n    background-color: var(--color-yellow-100);\n  }\n  .bg-yellow-500 {\n    background-color: var(--color-yellow-500);\n  }\n  .bg-repeat {\n    background-repeat: repeat;\n  }\n  .mask-no-clip {\n    mask-clip: no-clip;\n  }\n  .mask-repeat {\n    mask-repeat: repeat;\n  }\n  .fill-current {\n    fill: currentcolor;\n  }\n  .fill-foreground {\n    fill: var(--foreground);\n  }\n  .stroke-\\[2\\] {\n    stroke-width: 2;\n  }\n  .p-0 {\n    padding: calc(var(--spacing) * 0);\n  }\n  .p-1 {\n    padding: calc(var(--spacing) * 1);\n  }\n  .p-2 {\n    padding: calc(var(--spacing) * 2);\n  }\n  .p-3 {\n    padding: calc(var(--spacing) * 3);\n  }\n  .p-4 {\n    padding: calc(var(--spacing) * 4);\n  }\n  .p-5 {\n    padding: calc(var(--spacing) * 5);\n  }\n  .p-6 {\n    padding: calc(var(--spacing) * 6);\n  }\n  .p-8 {\n    padding: calc(var(--spacing) * 8);\n  }\n  .p-px {\n    padding: 1px;\n  }\n  .px-1 {\n    padding-inline: calc(var(--spacing) * 1);\n  }\n  .px-2 {\n    padding-inline: calc(var(--spacing) * 2);\n  }\n  .px-2\\.5 {\n    padding-inline: calc(var(--spacing) * 2.5);\n  }\n  .px-3 {\n    padding-inline: calc(var(--spacing) * 3);\n  }\n  .px-4 {\n    padding-inline: calc(var(--spacing) * 4);\n  }\n  .px-6 {\n    padding-inline: calc(var(--spacing) * 6);\n  }\n  .py-0 {\n    padding-block: calc(var(--spacing) * 0);\n  }\n  .py-0\\.5 {\n    padding-block: calc(var(--spacing) * 0.5);\n  }\n  .py-1 {\n    padding-block: calc(var(--spacing) * 1);\n  }\n  .py-1\\.5 {\n    padding-block: calc(var(--spacing) * 1.5);\n  }\n  .py-2 {\n    padding-block: calc(var(--spacing) * 2);\n  }\n  .py-3 {\n    padding-block: calc(var(--spacing) * 3);\n  }\n  .py-4 {\n    padding-block: calc(var(--spacing) * 4);\n  }\n  .py-5 {\n    padding-block: calc(var(--spacing) * 5);\n  }\n  .py-6 {\n    padding-block: calc(var(--spacing) * 6);\n  }\n  .py-8 {\n    padding-block: calc(var(--spacing) * 8);\n  }\n  .py-12 {\n    padding-block: calc(var(--spacing) * 12);\n  }\n  .pt-4 {\n    padding-top: calc(var(--spacing) * 4);\n  }\n  .pt-5 {\n    padding-top: calc(var(--spacing) * 5);\n  }\n  .pt-6 {\n    padding-top: calc(var(--spacing) * 6);\n  }\n  .pr-2 {\n    padding-right: calc(var(--spacing) * 2);\n  }\n  .pr-3 {\n    padding-right: calc(var(--spacing) * 3);\n  }\n  .pr-8 {\n    padding-right: calc(var(--spacing) * 8);\n  }\n  .pr-10 {\n    padding-right: calc(var(--spacing) * 10);\n  }\n  .pr-16 {\n    padding-right: calc(var(--spacing) * 16);\n  }\n  .pb-3 {\n    padding-bottom: calc(var(--spacing) * 3);\n  }\n  .pb-24 {\n    padding-bottom: calc(var(--spacing) * 24);\n  }\n  .pl-2 {\n    padding-left: calc(var(--spacing) * 2);\n  }\n  .pl-4 {\n    padding-left: calc(var(--spacing) * 4);\n  }\n  .pl-8 {\n    padding-left: calc(var(--spacing) * 8);\n  }\n  .pl-9 {\n    padding-left: calc(var(--spacing) * 9);\n  }\n  .text-center {\n    text-align: center;\n  }\n  .text-left {\n    text-align: left;\n  }\n  .text-right {\n    text-align: right;\n  }\n  .text-2xl {\n    font-size: var(--text-2xl);\n    line-height: var(--tw-leading, var(--text-2xl--line-height));\n  }\n  .text-3xl {\n    font-size: var(--text-3xl);\n    line-height: var(--tw-leading, var(--text-3xl--line-height));\n  }\n  .text-base {\n    font-size: var(--text-base);\n    line-height: var(--tw-leading, var(--text-base--line-height));\n  }\n  .text-lg {\n    font-size: var(--text-lg);\n    line-height: var(--tw-leading, var(--text-lg--line-height));\n  }\n  .text-sm {\n    font-size: var(--text-sm);\n    line-height: var(--tw-leading, var(--text-sm--line-height));\n  }\n  .text-xl {\n    font-size: var(--text-xl);\n    line-height: var(--tw-leading, var(--text-xl--line-height));\n  }\n  .text-xs {\n    font-size: var(--text-xs);\n    line-height: var(--tw-leading, var(--text-xs--line-height));\n  }\n  .leading-5 {\n    --tw-leading: calc(var(--spacing) * 5);\n    line-height: calc(var(--spacing) * 5);\n  }\n  .leading-6 {\n    --tw-leading: calc(var(--spacing) * 6);\n    line-height: calc(var(--spacing) * 6);\n  }\n  .leading-none {\n    --tw-leading: 1;\n    line-height: 1;\n  }\n  .font-bold {\n    --tw-font-weight: var(--font-weight-bold);\n    font-weight: var(--font-weight-bold);\n  }\n  .font-medium {\n    --tw-font-weight: var(--font-weight-medium);\n    font-weight: var(--font-weight-medium);\n  }\n  .font-normal {\n    --tw-font-weight: var(--font-weight-normal);\n    font-weight: var(--font-weight-normal);\n  }\n  .font-semibold {\n    --tw-font-weight: var(--font-weight-semibold);\n    font-weight: var(--font-weight-semibold);\n  }\n  .tracking-tight {\n    --tw-tracking: var(--tracking-tight);\n    letter-spacing: var(--tracking-tight);\n  }\n  .tracking-wider {\n    --tw-tracking: var(--tracking-wider);\n    letter-spacing: var(--tracking-wider);\n  }\n  .tracking-widest {\n    --tw-tracking: var(--tracking-widest);\n    letter-spacing: var(--tracking-widest);\n  }\n  .text-balance {\n    text-wrap: balance;\n  }\n  .text-wrap {\n    text-wrap: wrap;\n  }\n  .break-words {\n    overflow-wrap: break-word;\n  }\n  .text-clip {\n    text-overflow: clip;\n  }\n  .text-ellipsis {\n    text-overflow: ellipsis;\n  }\n  .whitespace-nowrap {\n    white-space: nowrap;\n  }\n  .whitespace-pre-wrap {\n    white-space: pre-wrap;\n  }\n  .text-background {\n    color: var(--background);\n  }\n  .text-black {\n    color: var(--color-black);\n  }\n  .text-blue-400 {\n    color: var(--color-blue-400);\n  }\n  .text-blue-500 {\n    color: var(--color-blue-500);\n  }\n  .text-blue-600 {\n    color: var(--color-blue-600);\n  }\n  .text-blue-700 {\n    color: var(--color-blue-700);\n  }\n  .text-blue-800 {\n    color: var(--color-blue-800);\n  }\n  .text-blue-900 {\n    color: var(--color-blue-900);\n  }\n  .text-card-foreground {\n    color: var(--card-foreground);\n  }\n  .text-destructive {\n    color: var(--destructive);\n  }\n  .text-gray-300 {\n    color: var(--color-gray-300);\n  }\n  .text-gray-400 {\n    color: var(--color-gray-400);\n  }\n  .text-gray-500 {\n    color: var(--color-gray-500);\n  }\n  .text-gray-600 {\n    color: var(--color-gray-600);\n  }\n  .text-gray-700 {\n    color: var(--color-gray-700);\n  }\n  .text-gray-800 {\n    color: var(--color-gray-800);\n  }\n  .text-gray-900 {\n    color: var(--color-gray-900);\n  }\n  .text-green-500 {\n    color: var(--color-green-500);\n  }\n  .text-green-600 {\n    color: var(--color-green-600);\n  }\n  .text-green-800 {\n    color: var(--color-green-800);\n  }\n  .text-muted-foreground {\n    color: var(--muted-foreground);\n  }\n  .text-orange-600 {\n    color: var(--color-orange-600);\n  }\n  .text-popover-foreground {\n    color: var(--popover-foreground);\n  }\n  .text-primary {\n    color: var(--primary);\n  }\n  .text-primary-foreground {\n    color: var(--primary-foreground);\n  }\n  .text-purple-600 {\n    color: var(--color-purple-600);\n  }\n  .text-red-500 {\n    color: var(--color-red-500);\n  }\n  .text-red-600 {\n    color: var(--color-red-600);\n  }\n  .text-red-700 {\n    color: var(--color-red-700);\n  }\n  .text-red-800 {\n    color: var(--color-red-800);\n  }\n  .text-secondary-foreground {\n    color: var(--secondary-foreground);\n  }\n  .text-white {\n    color: var(--color-white);\n  }\n  .text-yellow-600 {\n    color: var(--color-yellow-600);\n  }\n  .text-yellow-700 {\n    color: var(--color-yellow-700);\n  }\n  .text-yellow-800 {\n    color: var(--color-yellow-800);\n  }\n  .capitalize {\n    text-transform: capitalize;\n  }\n  .lowercase {\n    text-transform: lowercase;\n  }\n  .normal-case {\n    text-transform: none;\n  }\n  .uppercase {\n    text-transform: uppercase;\n  }\n  .italic {\n    font-style: italic;\n  }\n  .not-italic {\n    font-style: normal;\n  }\n  .diagonal-fractions {\n    --tw-numeric-fraction: diagonal-fractions;\n    font-variant-numeric: var(--tw-ordinal,) var(--tw-slashed-zero,) var(--tw-numeric-figure,) var(--tw-numeric-spacing,) var(--tw-numeric-fraction,);\n  }\n  .lining-nums {\n    --tw-numeric-figure: lining-nums;\n    font-variant-numeric: var(--tw-ordinal,) var(--tw-slashed-zero,) var(--tw-numeric-figure,) var(--tw-numeric-spacing,) var(--tw-numeric-fraction,);\n  }\n  .oldstyle-nums {\n    --tw-numeric-figure: oldstyle-nums;\n    font-variant-numeric: var(--tw-ordinal,) var(--tw-slashed-zero,) var(--tw-numeric-figure,) var(--tw-numeric-spacing,) var(--tw-numeric-fraction,);\n  }\n  .ordinal {\n    --tw-ordinal: ordinal;\n    font-variant-numeric: var(--tw-ordinal,) var(--tw-slashed-zero,) var(--tw-numeric-figure,) var(--tw-numeric-spacing,) var(--tw-numeric-fraction,);\n  }\n  .proportional-nums {\n    --tw-numeric-spacing: proportional-nums;\n    font-variant-numeric: var(--tw-ordinal,) var(--tw-slashed-zero,) var(--tw-numeric-figure,) var(--tw-numeric-spacing,) var(--tw-numeric-fraction,);\n  }\n  .slashed-zero {\n    --tw-slashed-zero: slashed-zero;\n    font-variant-numeric: var(--tw-ordinal,) var(--tw-slashed-zero,) var(--tw-numeric-figure,) var(--tw-numeric-spacing,) var(--tw-numeric-fraction,);\n  }\n  .stacked-fractions {\n    --tw-numeric-fraction: stacked-fractions;\n    font-variant-numeric: var(--tw-ordinal,) var(--tw-slashed-zero,) var(--tw-numeric-figure,) var(--tw-numeric-spacing,) var(--tw-numeric-fraction,);\n  }\n  .tabular-nums {\n    --tw-numeric-spacing: tabular-nums;\n    font-variant-numeric: var(--tw-ordinal,) var(--tw-slashed-zero,) var(--tw-numeric-figure,) var(--tw-numeric-spacing,) var(--tw-numeric-fraction,);\n  }\n  .normal-nums {\n    font-variant-numeric: normal;\n  }\n  .line-through {\n    text-decoration-line: line-through;\n  }\n  .no-underline {\n    text-decoration-line: none;\n  }\n  .overline {\n    text-decoration-line: overline;\n  }\n  .underline {\n    text-decoration-line: underline;\n  }\n  .underline-offset-4 {\n    text-underline-offset: 4px;\n  }\n  .antialiased {\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n  .subpixel-antialiased {\n    -webkit-font-smoothing: auto;\n    -moz-osx-font-smoothing: auto;\n  }\n  .opacity-0 {\n    opacity: 0%;\n  }\n  .opacity-25 {\n    opacity: 25%;\n  }\n  .opacity-50 {\n    opacity: 50%;\n  }\n  .opacity-70 {\n    opacity: 70%;\n  }\n  .opacity-75 {\n    opacity: 75%;\n  }\n  .opacity-90 {\n    opacity: 90%;\n  }\n  .shadow {\n    --tw-shadow: 0 1px 3px 0 var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 1px 2px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1));\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n  .shadow-lg {\n    --tw-shadow: 0 10px 15px -3px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 4px 6px -4px var(--tw-shadow-color, rgb(0 0 0 / 0.1));\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n  .shadow-md {\n    --tw-shadow: 0 4px 6px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 2px 4px -2px var(--tw-shadow-color, rgb(0 0 0 / 0.1));\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n  .shadow-none {\n    --tw-shadow: 0 0 #0000;\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n  .shadow-sm {\n    --tw-shadow: 0 1px 3px 0 var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 1px 2px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1));\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n  .shadow-xl {\n    --tw-shadow: 0 20px 25px -5px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 8px 10px -6px var(--tw-shadow-color, rgb(0 0 0 / 0.1));\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n  .shadow-xs {\n    --tw-shadow: 0 1px 2px 0 var(--tw-shadow-color, rgb(0 0 0 / 0.05));\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n  .ring-0 {\n    --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n  .inset-ring {\n    --tw-inset-ring-shadow: inset 0 0 0 1px var(--tw-inset-ring-color, currentcolor);\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n  .ring-offset-background {\n    --tw-ring-offset-color: var(--background);\n  }\n  .outline-hidden {\n    --tw-outline-style: none;\n    outline-style: none;\n    @media (forced-colors: active) {\n      outline: 2px solid transparent;\n      outline-offset: 2px;\n    }\n  }\n  .outline {\n    outline-style: var(--tw-outline-style);\n    outline-width: 1px;\n  }\n  .blur {\n    --tw-blur: blur(8px);\n    filter: var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,);\n  }\n  .drop-shadow {\n    --tw-drop-shadow-size: drop-shadow(0 1px 2px var(--tw-drop-shadow-color, rgb(0 0 0 / 0.1))) drop-shadow(0 1px 1px var(--tw-drop-shadow-color, rgb(0 0 0 / 0.06)));\n    --tw-drop-shadow: drop-shadow(0 1px 2px rgb(0 0 0 / 0.1)) drop-shadow( 0 1px 1px rgb(0 0 0 / 0.06));\n    filter: var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,);\n  }\n  .invert {\n    --tw-invert: invert(100%);\n    filter: var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,);\n  }\n  .filter {\n    filter: var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,);\n  }\n  .filter\\! {\n    filter: var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,) !important;\n  }\n  .backdrop-blur {\n    --tw-backdrop-blur: blur(8px);\n    -webkit-backdrop-filter: var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,);\n    backdrop-filter: var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,);\n  }\n  .backdrop-blur-sm {\n    --tw-backdrop-blur: blur(var(--blur-sm));\n    -webkit-backdrop-filter: var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,);\n    backdrop-filter: var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,);\n  }\n  .backdrop-grayscale {\n    --tw-backdrop-grayscale: grayscale(100%);\n    -webkit-backdrop-filter: var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,);\n    backdrop-filter: var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,);\n  }\n  .backdrop-invert {\n    --tw-backdrop-invert: invert(100%);\n    -webkit-backdrop-filter: var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,);\n    backdrop-filter: var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,);\n  }\n  .backdrop-sepia {\n    --tw-backdrop-sepia: sepia(100%);\n    -webkit-backdrop-filter: var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,);\n    backdrop-filter: var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,);\n  }\n  .backdrop-filter {\n    -webkit-backdrop-filter: var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,);\n    backdrop-filter: var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,);\n  }\n  .transition {\n    transition-property: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke, --tw-gradient-from, --tw-gradient-via, --tw-gradient-to, opacity, box-shadow, transform, translate, scale, rotate, filter, -webkit-backdrop-filter, backdrop-filter, display, content-visibility, overlay, pointer-events;\n    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));\n    transition-duration: var(--tw-duration, var(--default-transition-duration));\n  }\n  .transition-\\[color\\,box-shadow\\] {\n    transition-property: color,box-shadow;\n    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));\n    transition-duration: var(--tw-duration, var(--default-transition-duration));\n  }\n  .transition-all {\n    transition-property: all;\n    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));\n    transition-duration: var(--tw-duration, var(--default-transition-duration));\n  }\n  .transition-colors {\n    transition-property: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke, --tw-gradient-from, --tw-gradient-via, --tw-gradient-to;\n    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));\n    transition-duration: var(--tw-duration, var(--default-transition-duration));\n  }\n  .transition-opacity {\n    transition-property: opacity;\n    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));\n    transition-duration: var(--tw-duration, var(--default-transition-duration));\n  }\n  .transition-shadow {\n    transition-property: box-shadow;\n    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));\n    transition-duration: var(--tw-duration, var(--default-transition-duration));\n  }\n  .transition-transform {\n    transition-property: transform, translate, scale, rotate;\n    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));\n    transition-duration: var(--tw-duration, var(--default-transition-duration));\n  }\n  .duration-200 {\n    --tw-duration: 200ms;\n    transition-duration: 200ms;\n  }\n  .duration-300 {\n    --tw-duration: 300ms;\n    transition-duration: 300ms;\n  }\n  .ease-in-out {\n    --tw-ease: var(--ease-in-out);\n    transition-timing-function: var(--ease-in-out);\n  }\n  .ease-out {\n    --tw-ease: var(--ease-out);\n    transition-timing-function: var(--ease-out);\n  }\n  .fade-in-0 {\n    --tw-enter-opacity: calc(0/100);\n    --tw-enter-opacity: 0;\n  }\n  .outline-none {\n    --tw-outline-style: none;\n    outline-style: none;\n  }\n  .select-none {\n    -webkit-user-select: none;\n    user-select: none;\n  }\n  .zoom-in-95 {\n    --tw-enter-scale: calc(95*1%);\n    --tw-enter-scale: .95;\n  }\n  .\\[-ms-overflow-style\\:none\\] {\n    -ms-overflow-style: none;\n  }\n  .\\[scrollbar-width\\:none\\] {\n    scrollbar-width: none;\n  }\n  .divide-x-reverse {\n    :where(& > :not(:last-child)) {\n      --tw-divide-x-reverse: 1;\n    }\n  }\n  .paused {\n    animation-play-state: paused;\n  }\n  .ring-inset {\n    --tw-ring-inset: inset;\n  }\n  .running {\n    animation-play-state: running;\n  }\n  .zoom-in {\n    --tw-enter-scale: 0;\n  }\n  .zoom-out {\n    --tw-exit-scale: 0;\n  }\n  .group-hover\\:opacity-100 {\n    &:is(:where(.group):hover *) {\n      @media (hover: hover) {\n        opacity: 100%;\n      }\n    }\n  }\n  .placeholder\\:text-muted-foreground {\n    &::placeholder {\n      color: var(--muted-foreground);\n    }\n  }\n  .last\\:border-b-0 {\n    &:last-child {\n      border-bottom-style: var(--tw-border-style);\n      border-bottom-width: 0px;\n    }\n  }\n  .focus-within\\:border-border {\n    &:focus-within {\n      border-color: var(--border);\n    }\n  }\n  .hover\\:border-muted-foreground\\/50 {\n    &:hover {\n      @media (hover: hover) {\n        border-color: var(--muted-foreground);\n        @supports (color: color-mix(in lab, red, red)) {\n          border-color: color-mix(in oklab, var(--muted-foreground) 50%, transparent);\n        }\n      }\n    }\n  }\n  .hover\\:bg-accent {\n    &:hover {\n      @media (hover: hover) {\n        background-color: var(--accent);\n      }\n    }\n  }\n  .hover\\:bg-blue-100 {\n    &:hover {\n      @media (hover: hover) {\n        background-color: var(--color-blue-100);\n      }\n    }\n  }\n  .hover\\:bg-blue-600 {\n    &:hover {\n      @media (hover: hover) {\n        background-color: var(--color-blue-600);\n      }\n    }\n  }\n  .hover\\:bg-blue-700 {\n    &:hover {\n      @media (hover: hover) {\n        background-color: var(--color-blue-700);\n      }\n    }\n  }\n  .hover\\:bg-destructive\\/90 {\n    &:hover {\n      @media (hover: hover) {\n        background-color: var(--destructive);\n        @supports (color: color-mix(in lab, red, red)) {\n          background-color: color-mix(in oklab, var(--destructive) 90%, transparent);\n        }\n      }\n    }\n  }\n  .hover\\:bg-gray-50 {\n    &:hover {\n      @media (hover: hover) {\n        background-color: var(--color-gray-50);\n      }\n    }\n  }\n  .hover\\:bg-gray-100 {\n    &:hover {\n      @media (hover: hover) {\n        background-color: var(--color-gray-100);\n      }\n    }\n  }\n  .hover\\:bg-gray-200 {\n    &:hover {\n      @media (hover: hover) {\n        background-color: var(--color-gray-200);\n      }\n    }\n  }\n  .hover\\:bg-gray-300 {\n    &:hover {\n      @media (hover: hover) {\n        background-color: var(--color-gray-300);\n      }\n    }\n  }\n  .hover\\:bg-gray-400 {\n    &:hover {\n      @media (hover: hover) {\n        background-color: var(--color-gray-400);\n      }\n    }\n  }\n  .hover\\:bg-green-700 {\n    &:hover {\n      @media (hover: hover) {\n        background-color: var(--color-green-700);\n      }\n    }\n  }\n  .hover\\:bg-primary\\/90 {\n    &:hover {\n      @media (hover: hover) {\n        background-color: var(--primary);\n        @supports (color: color-mix(in lab, red, red)) {\n          background-color: color-mix(in oklab, var(--primary) 90%, transparent);\n        }\n      }\n    }\n  }\n  .hover\\:bg-secondary\\/80 {\n    &:hover {\n      @media (hover: hover) {\n        background-color: var(--secondary);\n        @supports (color: color-mix(in lab, red, red)) {\n          background-color: color-mix(in oklab, var(--secondary) 80%, transparent);\n        }\n      }\n    }\n  }\n  .hover\\:text-accent-foreground {\n    &:hover {\n      @media (hover: hover) {\n        color: var(--accent-foreground);\n      }\n    }\n  }\n  .hover\\:text-blue-700 {\n    &:hover {\n      @media (hover: hover) {\n        color: var(--color-blue-700);\n      }\n    }\n  }\n  .hover\\:text-blue-900 {\n    &:hover {\n      @media (hover: hover) {\n        color: var(--color-blue-900);\n      }\n    }\n  }\n  .hover\\:text-foreground {\n    &:hover {\n      @media (hover: hover) {\n        color: var(--foreground);\n      }\n    }\n  }\n  .hover\\:text-gray-200 {\n    &:hover {\n      @media (hover: hover) {\n        color: var(--color-gray-200);\n      }\n    }\n  }\n  .hover\\:text-gray-600 {\n    &:hover {\n      @media (hover: hover) {\n        color: var(--color-gray-600);\n      }\n    }\n  }\n  .hover\\:text-gray-700 {\n    &:hover {\n      @media (hover: hover) {\n        color: var(--color-gray-700);\n      }\n    }\n  }\n  .hover\\:text-red-500 {\n    &:hover {\n      @media (hover: hover) {\n        color: var(--color-red-500);\n      }\n    }\n  }\n  .hover\\:text-red-600 {\n    &:hover {\n      @media (hover: hover) {\n        color: var(--color-red-600);\n      }\n    }\n  }\n  .hover\\:text-red-700 {\n    &:hover {\n      @media (hover: hover) {\n        color: var(--color-red-700);\n      }\n    }\n  }\n  .hover\\:underline {\n    &:hover {\n      @media (hover: hover) {\n        text-decoration-line: underline;\n      }\n    }\n  }\n  .hover\\:shadow-lg {\n    &:hover {\n      @media (hover: hover) {\n        --tw-shadow: 0 10px 15px -3px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 4px 6px -4px var(--tw-shadow-color, rgb(0 0 0 / 0.1));\n        box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n      }\n    }\n  }\n  .hover\\:shadow-md {\n    &:hover {\n      @media (hover: hover) {\n        --tw-shadow: 0 4px 6px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 2px 4px -2px var(--tw-shadow-color, rgb(0 0 0 / 0.1));\n        box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n      }\n    }\n  }\n  .hover\\:shadow-sm {\n    &:hover {\n      @media (hover: hover) {\n        --tw-shadow: 0 1px 3px 0 var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 1px 2px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1));\n        box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n      }\n    }\n  }\n  .focus\\:border-blue-500 {\n    &:focus {\n      border-color: var(--color-blue-500);\n    }\n  }\n  .focus\\:border-transparent {\n    &:focus {\n      border-color: transparent;\n    }\n  }\n  .focus\\:bg-accent {\n    &:focus {\n      background-color: var(--accent);\n    }\n  }\n  .focus\\:text-accent-foreground {\n    &:focus {\n      color: var(--accent-foreground);\n    }\n  }\n  .focus\\:ring-1 {\n    &:focus {\n      --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);\n      box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n    }\n  }\n  .focus\\:ring-2 {\n    &:focus {\n      --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);\n      box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n    }\n  }\n  .focus\\:ring-blue-500 {\n    &:focus {\n      --tw-ring-color: var(--color-blue-500);\n    }\n  }\n  .focus\\:ring-gray-500 {\n    &:focus {\n      --tw-ring-color: var(--color-gray-500);\n    }\n  }\n  .focus\\:ring-green-500 {\n    &:focus {\n      --tw-ring-color: var(--color-green-500);\n    }\n  }\n  .focus\\:ring-offset-2 {\n    &:focus {\n      --tw-ring-offset-width: 2px;\n      --tw-ring-offset-shadow: var(--tw-ring-inset,) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);\n    }\n  }\n  .focus\\:outline-none {\n    &:focus {\n      --tw-outline-style: none;\n      outline-style: none;\n    }\n  }\n  .focus-visible\\:border-ring {\n    &:focus-visible {\n      border-color: var(--ring);\n    }\n  }\n  .focus-visible\\:ring-0 {\n    &:focus-visible {\n      --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);\n      box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n    }\n  }\n  .focus-visible\\:ring-\\[3px\\] {\n    &:focus-visible {\n      --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(3px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);\n      box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n    }\n  }\n  .focus-visible\\:ring-destructive\\/20 {\n    &:focus-visible {\n      --tw-ring-color: var(--destructive);\n      @supports (color: color-mix(in lab, red, red)) {\n        --tw-ring-color: color-mix(in oklab, var(--destructive) 20%, transparent);\n      }\n    }\n  }\n  .focus-visible\\:ring-ring\\/50 {\n    &:focus-visible {\n      --tw-ring-color: var(--ring);\n      @supports (color: color-mix(in lab, red, red)) {\n        --tw-ring-color: color-mix(in oklab, var(--ring) 50%, transparent);\n      }\n    }\n  }\n  .focus-visible\\:ring-offset-0 {\n    &:focus-visible {\n      --tw-ring-offset-width: 0px;\n      --tw-ring-offset-shadow: var(--tw-ring-inset,) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);\n    }\n  }\n  .focus-visible\\:outline-none {\n    &:focus-visible {\n      --tw-outline-style: none;\n      outline-style: none;\n    }\n  }\n  .disabled\\:pointer-events-none {\n    &:disabled {\n      pointer-events: none;\n    }\n  }\n  .disabled\\:cursor-not-allowed {\n    &:disabled {\n      cursor: not-allowed;\n    }\n  }\n  .disabled\\:bg-muted {\n    &:disabled {\n      background-color: var(--muted);\n    }\n  }\n  .disabled\\:text-muted-foreground {\n    &:disabled {\n      color: var(--muted-foreground);\n    }\n  }\n  .disabled\\:opacity-50 {\n    &:disabled {\n      opacity: 50%;\n    }\n  }\n  .has-\\[\\>svg\\]\\:grid-cols-\\[calc\\(var\\(--spacing\\)\\*4\\)_1fr\\] {\n    &:has(>svg) {\n      grid-template-columns: calc(var(--spacing) * 4) 1fr;\n    }\n  }\n  .has-\\[\\>svg\\]\\:gap-x-3 {\n    &:has(>svg) {\n      column-gap: calc(var(--spacing) * 3);\n    }\n  }\n  .has-\\[\\>svg\\]\\:px-2\\.5 {\n    &:has(>svg) {\n      padding-inline: calc(var(--spacing) * 2.5);\n    }\n  }\n  .has-\\[\\>svg\\]\\:px-3 {\n    &:has(>svg) {\n      padding-inline: calc(var(--spacing) * 3);\n    }\n  }\n  .has-\\[\\>svg\\]\\:px-4 {\n    &:has(>svg) {\n      padding-inline: calc(var(--spacing) * 4);\n    }\n  }\n  .aria-expanded\\:bg-accent {\n    &[aria-expanded="true"] {\n      background-color: var(--accent);\n    }\n  }\n  .aria-expanded\\:text-foreground {\n    &[aria-expanded="true"] {\n      color: var(--foreground);\n    }\n  }\n  .aria-invalid\\:border-destructive {\n    &[aria-invalid="true"] {\n      border-color: var(--destructive);\n    }\n  }\n  .aria-invalid\\:ring-destructive\\/20 {\n    &[aria-invalid="true"] {\n      --tw-ring-color: var(--destructive);\n      @supports (color: color-mix(in lab, red, red)) {\n        --tw-ring-color: color-mix(in oklab, var(--destructive) 20%, transparent);\n      }\n    }\n  }\n  .data-\\[placeholder\\]\\:text-muted-foreground {\n    &[data-placeholder] {\n      color: var(--muted-foreground);\n    }\n  }\n  .\\*\\:data-\\[slot\\=alert-description\\]\\:text-destructive\\/90 {\n    :is(& > *) {\n      &[data-slot="alert-description"] {\n        color: var(--destructive);\n        @supports (color: color-mix(in lab, red, red)) {\n          color: color-mix(in oklab, var(--destructive) 90%, transparent);\n        }\n      }\n    }\n  }\n  .sm\\:grid-cols-2 {\n    @media (width >= 40rem) {\n      grid-template-columns: repeat(2, minmax(0, 1fr));\n    }\n  }\n  .sm\\:gap-2 {\n    @media (width >= 40rem) {\n      gap: calc(var(--spacing) * 2);\n    }\n  }\n  .sm\\:p-6 {\n    @media (width >= 40rem) {\n      padding: calc(var(--spacing) * 6);\n    }\n  }\n  .sm\\:px-6 {\n    @media (width >= 40rem) {\n      padding-inline: calc(var(--spacing) * 6);\n    }\n  }\n  .md\\:grid-cols-2 {\n    @media (width >= 48rem) {\n      grid-template-columns: repeat(2, minmax(0, 1fr));\n    }\n  }\n  .md\\:text-sm {\n    @media (width >= 48rem) {\n      font-size: var(--text-sm);\n      line-height: var(--tw-leading, var(--text-sm--line-height));\n    }\n  }\n  .lg\\:grid-cols-3 {\n    @media (width >= 64rem) {\n      grid-template-columns: repeat(3, minmax(0, 1fr));\n    }\n  }\n  .lg\\:grid-cols-4 {\n    @media (width >= 64rem) {\n      grid-template-columns: repeat(4, minmax(0, 1fr));\n    }\n  }\n  .lg\\:px-8 {\n    @media (width >= 64rem) {\n      padding-inline: calc(var(--spacing) * 8);\n    }\n  }\n  .dark\\:border-0 {\n    @media (prefers-color-scheme: dark) {\n      border-style: var(--tw-border-style);\n      border-width: 0px;\n    }\n  }\n  .dark\\:border-input {\n    @media (prefers-color-scheme: dark) {\n      border-color: var(--input);\n    }\n  }\n  .dark\\:border-transparent\\! {\n    @media (prefers-color-scheme: dark) {\n      border-color: transparent !important;\n    }\n  }\n  .dark\\:bg-destructive\\/60 {\n    @media (prefers-color-scheme: dark) {\n      background-color: var(--destructive);\n      @supports (color: color-mix(in lab, red, red)) {\n        background-color: color-mix(in oklab, var(--destructive) 60%, transparent);\n      }\n    }\n  }\n  .dark\\:bg-gray-800 {\n    @media (prefers-color-scheme: dark) {\n      background-color: var(--color-gray-800);\n    }\n  }\n  .dark\\:bg-gray-900 {\n    @media (prefers-color-scheme: dark) {\n      background-color: var(--color-gray-900);\n    }\n  }\n  .dark\\:bg-input\\/30 {\n    @media (prefers-color-scheme: dark) {\n      background-color: var(--input);\n      @supports (color: color-mix(in lab, red, red)) {\n        background-color: color-mix(in oklab, var(--input) 30%, transparent);\n      }\n    }\n  }\n  .dark\\:bg-transparent {\n    @media (prefers-color-scheme: dark) {\n      background-color: transparent;\n    }\n  }\n  .dark\\:text-gray-300 {\n    @media (prefers-color-scheme: dark) {\n      color: var(--color-gray-300);\n    }\n  }\n  .dark\\:text-gray-400 {\n    @media (prefers-color-scheme: dark) {\n      color: var(--color-gray-400);\n    }\n  }\n  .dark\\:text-white {\n    @media (prefers-color-scheme: dark) {\n      color: var(--color-white);\n    }\n  }\n  .dark\\:hover\\:bg-accent\\/50 {\n    @media (prefers-color-scheme: dark) {\n      &:hover {\n        @media (hover: hover) {\n          background-color: var(--accent);\n          @supports (color: color-mix(in lab, red, red)) {\n            background-color: color-mix(in oklab, var(--accent) 50%, transparent);\n          }\n        }\n      }\n    }\n  }\n  .dark\\:hover\\:bg-input\\/50 {\n    @media (prefers-color-scheme: dark) {\n      &:hover {\n        @media (hover: hover) {\n          background-color: var(--input);\n          @supports (color: color-mix(in lab, red, red)) {\n            background-color: color-mix(in oklab, var(--input) 50%, transparent);\n          }\n        }\n      }\n    }\n  }\n  .dark\\:hover\\:text-gray-300 {\n    @media (prefers-color-scheme: dark) {\n      &:hover {\n        @media (hover: hover) {\n          color: var(--color-gray-300);\n        }\n      }\n    }\n  }\n  .dark\\:focus-visible\\:ring-destructive\\/40 {\n    @media (prefers-color-scheme: dark) {\n      &:focus-visible {\n        --tw-ring-color: var(--destructive);\n        @supports (color: color-mix(in lab, red, red)) {\n          --tw-ring-color: color-mix(in oklab, var(--destructive) 40%, transparent);\n        }\n      }\n    }\n  }\n  .dark\\:aria-invalid\\:ring-destructive\\/40 {\n    @media (prefers-color-scheme: dark) {\n      &[aria-invalid="true"] {\n        --tw-ring-color: var(--destructive);\n        @supports (color: color-mix(in lab, red, red)) {\n          --tw-ring-color: color-mix(in oklab, var(--destructive) 40%, transparent);\n        }\n      }\n    }\n  }\n  .\\[\\&_button\\:first-child\\]\\:rounded-bl-xl {\n    & button:first-child {\n      border-bottom-left-radius: calc(var(--radius) + 4px);\n    }\n  }\n  .\\[\\&_p\\]\\:leading-relaxed {\n    & p {\n      --tw-leading: var(--leading-relaxed);\n      line-height: var(--leading-relaxed);\n    }\n  }\n  .\\[\\&_svg\\]\\:pointer-events-none {\n    & svg {\n      pointer-events: none;\n    }\n  }\n  .\\[\\&_svg\\]\\:shrink-0 {\n    & svg {\n      flex-shrink: 0;\n    }\n  }\n  .\\[\\&_svg\\:not\\(\\[class\\*\\=\\\'size-\\\'\\]\\)\\]\\:size-4 {\n    & svg:not([class*=\'size-\']) {\n      width: calc(var(--spacing) * 4);\n      height: calc(var(--spacing) * 4);\n    }\n  }\n  .\\[\\&_svg\\:not\\(\\[class\\*\\=\\\'text-\\\'\\]\\)\\]\\:text-muted-foreground {\n    & svg:not([class*=\'text-\']) {\n      color: var(--muted-foreground);\n    }\n  }\n  .\\[\\&\\:\\:-webkit-scrollbar\\]\\:hidden {\n    &::-webkit-scrollbar {\n      display: none;\n    }\n  }\n  .\\[\\&\\>svg\\]\\:size-4 {\n    &>svg {\n      width: calc(var(--spacing) * 4);\n      height: calc(var(--spacing) * 4);\n    }\n  }\n  .\\[\\&\\>svg\\]\\:translate-y-0\\.5 {\n    &>svg {\n      --tw-translate-y: calc(var(--spacing) * 0.5);\n      translate: var(--tw-translate-x) var(--tw-translate-y);\n    }\n  }\n  .\\[\\&\\>svg\\]\\:text-current {\n    &>svg {\n      color: currentcolor;\n    }\n  }\n}\n@property --tw-animation-delay {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0s;\n}\n@property --tw-animation-direction {\n  syntax: "*";\n  inherits: false;\n  initial-value: normal;\n}\n@property --tw-animation-duration {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-animation-fill-mode {\n  syntax: "*";\n  inherits: false;\n  initial-value: none;\n}\n@property --tw-animation-iteration-count {\n  syntax: "*";\n  inherits: false;\n  initial-value: 1;\n}\n@property --tw-enter-blur {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0;\n}\n@property --tw-enter-opacity {\n  syntax: "*";\n  inherits: false;\n  initial-value: 1;\n}\n@property --tw-enter-rotate {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0;\n}\n@property --tw-enter-scale {\n  syntax: "*";\n  inherits: false;\n  initial-value: 1;\n}\n@property --tw-enter-translate-x {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0;\n}\n@property --tw-enter-translate-y {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0;\n}\n@property --tw-exit-blur {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0;\n}\n@property --tw-exit-opacity {\n  syntax: "*";\n  inherits: false;\n  initial-value: 1;\n}\n@property --tw-exit-rotate {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0;\n}\n@property --tw-exit-scale {\n  syntax: "*";\n  inherits: false;\n  initial-value: 1;\n}\n@property --tw-exit-translate-x {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0;\n}\n@property --tw-exit-translate-y {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0;\n}\n:root {\n  --background: oklch(1 0 0);\n  --foreground: oklch(0.145 0 0);\n  --card: oklch(1 0 0);\n  --card-foreground: oklch(0.145 0 0);\n  --popover: oklch(1 0 0);\n  --popover-foreground: oklch(0.145 0 0);\n  --primary: oklch(0.205 0 0);\n  --primary-foreground: oklch(0.985 0 0);\n  --secondary: oklch(0.97 0 0);\n  --secondary-foreground: oklch(0.205 0 0);\n  --muted: oklch(0.97 0 0);\n  --muted-foreground: oklch(0.556 0 0);\n  --accent: oklch(0.97 0 0);\n  --accent-foreground: oklch(0.205 0 0);\n  --destructive: oklch(0.577 0.245 27.325);\n  --destructive-foreground: oklch(0.577 0.245 27.325);\n  --border: oklch(0.922 0 0);\n  --input: oklch(0.922 0 0);\n  --ring: oklch(0.708 0 0);\n  --chart-1: oklch(0.646 0.222 41.116);\n  --chart-2: oklch(0.6 0.118 184.704);\n  --chart-3: oklch(0.398 0.07 227.392);\n  --chart-4: oklch(0.828 0.189 84.429);\n  --chart-5: oklch(0.769 0.188 70.08);\n  --radius: 0.625rem;\n  --sidebar: oklch(0.985 0 0);\n  --sidebar-foreground: oklch(0.145 0 0);\n  --sidebar-primary: oklch(0.205 0 0);\n  --sidebar-primary-foreground: oklch(0.985 0 0);\n  --sidebar-accent: oklch(0.97 0 0);\n  --sidebar-accent-foreground: oklch(0.205 0 0);\n  --sidebar-border: oklch(0.922 0 0);\n  --sidebar-ring: oklch(0.708 0 0);\n  --app-font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, Oxygen, Ubuntu, Cantarell, \'Open Sans\', \'Helvetica Neue\', sans-serif;\n}\n.dark-theme {\n  --background: oklch(0.145 0 0);\n  --foreground: oklch(0.985 0 0);\n  --card: oklch(0.145 0 0);\n  --card-foreground: oklch(0.985 0 0);\n  --popover: oklch(0.145 0 0);\n  --popover-foreground: oklch(0.985 0 0);\n  --primary: oklch(0.985 0 0);\n  --primary-foreground: oklch(0.205 0 0);\n  --secondary: oklch(0.269 0 0);\n  --secondary-foreground: oklch(0.985 0 0);\n  --muted: oklch(0.269 0 0);\n  --muted-foreground: oklch(0.708 0 0);\n  --accent: oklch(0.269 0 0);\n  --accent-foreground: oklch(0.985 0 0);\n  --destructive: oklch(0.396 0.141 25.723);\n  --destructive-foreground: oklch(0.637 0.237 25.331);\n  --border: oklch(0.269 0 0);\n  --input: oklch(0.269 0 0);\n  --ring: oklch(0.439 0 0);\n  --chart-1: oklch(0.488 0.243 264.376);\n  --chart-2: oklch(0.696 0.17 162.48);\n  --chart-3: oklch(0.769 0.188 70.08);\n  --chart-4: oklch(0.627 0.265 303.9);\n  --chart-5: oklch(0.645 0.246 16.439);\n  --sidebar: oklch(0.205 0 0);\n  --sidebar-foreground: oklch(0.985 0 0);\n  --sidebar-primary: oklch(0.488 0.243 264.376);\n  --sidebar-primary-foreground: oklch(0.985 0 0);\n  --sidebar-accent: oklch(0.269 0 0);\n  --sidebar-accent-foreground: oklch(0.985 0 0);\n  --sidebar-border: oklch(0.269 0 0);\n  --sidebar-ring: oklch(0.439 0 0);\n}\n@layer base {\n  * {\n    border-color: var(--border);\n    outline-color: var(--ring);\n    @supports (color: color-mix(in lab, red, red)) {\n      outline-color: color-mix(in oklab, var(--ring) 50%, transparent);\n    }\n  }\n  body {\n    background-color: var(--background);\n    color: var(--foreground);\n  }\n}\nbody {\n  box-sizing: border-box;\n  font-family: var(--app-font-family);\n}\nh1, h2, h3, h4, h5, h6 {\n  line-height: 1.3;\n}\nh1 {\n  font-size: 3rem;\n  font-weight: 800;\n}\nh2 {\n  font-size: 2.6rem;\n}\nh3 {\n  font-size: 2rem;\n}\nh4 {\n  font-size: 1.8rem;\n}\nh5 {\n  font-size: 1.5rem;\n}\nh6 {\n  font-size: 1.2rem;\n}\nbutton {\n  cursor: pointer;\n}\n.plugin-template {\n  background-color: var(--bg-color);\n  color: var(--text-color);\n  border-radius: 8px;\n  margin: 10px 0;\n  box-shadow: var(--card-shadow);\n  transition: all 0.3s ease;\n  min-height: 200px;\n  display: flex;\n  flex-direction: column;\n}\n.plugin-template-loading {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 32px;\n  text-align: center;\n  flex: 1;\n}\n.loading-spinner {\n  width: 32px;\n  height: 32px;\n  border: 3px solid var(--border-color);\n  border-top: 3px solid var(--button-primary-bg);\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin-bottom: 16px;\n}\n@keyframes spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n.plugin-template-loading p {\n  margin: 0;\n  color: var(--text-secondary);\n  transition: color 0.3s ease;\n}\n.plugin-template-error {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 32px;\n  text-align: center;\n  flex: 1;\n}\n.error-icon {\n  font-size: 32px;\n  margin-bottom: 16px;\n  color: var(--error-text);\n}\n.plugin-template-error p {\n  margin: 0;\n  color: var(--error-text);\n  background-color: var(--error-bg);\n  padding: 12px;\n  border-radius: 6px;\n  border: 1px solid var(--error-border);\n  transition: all 0.3s ease;\n}\n.plugin-template-content {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n}\n.plugin-header {\n  margin-bottom: 24px;\n  padding-bottom: 16px;\n  border-bottom: 1px solid var(--border-color);\n  transition: border-color 0.3s ease;\n}\n.plugin-header h3 {\n  margin: 0 0 8px 0;\n  font-size: 18px;\n  font-weight: 600;\n  color: var(--text-color);\n  transition: color 0.3s ease;\n}\n.plugin-header p {\n  margin: 0;\n  color: var(--text-secondary);\n  font-size: 14px;\n  transition: color 0.3s ease;\n}\n.plugin-info {\n  background-color: var(--bg-color);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  padding: 20px;\n  transition: all 0.3s ease;\n}\n.plugin-info h4 {\n  margin: 0 0 16px 0;\n  font-size: 16px;\n  font-weight: 600;\n  color: var(--text-color);\n  transition: color 0.3s ease;\n}\n.info-grid {\n  display: grid;\n  gap: 16px;\n}\n.info-item {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.info-item strong {\n  font-size: 14px;\n  font-weight: 600;\n  color: var(--text-color);\n  transition: color 0.3s ease;\n}\n.info-item ul {\n  margin: 4px 0 0 0;\n  padding-left: 20px;\n  list-style: none;\n}\n.info-item li {\n  font-size: 14px;\n  color: var(--text-secondary);\n  margin-bottom: 4px;\n  transition: color 0.3s ease;\n}\n@media (max-width: 768px) {\n  .plugin-template {\n    padding: 16px;\n    margin: 8px 0;\n  }\n  .info-grid {\n    grid-template-columns: 1fr;\n  }\n}\n@media (prefers-contrast: high) {\n  .plugin-template {\n    border: 2px solid var(--plugin-text-color);\n  }\n}\n@media (prefers-reduced-motion: reduce) {\n  .plugin-template, .plugin-header, .plugin-info, .info-item strong, .info-item li, .plugin-template-loading p {\n    transition: none;\n  }\n  .loading-spinner {\n    animation: none;\n  }\n}\n.chat-session-item:hover .delete-session-btn {\n  opacity: 100%;\n}\n.delete-session-btn {\n  transition-property: opacity;\n  transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));\n  transition-duration: var(--tw-duration, var(--default-transition-duration));\n  --tw-duration: 200ms;\n  transition-duration: 200ms;\n}\n.delete-session-btn {\n  transition: all 0.2s ease-in-out;\n}\n.chat-session-item:hover .delete-session-btn {\n  opacity: 1;\n}\n.delete-session-btn {\n  transition: all 0.2s ease-in-out;\n}\n.chat-session-item:hover .delete-session-btn {\n  opacity: 1;\n}\n.cv-toggle {\n  display: flex;\n  background-color: var(--tertiary-bg);\n  border-radius: 0.5rem;\n  padding: 0.25rem;\n  transition: background-color 0.3s ease;\n}\n.cv-toggle-btn {\n  display: flex;\n  align-items: center;\n  padding: 0.5rem 0.75rem;\n  border-radius: 0.375rem;\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: var(--text-muted);\n  transition: color 150ms ease, background-color 150ms ease, box-shadow 150ms ease;\n}\n.cv-toggle-btn:hover {\n  color: var(--text-secondary);\n}\n.cv-toggle-btn--active {\n  background-color: var(--card-bg);\n  color: var(--text-color);\n  box-shadow: var(--shadow-sm);\n}\n.ccs-container {\n  color: var(--text-color);\n}\n.ccs-card {\n  background-color: var(--card-bg);\n  border: 1px solid var(--card-border);\n  border-radius: 0.5rem;\n  transition: background-color 0.3s ease, border-color 0.3s ease;\n}\n.ccs-card-title {\n  color: var(--text-color);\n}\n.ccs-label {\n  color: var(--text-secondary);\n}\n.ccs-help {\n  color: var(--text-muted);\n}\n.ccs-input {\n  background-color: var(--input-bg);\n  color: var(--text-color);\n  border-color: var(--border-color);\n  transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;\n}\n.ccs-input:focus {\n  outline: none;\n  border-color: var(--input-focus-border);\n  box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.1);\n}\n.ccs-info {\n  background-color: var(--info-bg);\n  border-left: 4px solid var(--info-border);\n  transition: background-color 0.3s ease, border-color 0.3s ease;\n}\n.ccs-divider {\n  border-top: 1px solid var(--border-color);\n  transition: border-color 0.3s ease;\n}\n.dmm-trigger {\n  background-color: var(--tertiary-bg);\n  color: var(--text-color);\n  padding: 0.5rem 1rem;\n  border-radius: 0.5rem;\n  box-shadow: var(--shadow-sm);\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  transition: background-color 150ms ease, box-shadow 150ms ease, color 150ms ease;\n}\n.dmm-trigger:hover {\n  background-color: var(--hover-color);\n}\n.dmm-badge {\n  background-color: var(--button-primary-bg);\n  color: #ffffff;\n  border-radius: 9999px;\n  padding: 0 0.5rem;\n  font-size: 0.875rem;\n}\n.dmm-backdrop {\n  position: fixed;\n  inset: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  backdrop-filter: blur(6px);\n  background-color: var(--modal-backdrop);\n  z-index: 40;\n  transition: background-color 0.3s ease;\n}\n.dmm-modal {\n  background-color: var(--paper-bg);\n  color: var(--text-secondary);\n  border-radius: 1rem;\n  box-shadow: var(--modal-shadow);\n  max-width: 64rem;\n  width: 100%;\n  margin: 0 1rem;\n  transition: background-color 0.3s ease, color 0.3s ease;\n}\n.dmm-modal-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1rem 1.5rem;\n  border-bottom: 1px solid var(--border-color);\n  transition: border-color 0.3s ease;\n}\n.dmm-title {\n  font-size: 1.125rem;\n  font-weight: 600;\n  color: var(--text-color);\n}\n.dmm-close {\n  color: var(--text-muted);\n  transition: color 150ms ease;\n}\n.dmm-close:hover {\n  color: var(--text-secondary);\n}\n.dmm-body {\n  padding: 1.5rem;\n  color: var(--text-secondary);\n}\n.dmm-upload-btn {\n  background-color: var(--button-primary-bg);\n  color: var(--button-primary-text);\n  padding: 0.5rem 0.75rem;\n  border-radius: 0.5rem;\n  display: inline-flex;\n  align-items: center;\n  font-size: 0.875rem;\n  transition: background-color 150ms ease, opacity 150ms ease;\n}\n.dmm-upload-btn:hover {\n  opacity: 0.9;\n}\n.dmm-upload-btn:disabled {\n  opacity: 0.5;\n}\n.dlist-container {\n  background-color: var(--card-bg);\n  border-radius: 0.5rem;\n  transition: background-color 0.3s ease;\n}\n.dlist-scroll {\n  height: 100%;\n  overflow-y: auto;\n}\n.ditem-card {\n  background-color: var(--card-bg);\n  border: 1px solid var(--card-border);\n  border-radius: 0.5rem;\n  padding: 1rem;\n  transition: box-shadow 150ms ease, background-color 150ms ease;\n}\n.ditem-card:hover {\n  box-shadow: var(--shadow-sm);\n  background-color: var(--hover-color);\n}\n.ditem-title {\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: var(--text-color);\n}\n.ditem-meta {\n  margin-top: 0.25rem;\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  font-size: 0.75rem;\n  color: var(--text-muted);\n}\n.ditem-dates {\n  margin-top: 0.5rem;\n  font-size: 0.75rem;\n  color: var(--text-muted);\n}\n.ditem-status-badge {\n  display: inline-flex;\n  align-items: center;\n  padding: 0.125rem 0.625rem;\n  border-radius: 9999px;\n  font-size: 0.75rem;\n  font-weight: 500;\n}\n.ditem-status-processing {\n  background-color: var(--status-processing-bg);\n  color: var(--status-processing-text);\n}\n.ditem-status-processed {\n  background-color: var(--status-success-bg);\n  color: var(--status-success-text);\n}\n.ditem-status-failed {\n  background-color: var(--status-error-bg);\n  color: var(--status-error-text);\n}\n.ditem-status-default {\n  background-color: var(--tertiary-bg);\n  color: var(--text-color);\n}\n.ditem-action-btn {\n  padding: 0.25rem;\n  color: var(--text-muted);\n  transition: color 150ms ease;\n}\n.ditem-action-btn:hover {\n  color: var(--text-secondary);\n}\n.ditem-action-btn.danger:hover {\n  color: var(--button-danger-bg);\n}\n@property --tw-translate-x {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0;\n}\n@property --tw-translate-y {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0;\n}\n@property --tw-translate-z {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0;\n}\n@property --tw-scale-x {\n  syntax: "*";\n  inherits: false;\n  initial-value: 1;\n}\n@property --tw-scale-y {\n  syntax: "*";\n  inherits: false;\n  initial-value: 1;\n}\n@property --tw-scale-z {\n  syntax: "*";\n  inherits: false;\n  initial-value: 1;\n}\n@property --tw-rotate-x {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-rotate-y {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-rotate-z {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-skew-x {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-skew-y {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-pan-x {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-pan-y {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-pinch-zoom {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-space-y-reverse {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0;\n}\n@property --tw-space-x-reverse {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0;\n}\n@property --tw-divide-x-reverse {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0;\n}\n@property --tw-border-style {\n  syntax: "*";\n  inherits: false;\n  initial-value: solid;\n}\n@property --tw-divide-y-reverse {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0;\n}\n@property --tw-leading {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-font-weight {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-tracking {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-ordinal {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-slashed-zero {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-numeric-figure {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-numeric-spacing {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-numeric-fraction {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-shadow-color {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-shadow-alpha {\n  syntax: "<percentage>";\n  inherits: false;\n  initial-value: 100%;\n}\n@property --tw-inset-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-inset-shadow-color {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-inset-shadow-alpha {\n  syntax: "<percentage>";\n  inherits: false;\n  initial-value: 100%;\n}\n@property --tw-ring-color {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-ring-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-inset-ring-color {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-inset-ring-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-ring-inset {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-ring-offset-width {\n  syntax: "<length>";\n  inherits: false;\n  initial-value: 0px;\n}\n@property --tw-ring-offset-color {\n  syntax: "*";\n  inherits: false;\n  initial-value: #fff;\n}\n@property --tw-ring-offset-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-outline-style {\n  syntax: "*";\n  inherits: false;\n  initial-value: solid;\n}\n@property --tw-blur {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-brightness {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-contrast {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-grayscale {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-hue-rotate {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-invert {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-opacity {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-saturate {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-sepia {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-drop-shadow {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-drop-shadow-color {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-drop-shadow-alpha {\n  syntax: "<percentage>";\n  inherits: false;\n  initial-value: 100%;\n}\n@property --tw-drop-shadow-size {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-backdrop-blur {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-backdrop-brightness {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-backdrop-contrast {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-backdrop-grayscale {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-backdrop-hue-rotate {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-backdrop-invert {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-backdrop-opacity {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-backdrop-saturate {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-backdrop-sepia {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-duration {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-ease {\n  syntax: "*";\n  inherits: false;\n}\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n@keyframes ping {\n  75%, 100% {\n    transform: scale(2);\n    opacity: 0;\n  }\n}\n@keyframes pulse {\n  50% {\n    opacity: 0.5;\n  }\n}\n@keyframes bounce {\n  0%, 100% {\n    transform: translateY(-25%);\n    animation-timing-function: cubic-bezier(0.8, 0, 1, 1);\n  }\n  50% {\n    transform: none;\n    animation-timing-function: cubic-bezier(0, 0, 0.2, 1);\n  }\n}\n@keyframes enter {\n  from {\n    opacity: var(--tw-enter-opacity,1);\n    transform: translate3d(var(--tw-enter-translate-x,0),var(--tw-enter-translate-y,0),0)scale3d(var(--tw-enter-scale,1),var(--tw-enter-scale,1),var(--tw-enter-scale,1))rotate(var(--tw-enter-rotate,0));\n    filter: blur(var(--tw-enter-blur,0));\n  }\n}\n@layer properties {\n  @supports ((-webkit-hyphens: none) and (not (margin-trim: inline))) or ((-moz-orient: inline) and (not (color:rgb(from red r g b)))) {\n    *, ::before, ::after, ::backdrop {\n      --tw-translate-x: 0;\n      --tw-translate-y: 0;\n      --tw-translate-z: 0;\n      --tw-scale-x: 1;\n      --tw-scale-y: 1;\n      --tw-scale-z: 1;\n      --tw-rotate-x: initial;\n      --tw-rotate-y: initial;\n      --tw-rotate-z: initial;\n      --tw-skew-x: initial;\n      --tw-skew-y: initial;\n      --tw-pan-x: initial;\n      --tw-pan-y: initial;\n      --tw-pinch-zoom: initial;\n      --tw-space-y-reverse: 0;\n      --tw-space-x-reverse: 0;\n      --tw-divide-x-reverse: 0;\n      --tw-border-style: solid;\n      --tw-divide-y-reverse: 0;\n      --tw-leading: initial;\n      --tw-font-weight: initial;\n      --tw-tracking: initial;\n      --tw-ordinal: initial;\n      --tw-slashed-zero: initial;\n      --tw-numeric-figure: initial;\n      --tw-numeric-spacing: initial;\n      --tw-numeric-fraction: initial;\n      --tw-shadow: 0 0 #0000;\n      --tw-shadow-color: initial;\n      --tw-shadow-alpha: 100%;\n      --tw-inset-shadow: 0 0 #0000;\n      --tw-inset-shadow-color: initial;\n      --tw-inset-shadow-alpha: 100%;\n      --tw-ring-color: initial;\n      --tw-ring-shadow: 0 0 #0000;\n      --tw-inset-ring-color: initial;\n      --tw-inset-ring-shadow: 0 0 #0000;\n      --tw-ring-inset: initial;\n      --tw-ring-offset-width: 0px;\n      --tw-ring-offset-color: #fff;\n      --tw-ring-offset-shadow: 0 0 #0000;\n      --tw-outline-style: solid;\n      --tw-blur: initial;\n      --tw-brightness: initial;\n      --tw-contrast: initial;\n      --tw-grayscale: initial;\n      --tw-hue-rotate: initial;\n      --tw-invert: initial;\n      --tw-opacity: initial;\n      --tw-saturate: initial;\n      --tw-sepia: initial;\n      --tw-drop-shadow: initial;\n      --tw-drop-shadow-color: initial;\n      --tw-drop-shadow-alpha: 100%;\n      --tw-drop-shadow-size: initial;\n      --tw-backdrop-blur: initial;\n      --tw-backdrop-brightness: initial;\n      --tw-backdrop-contrast: initial;\n      --tw-backdrop-grayscale: initial;\n      --tw-backdrop-hue-rotate: initial;\n      --tw-backdrop-invert: initial;\n      --tw-backdrop-opacity: initial;\n      --tw-backdrop-saturate: initial;\n      --tw-backdrop-sepia: initial;\n      --tw-duration: initial;\n      --tw-ease: initial;\n      --tw-animation-delay: 0s;\n      --tw-animation-direction: normal;\n      --tw-animation-duration: initial;\n      --tw-animation-fill-mode: none;\n      --tw-animation-iteration-count: 1;\n      --tw-enter-blur: 0;\n      --tw-enter-opacity: 1;\n      --tw-enter-rotate: 0;\n      --tw-enter-scale: 1;\n      --tw-enter-translate-x: 0;\n      --tw-enter-translate-y: 0;\n      --tw-exit-blur: 0;\n      --tw-exit-opacity: 1;\n      --tw-exit-rotate: 0;\n      --tw-exit-scale: 1;\n      --tw-exit-translate-x: 0;\n      --tw-exit-translate-y: 0;\n    }\n  }\n}\n',""]);const i=s},7669:(e,n,t)=>{t.d(n,{A:()=>i});var r=t(1601),o=t.n(r),a=t(6314),s=t.n(a)()(o());s.push([e.id,"/*! tailwindcss v4.1.14 | MIT License | https://tailwindcss.com */\n:root {\n  --bg-color: #ffffff;\n  --paper-bg: #ffffff;\n  --secondary-bg: #f5f5f5;\n  --tertiary-bg: #f9fafb;\n  --text-color: #333333;\n  --text-secondary: #666666;\n  --text-muted: #999999;\n  --border-color: rgba(0, 0, 0, 0.12);\n  --hover-color: rgba(0, 0, 0, 0.05);\n  --active-bg: rgba(0, 0, 0, 0.1);\n  --input-bg: #ffffff;\n  --input-border: rgba(0, 0, 0, 0.2);\n  --input-focus-border: #2196f3;\n  --button-primary-bg: #2196f3;\n  --button-primary-text: #ffffff;\n  --button-secondary-bg: #e0e0e0;\n  --button-secondary-text: #333333;\n  --button-danger-bg: #f44336;\n  --button-danger-text: #ffffff;\n  --status-success-color: #4caf50;\n  --status-error-color: #f44336;\n  --status-checking-color: #ff9800;\n  --status-processing-bg: #fef3c7;\n  --status-processing-text: #92400e;\n  --status-success-bg: #d1fae5;\n  --status-success-text: #065f46;\n  --status-error-bg: #fee2e2;\n  --status-error-text: #991b1b;\n  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);\n  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);\n  --card-bg: #ffffff;\n  --card-border: #e5e7eb;\n  --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  --modal-backdrop: rgba(115, 112, 112, 0.7);\n  --modal-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n  --error-bg: #fee2e2;\n  --error-text: #b91c1c;\n  --error-border: #f87171;\n  --info-bg: #eff6ff;\n  --info-border: #60a5fa;\n  --info-text: #1e40af;\n}\n* {\n  box-sizing: border-box;\n}\n.flex {\n  display: flex;\n}\n.flex-col {\n  flex-direction: column;\n}\n.flex-row {\n  flex-direction: row;\n}\n.flex-1 {\n  flex: 1;\n}\n.flex-none {\n  flex: none;\n}\n.items-center {\n  align-items: center;\n}\n.items-start {\n  align-items: flex-start;\n}\n.items-end {\n  align-items: flex-end;\n}\n.justify-center {\n  justify-content: center;\n}\n.justify-between {\n  justify-content: space-between;\n}\n.justify-start {\n  justify-content: flex-start;\n}\n.justify-end {\n  justify-content: flex-end;\n}\n.gap-1 {\n  gap: 0.25rem;\n}\n.gap-2 {\n  gap: 0.5rem;\n}\n.gap-3 {\n  gap: 0.75rem;\n}\n.gap-4 {\n  gap: 1rem;\n}\n.gap-6 {\n  gap: 1.5rem;\n}\n.gap-8 {\n  gap: 2rem;\n}\n.p-0 {\n  padding: 0;\n}\n.p-1 {\n  padding: 0.25rem;\n}\n.p-2 {\n  padding: 0.5rem;\n}\n.p-3 {\n  padding: 0.75rem;\n}\n.p-4 {\n  padding: 1rem;\n}\n.p-6 {\n  padding: 1.5rem;\n}\n.p-8 {\n  padding: 2rem;\n}\n.px-2 {\n  padding-left: 0.5rem;\n  padding-right: 0.5rem;\n}\n.px-3 {\n  padding-left: 0.75rem;\n  padding-right: 0.75rem;\n}\n.px-4 {\n  padding-left: 1rem;\n  padding-right: 1rem;\n}\n.px-6 {\n  padding-left: 1.5rem;\n  padding-right: 1.5rem;\n}\n.py-1 {\n  padding-top: 0.25rem;\n  padding-bottom: 0.25rem;\n}\n.py-2 {\n  padding-top: 0.5rem;\n  padding-bottom: 0.5rem;\n}\n.py-3 {\n  padding-top: 0.75rem;\n  padding-bottom: 0.75rem;\n}\n.py-4 {\n  padding-top: 1rem;\n  padding-bottom: 1rem;\n}\n.m-0 {\n  margin: 0;\n}\n.m-1 {\n  margin: 0.25rem;\n}\n.m-2 {\n  margin: 0.5rem;\n}\n.m-3 {\n  margin: 0.75rem;\n}\n.m-4 {\n  margin: 1rem;\n}\n.mx-auto {\n  margin-left: auto;\n  margin-right: auto;\n}\n.my-2 {\n  margin-top: 0.5rem;\n  margin-bottom: 0.5rem;\n}\n.my-4 {\n  margin-top: 1rem;\n  margin-bottom: 1rem;\n}\n.mt-1 {\n  margin-top: 0.25rem;\n}\n.mt-2 {\n  margin-top: 0.5rem;\n}\n.mt-4 {\n  margin-top: 1rem;\n}\n.mb-2 {\n  margin-bottom: 0.5rem;\n}\n.mb-4 {\n  margin-bottom: 1rem;\n}\n.ml-2 {\n  margin-left: 0.5rem;\n}\n.mr-2 {\n  margin-right: 0.5rem;\n}\n.w-full {\n  width: 100%;\n}\n.w-auto {\n  width: auto;\n}\n.w-fit {\n  width: fit-content;\n}\n.h-full {\n  height: 100%;\n}\n.h-auto {\n  height: auto;\n}\n.h-fit {\n  height: fit-content;\n}\n.min-h-0 {\n  min-height: 0;\n}\n.max-w-xs {\n  max-width: 20rem;\n}\n.max-w-sm {\n  max-width: 24rem;\n}\n.max-w-md {\n  max-width: 28rem;\n}\n.max-w-lg {\n  max-width: 32rem;\n}\n.max-w-xl {\n  max-width: 36rem;\n}\n.relative {\n  position: relative;\n}\n.absolute {\n  position: absolute;\n}\n.fixed {\n  position: fixed;\n}\n.top-0 {\n  top: 0;\n}\n.right-0 {\n  right: 0;\n}\n.bottom-0 {\n  bottom: 0;\n}\n.left-0 {\n  left: 0;\n}\n.border {\n  border: 1px solid var(--border-color);\n}\n.border-t {\n  border-top: 1px solid var(--border-color);\n}\n.border-b {\n  border-bottom: 1px solid var(--border-color);\n}\n.border-l {\n  border-left: 1px solid var(--border-color);\n}\n.border-r {\n  border-right: 1px solid var(--border-color);\n}\n.border-none {\n  border: none;\n}\n.rounded {\n  border-radius: 0.25rem;\n}\n.rounded-md {\n  border-radius: 0.375rem;\n}\n.rounded-lg {\n  border-radius: 0.5rem;\n}\n.rounded-xl {\n  border-radius: 0.75rem;\n}\n.rounded-2xl {\n  border-radius: 1rem;\n}\n.rounded-full {\n  border-radius: 9999px;\n}\n.bg-transparent {\n  background-color: transparent;\n}\n.bg-white {\n  background-color: #ffffff;\n}\n.bg-gray-50 {\n  background-color: #f9fafb;\n}\n.bg-gray-100 {\n  background-color: #f3f4f6;\n}\n.bg-gray-200 {\n  background-color: #e5e7eb;\n}\n.bg-blue-500 {\n  background-color: #3b82f6;\n}\n.bg-blue-600 {\n  background-color: #2563eb;\n}\n.bg-red-500 {\n  background-color: #ef4444;\n}\n.bg-green-500 {\n  background-color: #10b981;\n}\n.text-xs {\n  font-size: 0.75rem;\n  line-height: 1rem;\n}\n.text-sm {\n  font-size: 0.875rem;\n  line-height: 1.25rem;\n}\n.text-base {\n  font-size: 1rem;\n  line-height: 1.5rem;\n}\n.text-lg {\n  font-size: 1.125rem;\n  line-height: 1.75rem;\n}\n.text-xl {\n  font-size: 1.25rem;\n  line-height: 1.75rem;\n}\n.font-normal {\n  font-weight: 400;\n}\n.font-medium {\n  font-weight: 500;\n}\n.font-semibold {\n  font-weight: 600;\n}\n.font-bold {\n  font-weight: 700;\n}\n.text-left {\n  text-align: left;\n}\n.text-center {\n  text-align: center;\n}\n.text-right {\n  text-align: right;\n}\n.text-white {\n  color: #ffffff;\n}\n.text-gray-500 {\n  color: #6b7280;\n}\n.text-gray-600 {\n  color: #4b5563;\n}\n.text-gray-700 {\n  color: #374151;\n}\n.text-gray-900 {\n  color: #111827;\n}\n.shadow-sm {\n  box-shadow: var(--shadow-sm);\n}\n.shadow {\n  box-shadow: var(--shadow-md);\n}\n.shadow-md {\n  box-shadow: var(--shadow-md);\n}\n.shadow-lg {\n  box-shadow: var(--shadow-lg);\n}\n.shadow-xl {\n  box-shadow: var(--shadow-xl);\n}\n.overflow-hidden {\n  overflow: hidden;\n}\n.overflow-auto {\n  overflow: auto;\n}\n.overflow-y-auto {\n  overflow-y: auto;\n}\n.overflow-x-hidden {\n  overflow-x: hidden;\n}\n.cursor-pointer {\n  cursor: pointer;\n}\n.cursor-not-allowed {\n  cursor: not-allowed;\n}\n.opacity-50 {\n  opacity: 0.5;\n}\n.opacity-70 {\n  opacity: 0.7;\n}\n.opacity-90 {\n  opacity: 0.9;\n}\n.transition {\n  transition: all 0.15s ease-in-out;\n}\n.transition-colors {\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out;\n}\n.transition-transform {\n  transition: transform 0.15s ease-in-out;\n}\n.scale-105 {\n  transform: scale(1.05);\n}\n.scale-110 {\n  transform: scale(1.1);\n}\n.hover\\:opacity-90:hover {\n  opacity: 0.9;\n}\n.hover\\:scale-105:hover {\n  transform: scale(1.05);\n}\n.hover\\:bg-blue-600:hover {\n  background-color: #2563eb;\n}\n.focus\\:outline-none:focus {\n  outline: none;\n}\n.focus\\:ring-2:focus {\n  box-shadow: 0 0 0 2px var(--button-primary-bg);\n}\n.disabled\\:opacity-50:disabled {\n  opacity: 0.5;\n}\n.disabled\\:cursor-not-allowed:disabled {\n  cursor: not-allowed;\n}\n.braindrive-chat-container {\n  color: var(--text-color);\n  background-color: var(--bg-color);\n  transition: background-color 0.3s ease, color 0.3s ease;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  max-height: 100%;\n  width: 100%;\n  overflow: hidden;\n  position: relative;\n}\n.chat-paper {\n  background-color: var(--paper-bg);\n  border-radius: 0.5rem;\n  box-shadow: var(--shadow-lg);\n  overflow: hidden;\n  transition: background-color 0.3s ease, box-shadow 0.3s ease;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  max-height: 100%;\n  min-height: 0;\n  position: relative;\n}\n.chat-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.75rem 1rem;\n  border-bottom: 1px solid var(--border-color);\n  background-color: var(--paper-bg);\n  flex-shrink: 0;\n}\n.chat-controls {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n.chat-history-container {\n  position: relative;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  min-height: 0;\n  max-height: 100%;\n  overflow: hidden;\n}\n.chat-history {\n  flex: 1;\n  overflow-y: auto;\n  overflow-x: hidden;\n  padding: 1rem 1rem 6rem;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  scrollbar-width: thin;\n  scrollbar-color: var(--border-color) transparent;\n  min-height: 0;\n  max-height: 100%;\n  height: 0;\n}\n.chat-history::-webkit-scrollbar {\n  width: 6px;\n}\n.chat-history::-webkit-scrollbar-track {\n  background: transparent;\n}\n.chat-history::-webkit-scrollbar-thumb {\n  background-color: var(--border-color);\n  border-radius: 3px;\n}\n.chat-input-container {\n  display: flex;\n  padding: 1rem;\n  background-color: var(--paper-bg);\n  flex-shrink: 0;\n  border: none;\n}\n.chat-input-wrapper {\n  position: relative;\n  flex: 1;\n  max-width: 100%;\n  display: flex;\n  align-items: stretch;\n  border: none;\n}\n.input-with-buttons {\n  position: relative;\n  flex: 1;\n  border: 1px solid var(--border-color);\n  border-radius: 0.5rem;\n  background-color: var(--input-bg);\n  transition: border-color 0.3s ease;\n  padding: 0.25rem 0.5rem;\n}\n.input-with-buttons:focus-within {\n  border-color: var(--button-primary-bg);\n}\n.chat-input-row {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.chat-input-row.multiline {\n  align-items: flex-end;\n}\n.chat-input {\n  width: 100%;\n  padding: 0.5rem 0.75rem;\n  border: none !important;\n  border-radius: 0.5rem;\n  background-color: transparent;\n  color: var(--text-color);\n  resize: none;\n  min-height: calc(1.5em + 0.5rem);\n  max-height: calc(1.5em * 4 + 0.5rem);\n  overflow-y: auto;\n  scrollbar-width: thin;\n  scrollbar-color: var(--border-color) transparent;\n  font-family: inherit;\n  font-size: inherit;\n  line-height: 1.5;\n  box-shadow: none !important;\n  outline: none;\n}\n.chat-input:focus {\n  outline: none;\n}\n.resize-handle {\n  height: 8px;\n  background-color: transparent;\n  cursor: row-resize;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  position: relative;\n  transition: background-color 0.2s ease;\n}\n.resize-handle:hover {\n  background-color: var(--border-color);\n}\n.resize-handle-line {\n  width: 40px;\n  height: 2px;\n  background-color: var(--border-color);\n  border-radius: 1px;\n  transition: all 0.2s ease;\n}\n.resize-handle:hover .resize-handle-line {\n  width: 60px;\n  background-color: var(--button-primary-bg);\n}\n.history-section {\n  border-top: 1px solid var(--border-color);\n  background-color: var(--paper-bg);\n  padding: 1rem;\n  flex-shrink: 0;\n  transition: padding 0.3s ease;\n}\n.history-section.collapsed {\n  padding: 0.5rem 1rem;\n}\n.history-header {\n  margin-bottom: 0.75rem;\n}\n.history-list {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n  max-height: calc(40vh - 60px);\n  overflow-y: auto;\n  scrollbar-width: thin;\n  scrollbar-color: var(--border-color) transparent;\n  padding-right: 8px;\n  margin-bottom: 8px;\n}\n.history-list::-webkit-scrollbar {\n  width: 4px;\n}\n.history-list::-webkit-scrollbar-track {\n  background: transparent;\n}\n.history-list::-webkit-scrollbar-thumb {\n  background-color: var(--border-color);\n  border-radius: 2px;\n}\n.chat-header-redesigned {\n  display: grid;\n  grid-template-columns: 1fr auto auto 1.5fr auto;\n  align-items: center;\n  border-bottom: 1px solid var(--border-color);\n  background-color: var(--paper-bg);\n  flex-shrink: 0;\n  gap: 1.5rem;\n  min-height: 64px;\n}\n.header-model-section {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  justify-self: start;\n}\n.header-docs-section {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  justify-self: start;\n  min-width: 0;\n}\n.header-persona-section {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  justify-self: start;\n  min-width: 0;\n}\n.header-history-section {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  justify-self: start;\n  min-width: 0;\n  max-width: none;\n  width: 100%;\n}\n.header-actions-section {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  justify-self: end;\n}\n.header-new-chat-button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 36px;\n  height: 36px;\n  padding: 0.5rem;\n  background-color: var(--button-primary-bg);\n  color: var(--button-primary-text);\n  border: none;\n  border-radius: 0.375rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.header-new-chat-button:hover:not(:disabled) {\n  opacity: 0.9;\n  transform: translateY(-1px);\n  box-shadow: var(--shadow-sm);\n}\n.header-new-chat-button:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n  transform: none;\n}\n.header-label {\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: var(--text-color);\n  white-space: nowrap;\n  opacity: 0.8;\n  min-width: fit-content;\n}\n.header-loading {\n  font-size: 0.875rem;\n  color: var(--text-color);\n  opacity: 0.7;\n}\n.header-select {\n  padding: 0.5rem 0.75rem;\n  border: 1px solid var(--border-color);\n  border-radius: 0.375rem;\n  background-color: var(--input-bg);\n  color: var(--text-color);\n  font-size: 0.875rem;\n  transition: border-color 0.2s ease, box-shadow 0.2s ease;\n  min-height: 40px;\n}\n.header-select:focus {\n  outline: none;\n  border-color: var(--button-primary-bg);\n  box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.1);\n}\n.header-model-section .searchable-dropdown {\n  flex: 1 1 0%;\n  min-width: 0;\n}\n.header-model-section .searchable-dropdown-trigger, .header-model-section .header-select {\n  min-width: 0;\n  max-width: 100%;\n  flex: 1 1 auto;\n}\n.header-persona-section .header-select {\n  min-width: 0;\n  max-width: 100%;\n  flex: 1 1 auto;\n}\n.header-select-history {\n  flex: 1 1 0%;\n  min-width: 0;\n}\n.searchable-dropdown {\n  position: relative;\n  min-width: 0;\n}\n.searchable-dropdown.disabled {\n  pointer-events: none;\n}\n.searchable-dropdown-trigger {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 0.5rem;\n  width: 100%;\n  background-color: var(--input-bg);\n  color: var(--text-color);\n}\n.searchable-dropdown-trigger:focus {\n  outline: none;\n  border-color: var(--button-primary-bg);\n  box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.1);\n}\n.searchable-dropdown-value {\n  flex: 1;\n  min-width: 0;\n  text-align: left;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.searchable-dropdown-icon {\n  opacity: 0.6;\n  font-size: 0.75rem;\n}\n.searchable-dropdown-menu {\n  position: absolute;\n  z-index: 20;\n  top: calc(100% + 0.35rem);\n  left: 0;\n  right: 0;\n  background-color: var(--paper-bg);\n  border: 1px solid var(--border-color);\n  border-radius: 0.5rem;\n  box-shadow: var(--shadow-md);\n  display: flex;\n  flex-direction: column;\n  max-height: 320px;\n  overflow: hidden;\n}\n.searchable-dropdown-search {\n  padding: 0.5rem;\n  border-bottom: 1px solid var(--border-color);\n}\n.searchable-dropdown-input {\n  width: 100%;\n  padding: 0.4rem 0.5rem;\n  font-size: 0.875rem;\n  border: 1px solid var(--border-color);\n  border-radius: 0.375rem;\n  background-color: var(--input-bg);\n  color: var(--text-color);\n}\n.searchable-dropdown-input:focus {\n  outline: none;\n  border-color: var(--button-primary-bg);\n  box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.1);\n}\n.searchable-dropdown-options {\n  padding: 0.25rem 0;\n  overflow-y: auto;\n}\n.searchable-dropdown-option {\n  padding: 0.5rem 0.75rem;\n  font-size: 0.875rem;\n  cursor: pointer;\n  display: flex;\n  flex-direction: column;\n  gap: 0.15rem;\n}\n.searchable-dropdown-option-content {\n  display: flex;\n  flex-direction: column;\n  gap: 0.15rem;\n}\n.searchable-dropdown-option:hover, .searchable-dropdown-option.active {\n  background-color: rgba(33, 150, 243, 0.08);\n}\n.searchable-dropdown-option.selected {\n  font-weight: 600;\n}\n.searchable-dropdown-option.disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.searchable-dropdown-option-label {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.searchable-dropdown-option-description {\n  font-size: 0.75rem;\n  color: var(--text-muted);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.searchable-dropdown-empty {\n  padding: 0.75rem;\n  font-size: 0.8125rem;\n  color: var(--text-muted);\n  text-align: center;\n}\n.header-icon-only {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 36px;\n  height: 36px;\n  border: none;\n  border-radius: 0.375rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  flex-shrink: 0;\n  background-color: transparent;\n  color: var(--text-color);\n  opacity: 0.7;\n}\n.header-icon-only:hover:not(:disabled) {\n  opacity: 1;\n  background-color: var(--border-color);\n  transform: translateY(-1px);\n}\n.header-icon-only:disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n.header-icon-only:disabled:hover {\n  background-color: transparent;\n  transform: none;\n}\n.header-icon-danger:hover:not(:disabled) {\n  background-color: rgba(244, 67, 54, 0.1);\n  color: var(--button-danger-bg);\n}\n.header-icon-streaming.active {\n  color: var(--button-primary-bg);\n  opacity: 1;\n}\n.header-icon-streaming.inactive {\n  color: var(--text-color);\n  opacity: 0.5;\n}\n.header-icon-streaming.active:hover:not(:disabled) {\n  background-color: rgba(33, 150, 243, 0.1);\n  color: var(--button-primary-bg);\n}\n.header-icon-streaming.inactive:hover:not(:disabled) {\n  background-color: var(--border-color);\n  color: var(--text-color);\n  opacity: 0.8;\n}\n.header-icon-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 40px;\n  height: 40px;\n  border: none;\n  border-radius: 0.375rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  flex-shrink: 0;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n}\n.header-icon-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.header-icon-btn-primary {\n  background-color: var(--button-primary-bg);\n  color: var(--button-primary-text);\n}\n.header-icon-btn-primary:hover:not(:disabled) {\n  opacity: 0.9;\n  transform: translateY(-1px);\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);\n}\n.header-icon-btn-secondary {\n  background-color: var(--button-secondary-bg);\n  color: var(--button-secondary-text);\n}\n.header-icon-btn-secondary:hover:not(:disabled) {\n  opacity: 0.9;\n  transform: translateY(-1px);\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);\n}\n.header-icon-btn-danger {\n  background-color: var(--button-danger-bg);\n  color: var(--button-danger-text);\n}\n.header-icon-btn-danger:hover:not(:disabled) {\n  opacity: 0.9;\n  transform: translateY(-1px);\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);\n}\n.streaming-toggle {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  padding: 0.25rem;\n}\n.toggle-input {\n  display: none;\n}\n.toggle-label-modern {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  cursor: pointer;\n  user-select: none;\n}\n.toggle-slider {\n  position: relative;\n  width: 44px;\n  height: 24px;\n  background-color: var(--border-color);\n  border-radius: 12px;\n  transition: background-color 0.2s ease;\n  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);\n}\n.toggle-slider::before {\n  content: '';\n  position: absolute;\n  top: 2px;\n  left: 2px;\n  width: 20px;\n  height: 20px;\n  background-color: white;\n  border-radius: 50%;\n  transition: transform 0.2s ease;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);\n}\n.toggle-input:checked + .toggle-label-modern .toggle-slider {\n  background-color: var(--button-primary-bg);\n}\n.toggle-input:checked + .toggle-label-modern .toggle-slider::before {\n  transform: translateX(20px);\n}\n.toggle-text {\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: var(--text-color);\n  white-space: nowrap;\n}\n.persona-selector {\n  padding: 0.375rem 0.5rem;\n  border: 1px solid var(--border-color);\n  border-radius: 0.25rem;\n  background-color: var(--input-bg);\n  color: var(--text-color);\n  font-size: 0.75rem;\n  min-width: 120px;\n  max-width: 150px;\n  transition: border-color 0.2s ease;\n}\n.persona-selector:focus {\n  outline: none;\n  border-color: var(--button-primary-bg);\n  box-shadow: 0 0 0 1px rgba(33, 150, 243, 0.2);\n}\n.persona-selector:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.input-button {\n  background-color: var(--button-secondary-bg);\n  color: var(--button-secondary-text);\n  border: none;\n  border-radius: 0.375rem;\n  width: 2rem;\n  height: 2rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  opacity: 0.7;\n}\n.input-button:hover:not(:disabled) {\n  opacity: 1;\n  box-shadow: var(--shadow-sm);\n}\n.input-button:disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n.input-button.send-button {\n  background-color: var(--button-primary-bg);\n  color: var(--button-primary-text);\n  opacity: 0.9;\n}\n.input-button.send-button:hover:not(:disabled) {\n  opacity: 1;\n  box-shadow: var(--shadow-md);\n}\n.input-button.send-button.stop-button {\n  background-color: var(--button-danger-bg);\n  color: var(--button-danger-text);\n}\n.send-button {\n  position: static;\n  background-color: var(--button-primary-bg);\n  color: var(--button-primary-text);\n  border: none;\n  border-radius: 0.375rem;\n  width: 2rem;\n  height: 2rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: background-color 0.3s ease;\n}\n.send-button:hover {\n  opacity: 0.9;\n}\n.send-button:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.new-chat-button-history {\n  background-color: var(--button-secondary-bg);\n  color: var(--button-secondary-text);\n  border: none;\n  border-radius: 0.375rem;\n  width: 2.5rem;\n  height: 2.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  opacity: 0.8;\n  flex-shrink: 0;\n}\n.new-chat-button-history:hover:not(:disabled) {\n  opacity: 1;\n  transform: translateY(-1px);\n  box-shadow: var(--shadow-sm);\n}\n.new-chat-button-history:disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n.menu-container {\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n.dropdown-menu {\n  position: absolute;\n  bottom: 100%;\n  left: 0;\n  margin-bottom: 0.5rem;\n  background-color: var(--paper-bg);\n  border: 1px solid var(--border-color);\n  border-radius: 0.5rem;\n  box-shadow: var(--shadow-lg);\n  min-width: 180px;\n  z-index: 1000;\n  overflow: hidden;\n}\n.menu-item {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  width: 100%;\n  padding: 0.75rem 1rem;\n  background: none;\n  border: none;\n  color: var(--text-color);\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n  font-size: 0.875rem;\n  text-align: left;\n}\n.menu-item:hover:not(:disabled) {\n  background-color: var(--hover-color);\n}\n.menu-item:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.menu-item.active {\n  background-color: rgba(33, 150, 243, 0.1);\n  color: var(--button-primary-bg);\n}\n.menu-item.active:hover:not(:disabled) {\n  background-color: rgba(33, 150, 243, 0.15);\n}\n.scroll-to-bottom-button {\n  position: absolute;\n  bottom: 1.5rem;\n  right: 1.25rem;\n  width: 48px;\n  height: 48px;\n  border-radius: 999px;\n  background-color: var(--button-primary-bg);\n  color: var(--button-primary-text);\n  border: none;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 14px 30px rgba(33, 150, 243, 0.3);\n  transition: transform 0.2s ease, opacity 0.2s ease, box-shadow 0.2s ease;\n  z-index: 15;\n  opacity: 0.92;\n}\n.scroll-to-bottom-button:hover {\n  opacity: 1;\n  transform: translateY(-3px);\n  box-shadow: 0 18px 36px rgba(33, 150, 243, 0.35);\n}\n.scroll-to-bottom-button:active {\n  transform: translateY(0);\n}\n.scroll-to-bottom-button:focus-visible {\n  outline: 2px solid rgba(255, 255, 255, 0.9);\n  outline-offset: 2px;\n}\n.history-accordion-button {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 0;\n  transition: opacity 0.2s ease;\n}\n.history-accordion-button:hover {\n  opacity: 0.8;\n}\n.history-label {\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: var(--text-color);\n  opacity: 0.8;\n  display: block;\n  margin: 0;\n  cursor: pointer;\n}\n.history-accordion-icon {\n  transition: transform 0.2s ease;\n  opacity: 0.6;\n}\n.history-accordion-icon.expanded {\n  transform: rotate(0deg);\n}\n.history-accordion-icon.collapsed {\n  transform: rotate(-90deg);\n}\n.history-item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0.5rem 0.75rem;\n  background-color: transparent;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  position: relative;\n  border-radius: 0.25rem;\n}\n.history-item:hover {\n  background-color: var(--hover-color);\n}\n.history-item.active {\n  background-color: rgba(33, 150, 243, 0.05);\n}\n.history-item-content {\n  display: flex;\n  align-items: center;\n  gap: 0.375rem;\n  flex: 1;\n  min-width: 0;\n}\n.history-item-title {\n  font-size: 0.75rem;\n  color: var(--text-color);\n  font-weight: 400;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  opacity: 0.8;\n}\n.history-item-actions {\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n.history-action-button {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 0.25rem;\n  border-radius: 0.25rem;\n  color: var(--text-color);\n  opacity: 0.6;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.history-action-button:hover {\n  opacity: 1;\n  background-color: var(--border-color);\n}\n.conversation-menu {\n  position: absolute;\n  right: 0;\n  background-color: var(--paper-bg);\n  border: 1px solid var(--border-color);\n  border-radius: 0.375rem;\n  box-shadow: var(--shadow-xl);\n  min-width: 200px;\n  max-width: 250px;\n  z-index: 99999;\n  overflow: hidden;\n}\n.conversation-menu-item {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  width: 100%;\n  padding: 0.75rem;\n  background: none;\n  border: none;\n  color: var(--text-color);\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n  font-size: 0.875rem;\n  text-align: left;\n}\n.conversation-menu-item:hover:not(.datetime) {\n  background-color: var(--hover-color);\n}\n.conversation-menu-item.datetime {\n  background-color: rgba(0, 0, 0, 0.02);\n  cursor: default;\n  font-size: 0.75rem;\n  opacity: 0.8;\n  border-bottom: 1px solid var(--border-color);\n}\n.conversation-menu-item.danger {\n  color: var(--button-danger-bg);\n}\n.conversation-menu-item.danger:hover {\n  background-color: rgba(244, 67, 54, 0.1);\n}\n.see-more-button {\n  padding: 0.75rem;\n  background: none;\n  border: 1px dashed var(--border-color);\n  border-radius: 0.375rem;\n  color: var(--text-color);\n  cursor: pointer;\n  font-size: 0.875rem;\n  transition: all 0.2s ease;\n  opacity: 0.7;\n}\n.see-more-button:hover:not(:disabled) {\n  opacity: 1;\n  background-color: var(--hover-color);\n  border-style: solid;\n}\n.see-more-button:disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n.plugin-header-bg {\n  background-color: var(--bg-color);\n  border-color: var(--border-color);\n  transition: background-color 0.3s ease, border-color 0.3s ease;\n}\n.plugin-header-title {\n  color: var(--text-color);\n  transition: color 0.3s ease;\n}\n.plugin-header-button {\n  color: var(--text-secondary);\n  transition: color 0.3s ease, background-color 0.3s ease;\n}\n.plugin-header-button:hover {\n  background-color: var(--hover-color);\n  color: var(--text-color);\n}\n.collection-list-item {\n  background-color: var(--card-bg);\n  border-color: var(--card-border);\n  transition: background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;\n}\n.collection-list-item:hover {\n  background-color: var(--hover-color);\n  border-color: var(--text-muted);\n}\n.collection-item-title {\n  color: var(--text-color);\n  transition: color 0.3s ease;\n}\n.collection-item-description {\n  color: var(--text-secondary);\n  transition: color 0.3s ease;\n}\n.collection-item-meta {\n  color: var(--text-muted);\n  transition: color 0.3s ease;\n}\n.collection-list-bg {\n  background-color: var(--bg-color);\n  transition: background-color 0.3s ease;\n}\n.collection-list-divider {\n  border-color: var(--border-color);\n  transition: border-color 0.3s ease;\n}\n.plugin-content-bg {\n  background-color: var(--bg-color);\n  transition: background-color 0.3s ease;\n}\n.collection-form-container {\n  background-color: var(--card-bg);\n  border-color: var(--card-border);\n  transition: background-color 0.3s ease, border-color 0.3s ease;\n}\n.collection-form-title {\n  color: var(--text-color);\n  transition: color 0.3s ease;\n}\n.collection-form-label {\n  color: var(--text-secondary);\n  transition: color 0.3s ease;\n}\n.collection-form-input {\n  background-color: var(--input-bg);\n  border-color: var(--border-color);\n  color: var(--text-color);\n  transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;\n}\n.collection-form-input::placeholder {\n  color: var(--text-muted);\n}\n.collection-form-input:focus {\n  outline: none;\n  border-color: var(--input-focus-border);\n}\n.collection-form-button-cancel {\n  background-color: var(--secondary-bg);\n  color: var(--text-color);\n  transition: background-color 0.3s ease, color 0.3s ease;\n}\n.collection-form-button-cancel:hover:not(:disabled) {\n  background-color: var(--hover-color);\n}\n.message {\n  display: flex;\n  width: 100%;\n}\n.message-user {\n  justify-content: flex-end;\n}\n.message-ai {\n  justify-content: flex-start;\n}\n.message-bubble {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n  max-width: min(720px, 88%);\n  width: fit-content;\n  padding: 1rem 1.25rem;\n  border-radius: 1rem;\n  border: 1px solid var(--border-color);\n  background-color: var(--input-bg);\n  box-shadow: 0 12px 32px rgba(15, 23, 42, 0.06);\n  transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease, border-color 0.2s ease;\n}\n.message-ai .message-bubble:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 16px 40px rgba(15, 23, 42, 0.1);\n}\n.message-user .message-bubble {\n  background-color: rgba(0, 0, 0, 0.05);\n  border-color: rgba(0, 0, 0, 0.12);\n  box-shadow: none;\n  color: var(--text-color);\n}\n.message-user .message-bubble:hover {\n  transform: translateY(-1px);\n}\n.message-body {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n}\n.message-content {\n  word-break: break-word;\n  white-space: pre-wrap;\n  line-height: 1.6;\n  font-size: 0.95rem;\n  color: var(--text-color);\n}\n.message-text {\n  white-space: pre-wrap;\n}\n.user-message-text {\n  font-weight: 500;\n}\n.message-meta {\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  gap: 0.5rem 1rem;\n  color: var(--text-color);\n  opacity: 0.8;\n  font-size: 0.75rem;\n}\n.message-meta .message-timestamp {\n  font-size: 0.75rem;\n  opacity: 0.9;\n}\n.message-meta .message-edited-indicator {\n  font-style: italic;\n  opacity: 0.7;\n}\n.message-meta .message-actions {\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  margin-left: auto;\n}\n.message-action-btn {\n  background-color: rgba(33, 150, 243, 0.06);\n  border: 1px solid var(--border-color);\n  cursor: pointer;\n  padding: 0.35rem;\n  border-radius: 0.5rem;\n  font-size: 0.875rem;\n  opacity: 0.85;\n  transition: transform 0.18s ease, background-color 0.18s ease, border-color 0.18s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 28px;\n  height: 28px;\n}\n.message-action-btn:hover {\n  opacity: 1;\n  background-color: rgba(33, 150, 243, 0.12);\n  border-color: rgba(33, 150, 243, 0.45);\n  transform: translateY(-1px);\n}\n.ai-message-actions {\n  display: flex;\n  gap: 0.25rem;\n}\n.message-streaming .message-bubble {\n  border-color: rgba(33, 150, 243, 0.4);\n  box-shadow: 0 10px 28px rgba(33, 150, 243, 0.15);\n}\n.message-edit-container {\n  width: 100%;\n}\n.message-edit-input {\n  width: 100%;\n  padding: 0.75rem;\n  border: 1px solid var(--button-primary-bg);\n  border-radius: 0.5rem;\n  background-color: var(--input-bg);\n  color: var(--button-secondary-text);\n  font-size: 0.9rem;\n  resize: vertical;\n  min-height: 2.75rem;\n  font-family: inherit;\n  line-height: 1.5;\n}\n.message-edit-input:focus {\n  outline: none;\n  border-color: var(--button-primary-bg);\n  box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.1);\n}\n.message-edit-actions {\n  display: flex;\n  gap: 0.5rem;\n  margin-top: 0.75rem;\n  justify-content: flex-end;\n}\n.message-edited-indicator {\n  font-size: 0.75rem;\n  opacity: 0.7;\n  font-style: italic;\n}\n.message-search-results .message-bubble {\n  background-color: rgba(33, 150, 243, 0.05);\n  border-color: rgba(33, 150, 243, 0.2);\n}\n.search-results-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 1rem;\n  margin-bottom: 0.5rem;\n}\n.search-results-summary {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex: 1;\n  min-width: 0;\n}\n.search-icon {\n  font-size: 1rem;\n  opacity: 0.8;\n}\n.search-query {\n  font-weight: 500;\n  color: var(--text-color);\n  font-style: italic;\n}\n.search-count {\n  font-size: 0.875rem;\n  color: var(--text-color);\n  opacity: 0.7;\n}\n.scraping-info {\n  font-size: 0.75rem;\n  color: var(--text-color);\n  opacity: 0.6;\n  background-color: rgba(76, 175, 80, 0.1);\n  padding: 0.125rem 0.375rem;\n  border-radius: 0.25rem;\n}\n.search-toggle-btn {\n  display: flex;\n  align-items: center;\n  gap: 0.375rem;\n  background: none;\n  border: 1px solid var(--border-color);\n  border-radius: 0.375rem;\n  padding: 0.375rem 0.75rem;\n  font-size: 0.875rem;\n  color: var(--text-color);\n  cursor: pointer;\n  transition: all 0.2s ease;\n  white-space: nowrap;\n  flex-shrink: 0;\n}\n.search-toggle-btn:hover {\n  background-color: var(--border-color);\n  transform: translateY(-1px);\n}\n.search-toggle-btn:focus {\n  outline: none;\n  border-color: var(--button-primary-bg);\n  box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.1);\n}\n.search-toggle-icon {\n  font-size: 0.75rem;\n  transition: transform 0.2s ease;\n}\n.search-toggle-text {\n  font-weight: 500;\n}\n.search-results-content {\n  border-top: 1px solid var(--border-color);\n  padding-top: 0.75rem;\n  margin-top: 0.5rem;\n  animation: slideDown 0.3s ease-out;\n}\n@keyframes slideDown {\n  from {\n    opacity: 0;\n    max-height: 0;\n    overflow: hidden;\n  }\n  to {\n    opacity: 1;\n    max-height: 1000px;\n    overflow: visible;\n  }\n}\n.search-results-list {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  margin-bottom: 0.75rem;\n}\n.search-result-item {\n  padding: 0.75rem;\n  border: 1px solid var(--border-color);\n  border-radius: 0.5rem;\n  background-color: var(--paper-bg);\n  transition: border-color 0.2s ease;\n}\n.search-result-item:hover {\n  border-color: var(--button-primary-bg);\n}\n.search-result-header {\n  display: flex;\n  align-items: flex-start;\n  gap: 0.5rem;\n  margin-bottom: 0.375rem;\n}\n.search-result-number {\n  font-weight: 600;\n  color: var(--button-primary-bg);\n  font-size: 0.875rem;\n  min-width: 1.5rem;\n}\n.search-result-title {\n  color: var(--button-primary-bg);\n  text-decoration: none;\n  font-weight: 500;\n  line-height: 1.4;\n  word-break: break-word;\n}\n.search-result-title:hover {\n  text-decoration: underline;\n}\n.search-result-url {\n  font-size: 0.75rem;\n  color: var(--text-color);\n  opacity: 0.7;\n  margin-bottom: 0.5rem;\n  word-break: break-all;\n  font-family: monospace;\n}\n.search-result-content {\n  font-size: 0.875rem;\n  line-height: 1.5;\n  color: var(--text-color);\n  opacity: 0.9;\n}\n.scraping-summary {\n  padding: 0.75rem;\n  background-color: rgba(76, 175, 80, 0.05);\n  border: 1px solid rgba(76, 175, 80, 0.2);\n  border-radius: 0.5rem;\n}\n.scraping-header {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.875rem;\n  color: var(--text-color);\n  opacity: 0.8;\n}\n.scraping-icon {\n  font-size: 1rem;\n}\n.message-document-context .message-bubble {\n  background-color: rgba(76, 175, 80, 0.05);\n  border-color: rgba(76, 175, 80, 0.2);\n}\n.document-context-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 1rem;\n  margin-bottom: 0.5rem;\n}\n.document-context-summary {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex: 1;\n  min-width: 0;\n}\n.document-icon {\n  font-size: 1rem;\n  opacity: 0.8;\n}\n.document-filename {\n  font-weight: 500;\n  color: var(--text-color);\n  font-style: italic;\n}\n.document-info {\n  font-size: 0.875rem;\n  color: var(--text-color);\n  opacity: 0.7;\n}\n.document-toggle-btn {\n  display: flex;\n  align-items: center;\n  gap: 0.375rem;\n  background: none;\n  border: 1px solid var(--border-color);\n  border-radius: 0.375rem;\n  padding: 0.375rem 0.75rem;\n  font-size: 0.875rem;\n  color: var(--text-color);\n  cursor: pointer;\n  transition: all 0.2s ease;\n  white-space: nowrap;\n  flex-shrink: 0;\n}\n.document-toggle-btn:hover {\n  background-color: var(--border-color);\n  transform: translateY(-1px);\n}\n.document-toggle-btn:focus {\n  outline: none;\n  border-color: var(--button-primary-bg);\n  box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.1);\n}\n.document-toggle-icon {\n  font-size: 0.75rem;\n  transition: transform 0.2s ease;\n}\n.document-toggle-text {\n  font-weight: 500;\n}\n.document-context-content {\n  border-top: 1px solid var(--border-color);\n  padding-top: 0.75rem;\n  margin-top: 0.5rem;\n  animation: slideDown 0.3s ease-out;\n}\n.document-content {\n  font-family: monospace;\n  font-size: 0.875rem;\n  line-height: 1.5;\n  color: var(--text-color);\n  opacity: 0.9;\n  white-space: pre-wrap;\n  word-break: break-word;\n  max-height: 300px;\n  overflow-y: auto;\n  padding: 0.75rem;\n  background-color: var(--paper-bg);\n  border: 1px solid var(--border-color);\n  border-radius: 0.375rem;\n}\n@keyframes blink {\n  50% {\n    opacity: 0;\n  }\n}\n.typing-indicator {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.25rem;\n  height: 1.25rem;\n  padding: 0 0.25rem;\n  align-self: flex-start;\n}\n.typing-dot {\n  width: 0.375rem;\n  height: 0.375rem;\n  border-radius: 50%;\n  background-color: var(--text-color);\n  opacity: 0.7;\n  animation: typingPulse 1.5s infinite ease-in-out;\n}\n.typing-dot:nth-child(2) {\n  animation-delay: 0.2s;\n}\n.typing-dot:nth-child(3) {\n  animation-delay: 0.4s;\n}\n@keyframes typingPulse {\n  0%, 100% {\n    transform: scale(0.8);\n    opacity: 0.5;\n  }\n  50% {\n    transform: scale(1.2);\n    opacity: 1;\n  }\n}\n@media (prefers-reduced-motion: reduce) {\n  .message-bubble, .message-body .thinking-block .thinking-panel {\n    transition: none !important;\n  }\n}\n.loading-indicator {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0.5rem;\n}\n.loading-dots {\n  display: flex;\n  gap: 0.25rem;\n}\n.loading-dot {\n  width: 0.5rem;\n  height: 0.5rem;\n  border-radius: 50%;\n  background-color: var(--text-color);\n  opacity: 0.7;\n  animation: pulse 1.5s infinite ease-in-out;\n}\n.loading-dot:nth-child(2) {\n  animation-delay: 0.2s;\n}\n.loading-dot:nth-child(3) {\n  animation-delay: 0.4s;\n}\n@keyframes pulse {\n  0%, 100% {\n    transform: scale(0.8);\n    opacity: 0.5;\n  }\n  50% {\n    transform: scale(1.2);\n    opacity: 1;\n  }\n}\n.error-message {\n  color: var(--status-error-color);\n  padding: 0.5rem 0.75rem;\n  margin: 0.5rem 0;\n  border-radius: 0.25rem;\n  background-color: rgba(244, 67, 54, 0.1);\n  border-left: 3px solid var(--status-error-color);\n}\n.empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  color: var(--text-color);\n  opacity: 0.7;\n  text-align: center;\n  padding: 1.25rem;\n}\n.empty-state-icon {\n  font-size: 3rem;\n  margin-bottom: 1rem;\n}\n.empty-state-text {\n  font-size: 1rem;\n  max-width: 18.75rem;\n}\n.message-content p {\n  margin: 0 !important;\n  line-height: 1.3 !important;\n  padding: 0 !important;\n}\n.message-content p:first-child {\n  margin-top: 0 !important;\n}\n.message-content p:last-child {\n  margin-bottom: 0 !important;\n}\n.message-content h1, .message-content h2, .message-content h3, .message-content h4, .message-content h5, .message-content h6 {\n  margin: 0.25rem 0 0.125rem 0 !important;\n  font-weight: 600 !important;\n  line-height: 1.2 !important;\n  padding: 0 !important;\n}\n.message-content h1 {\n  font-size: 1.25rem !important;\n}\n.message-content h2 {\n  font-size: 1.125rem !important;\n}\n.message-content h3 {\n  font-size: 1rem !important;\n}\n.message-content h4 {\n  font-size: 0.875rem !important;\n}\n.message-content h5 {\n  font-size: 0.75rem !important;\n}\n.message-content h6 {\n  font-size: 0.625rem !important;\n}\n.message-content ul, .message-content ol {\n  margin: 0.25rem 0 !important;\n  padding-left: 2rem !important;\n  list-style-position: outside !important;\n  white-space: normal !important;\n}\n.message-content li {\n  margin: 0 !important;\n  line-height: 1.5 !important;\n  padding: 0 !important;\n  display: list-item !important;\n  white-space: normal !important;\n}\n.message-content ul li {\n  list-style-type: disc !important;\n}\n.message-content ol li {\n  list-style-type: decimal !important;\n}\n.message-content li + li {\n  margin-top: 0 !important;\n}\n.message-content ul ul, .message-content ol ol, .message-content ul ol, .message-content ol ul {\n  margin: 0 !important;\n  padding-left: 1rem !important;\n}\n.message-body .thinking-block {\n  margin: 0.25rem 0 0;\n  border: 1px solid rgba(33, 150, 243, 0.25);\n  border-radius: 0.75rem;\n  background-color: rgba(33, 150, 243, 0.05);\n  overflow: hidden;\n  color: var(--text-color);\n  transition: border-color 0.2s ease, background-color 0.2s ease;\n}\n.message-body .thinking-block.thinking-streaming {\n  border-style: dashed;\n  opacity: 0.9;\n}\n.message-body .thinking-block .thinking-header {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 0.5rem;\n  padding: 0.65rem 0.85rem;\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  font-weight: 600;\n  font-size: 0.85rem;\n  color: inherit;\n  transition: background-color 0.2s ease;\n}\n.message-body .thinking-block .thinking-header:hover {\n  background-color: rgba(33, 150, 243, 0.1);\n}\n.message-body .thinking-block .thinking-header:focus-visible {\n  outline: 2px solid rgba(33, 150, 243, 0.45);\n  outline-offset: 2px;\n}\n.message-body .thinking-block .thinking-title {\n  display: flex;\n  align-items: center;\n  gap: 0.35rem;\n}\n.message-body .thinking-block .thinking-toggle {\n  font-size: 0.75rem;\n  opacity: 0.6;\n  transition: transform 0.2s ease;\n}\n.message-body .thinking-block.expanded .thinking-toggle {\n  transform: rotate(180deg);\n}\n.message-body .thinking-block .thinking-panel {\n  max-height: 0;\n  overflow: hidden;\n  transition: max-height 0.24s ease;\n}\n.message-body .thinking-block.expanded .thinking-panel {\n  max-height: 600px;\n}\n.message-body .thinking-block .thinking-content {\n  padding: 0 0.85rem 0.85rem;\n  line-height: 1.45;\n  white-space: pre-wrap;\n  font-style: normal;\n}\n.toggle-switch {\n  display: flex;\n  align-items: center;\n  gap: 0.375rem;\n  cursor: pointer;\n  user-select: none;\n}\n.toggle-switch input[type=\"checkbox\"] {\n  appearance: none;\n  -webkit-appearance: none;\n  width: 2.25rem;\n  height: 1.125rem;\n  border-radius: 0.625rem;\n  background-color: var(--border-color);\n  position: relative;\n  cursor: pointer;\n  transition: background-color 0.3s ease;\n}\n.toggle-switch input[type=\"checkbox\"]:checked {\n  background-color: var(--button-primary-bg);\n}\n.toggle-switch input[type=\"checkbox\"]::before {\n  content: '';\n  position: absolute;\n  width: 0.875rem;\n  height: 0.875rem;\n  border-radius: 50%;\n  background-color: white;\n  top: 0.125rem;\n  left: 0.125rem;\n  transition: transform 0.3s ease;\n}\n.toggle-switch input[type=\"checkbox\"]:checked::before {\n  transform: translateX(1.125rem);\n}\n.toggle-switch input[type=\"checkbox\"]:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.toggle-label {\n  font-size: 0.75rem;\n  color: var(--text-color);\n}\n.dropdown-container {\n  position: relative;\n  width: 100%;\n}\n.dropdown-select {\n  width: 100%;\n  padding: 0.5rem 0.75rem;\n  border: 1px solid var(--border-color);\n  border-radius: 0.375rem;\n  background-color: var(--input-bg);\n  color: var(--text-color);\n  cursor: pointer;\n  transition: border-color 0.3s ease;\n}\n.dropdown-select:focus {\n  outline: none;\n  border-color: var(--button-primary-bg);\n}\n.dropdown-select:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.btn {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0.5rem 1rem;\n  border-radius: 0.375rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  border: none;\n  text-decoration: none;\n}\n.btn-primary {\n  background-color: var(--button-primary-bg);\n  color: var(--button-primary-text);\n}\n.btn-primary:hover {\n  opacity: 0.9;\n  transform: translateY(-1px);\n}\n.btn-secondary {\n  background-color: var(--button-secondary-bg);\n  color: var(--button-secondary-text);\n}\n.btn-secondary:hover {\n  opacity: 0.9;\n}\n.btn-danger {\n  background-color: var(--button-danger-bg);\n  color: var(--button-danger-text);\n}\n.btn-danger:hover {\n  opacity: 0.9;\n}\n.btn-sm {\n  padding: 0.25rem 0.5rem;\n  font-size: 0.875rem;\n}\n.btn-xs {\n  padding: 0.125rem 0.375rem;\n  font-size: 0.75rem;\n}\n.btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n  transform: none;\n}\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  padding: 1rem;\n}\n.modal-content {\n  background-color: var(--paper-bg);\n  border-radius: 0.5rem;\n  box-shadow: var(--shadow-xl);\n  width: 100%;\n  max-width: 400px;\n  max-height: 90vh;\n  overflow: hidden;\n}\n.modal-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1rem 1.25rem;\n  border-bottom: 1px solid var(--border-color);\n}\n.modal-title {\n  font-size: 1.125rem;\n  font-weight: 600;\n  color: var(--text-color);\n  margin: 0;\n}\n.modal-close {\n  background: none;\n  border: none;\n  font-size: 1.5rem;\n  color: var(--text-color);\n  cursor: pointer;\n  padding: 0;\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 0.25rem;\n  transition: background-color 0.2s ease;\n}\n.modal-close:hover {\n  background-color: var(--border-color);\n}\n.modal-body {\n  padding: 1.25rem;\n}\n.modal-form {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n.modal-input {\n  padding: 0.75rem;\n  border: 1px solid var(--border-color);\n  border-radius: 0.375rem;\n  background-color: var(--input-bg);\n  color: var(--text-color);\n  font-size: 0.875rem;\n  transition: border-color 0.2s ease, box-shadow 0.2s ease;\n}\n.modal-input:focus {\n  outline: none;\n  border-color: var(--button-primary-bg);\n  box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.1);\n}\n.modal-text {\n  color: var(--text-color);\n  line-height: 1.5;\n  margin: 0;\n}\n.modal-actions {\n  display: flex;\n  gap: 0.75rem;\n  justify-content: flex-end;\n}\n.modal-btn {\n  padding: 0.5rem 1rem;\n  border: none;\n  border-radius: 0.375rem;\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  min-width: 80px;\n}\n.modal-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.modal-btn-primary {\n  background-color: var(--button-primary-bg);\n  color: var(--button-primary-text);\n}\n.modal-btn-primary:hover:not(:disabled) {\n  opacity: 0.9;\n}\n.modal-btn-secondary {\n  background-color: var(--button-secondary-bg);\n  color: var(--button-secondary-text);\n}\n.modal-btn-secondary:hover:not(:disabled) {\n  opacity: 0.9;\n}\n.modal-btn-danger {\n  background-color: var(--button-danger-bg);\n  color: var(--button-danger-text);\n}\n.modal-btn-danger:hover:not(:disabled) {\n  opacity: 0.9;\n}\n.file-upload-container {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  margin-bottom: 1rem;\n}\n.file-upload-button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1rem;\n  background-color: var(--button-secondary-bg);\n  color: var(--button-secondary-text);\n  border: 2px dashed var(--border-color);\n  border-radius: 0.5rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 0.875rem;\n  font-weight: 500;\n}\n.file-upload-button:hover:not(:disabled) {\n  background-color: var(--border-color);\n  border-color: var(--button-primary-bg);\n  transform: translateY(-1px);\n}\n.file-upload-button:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.file-upload-loading {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.loading-spinner {\n  width: 16px;\n  height: 16px;\n  border: 2px solid var(--border-color);\n  border-top: 2px solid var(--button-primary-bg);\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n@keyframes spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n.file-upload-info {\n  text-align: center;\n  color: var(--text-color);\n  opacity: 0.7;\n}\n.file-upload-info small {\n  font-size: 0.75rem;\n}\n.markdown-link {\n  color: var(--button-primary-bg);\n  text-decoration: underline;\n  transition: color 0.2s ease;\n}\n.markdown-link:hover {\n  color: #1976d2;\n  text-decoration: none;\n}\n.markdown-inline-code {\n  background-color: rgba(0, 0, 0, 0.08);\n  padding: 0.125rem 0.375rem;\n  border-radius: 0.25rem;\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n  font-size: 0.875em;\n  color: #d63384;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  white-space: nowrap;\n  display: inline-block;\n  line-height: 1.2;\n}\n.markdown-code-block {\n  background-color: rgba(0, 0, 0, 0.05);\n  border: 1px solid var(--border-color);\n  border-radius: 0.375rem;\n  padding: 1rem;\n  margin: 0.5rem 0;\n  overflow-x: auto;\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n  font-size: 0.875rem;\n  line-height: 1.5;\n}\n.markdown-code-block code {\n  background: none;\n  padding: 0;\n  border-radius: 0;\n  color: inherit;\n}\n.markdown-blockquote {\n  border-left: 4px solid var(--button-primary-bg);\n  margin: 0.5rem 0;\n  padding: 0.5rem 1rem;\n  background-color: rgba(33, 150, 243, 0.05);\n  border-radius: 0.25rem;\n  font-style: italic;\n}\n.message-content blockquote {\n  margin: 0.125rem 0 !important;\n  padding: 0.125rem 0.5rem !important;\n}\n.markdown-table-wrapper {\n  overflow-x: auto;\n  margin: 0.5rem 0;\n  border-radius: 0.375rem;\n  border: 1px solid var(--border-color);\n}\n.markdown-table {\n  width: 100%;\n  border-collapse: collapse;\n  font-size: 0.875rem;\n}\n.markdown-table-header {\n  background-color: rgba(0, 0, 0, 0.05);\n  padding: 0.5rem;\n  text-align: left;\n  font-weight: 600;\n  border-bottom: 1px solid var(--border-color);\n}\n.markdown-table-cell {\n  padding: 0.5rem;\n  border-bottom: 1px solid var(--border-color);\n  vertical-align: top;\n}\n.markdown-table tr:last-child .markdown-table-cell {\n  border-bottom: none;\n}\n.message-content table {\n  margin: 0.125rem 0 !important;\n}\n.message-content th, .message-content td {\n  padding: 0.125rem 0.25rem !important;\n}\n.enhanced-code-block {\n  border: 1px solid var(--border-color);\n  border-radius: 0.5rem;\n  margin: 0.75rem 0;\n  overflow: hidden;\n  background-color: var(--paper-bg);\n  box-shadow: var(--shadow-sm);\n}\n.enhanced-code-block .code-block-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.75rem 1rem !important;\n  background-color: rgba(0, 0, 0, 0.03);\n  border-bottom: 1px solid var(--border-color);\n  font-size: 0.875rem;\n  font-weight: 500;\n  min-height: 40px;\n}\n.code-block-info {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n.code-language {\n  color: var(--button-primary-bg);\n  font-weight: 600;\n  text-transform: uppercase;\n  font-size: 0.7rem;\n  letter-spacing: 0.05em;\n}\n.code-lines {\n  color: var(--text-color);\n  opacity: 0.7;\n}\n.code-block-actions {\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n}\n.code-action-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 28px;\n  height: 28px;\n  border: none;\n  border-radius: 0.25rem;\n  background-color: transparent;\n  color: var(--text-color);\n  cursor: pointer;\n  transition: all 0.2s ease;\n  opacity: 0.7;\n}\n.code-action-btn:hover {\n  opacity: 1;\n  background-color: var(--border-color);\n  transform: scale(1.05);\n}\n.code-action-btn.copied {\n  color: var(--status-success-color);\n  opacity: 1;\n}\n.code-block-content {\n  position: relative;\n}\n.code-block-content.collapsed {\n  max-height: 300px;\n  overflow: hidden;\n}\n.code-block-content .react-syntax-highlighter {\n  margin: 0 !important;\n  border-radius: 0 !important;\n}\n.code-block-content .react-syntax-highlighter pre {\n  margin: 0 !important;\n  padding: 1rem !important;\n  background-color: transparent !important;\n  border-radius: 0 !important;\n}\n.code-block-content .react-syntax-highlighter code {\n  background: none !important;\n  padding: 0 !important;\n  border-radius: 0 !important;\n  font-family: inherit !important;\n  font-size: inherit !important;\n}\n.code-collapse-indicator {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  padding: 0.75rem 1rem;\n  background: var(--paper-bg);\n  text-align: center;\n  font-size: 0.875rem;\n  color: var(--text-color);\n  font-weight: 500;\n  border: none;\n  border-top: 1px solid var(--border-color);\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n  font-family: inherit;\n  width: 100%;\n}\n.code-collapse-indicator:hover, .code-collapse-indicator:focus {\n  background-color: var(--hover-color);\n  outline: none;\n}\n.code-collapse-indicator:focus {\n  box-shadow: 0 0 0 2px var(--button-primary-bg);\n}\n.raw-markdown-content {\n  background-color: rgba(0, 0, 0, 0.02);\n  border: 1px solid var(--border-color);\n  border-radius: 0.375rem;\n  padding: 1rem;\n  margin: 0.5rem 0;\n  overflow-x: auto;\n  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n  font-size: 0.875rem;\n  line-height: 1.5;\n  white-space: pre-wrap;\n  word-break: break-word;\n  color: var(--text-color);\n}\n.raw-markdown-content code {\n  background: none;\n  padding: 0;\n  border-radius: 0;\n  color: inherit;\n  font-family: inherit;\n  font-size: inherit;\n}\n.message-content strong {\n  font-weight: 600;\n}\n.message-content em {\n  font-style: italic;\n}\n.message-content hr {\n  border: none;\n  border-top: 1px solid var(--border-color);\n  margin: 0.25rem 0 !important;\n}\n.message-content * {\n  box-sizing: border-box;\n}\n.message-content div, .message-content span, .message-content p, .message-content h1, .message-content h2, .message-content h3, .message-content h4, .message-content h5, .message-content h6 {\n  margin: 0 !important;\n  padding: 0 !important;\n}\n.message-content ul, .message-content ol {\n  margin: 0.25rem 0 !important;\n  padding: 0 !important;\n  padding-left: 1.5rem !important;\n}\n.message-content li {\n  margin: 0.125rem 0 !important;\n  padding: 0 !important;\n  line-height: 1.4 !important;\n}\n.message-content ul ul, .message-content ol ol, .message-content ul ol, .message-content ol ul {\n  margin: 0.125rem 0 !important;\n  padding-left: 1.25rem !important;\n}\n.message-content .enhanced-code-block * {\n  box-sizing: border-box;\n}\n.message-content .react-markdown, .message-content [data-rmiz-content] {\n  margin: 0 !important;\n  padding: 0 !important;\n  line-height: 1.3 !important;\n}\n.message-content .gfm-content {\n  margin: 0 !important;\n  padding: 0 !important;\n}\n.dark-theme {\n  --bg-color: #121a28;\n  --paper-bg: #1a2332;\n  --secondary-bg: #1f2937;\n  --tertiary-bg: #111827;\n  --text-color: #e0e0e0;\n  --text-secondary: #b0b0b0;\n  --text-muted: #808080;\n  --border-color: rgba(255, 255, 255, 0.1);\n  --hover-color: rgba(255, 255, 255, 0.1);\n  --active-bg: rgba(255, 255, 255, 0.15);\n  --input-bg: #1e293b;\n  --input-border: rgba(255, 255, 255, 0.2);\n  --input-focus-border: #2196f3;\n  --button-primary-bg: #2196f3;\n  --button-primary-text: #ffffff;\n  --button-secondary-bg: #2c3a4f;\n  --button-secondary-text: #ffffff;\n  --button-danger-bg: #f44336;\n  --button-danger-text: #ffffff;\n  --status-success-color: #4caf50;\n  --status-error-color: #f44336;\n  --status-checking-color: #ff9800;\n  --status-processing-bg: rgba(254, 243, 199, 0.15);\n  --status-processing-text: #fbbf24;\n  --status-success-bg: rgba(209, 250, 229, 0.15);\n  --status-success-text: #34d399;\n  --status-error-bg: rgba(254, 226, 226, 0.15);\n  --status-error-text: #fca5a5;\n  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);\n  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4);\n  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.5);\n  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.6);\n  --card-bg: #1e1e1e;\n  --card-border: #374151;\n  --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n  --modal-backdrop: rgba(37, 36, 69, 0.7);\n  --modal-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);\n  --error-bg: #450a0a;\n  --error-text: #fecaca;\n  --error-border: #dc2626;\n  --info-bg: #0b1220;\n  --info-border: #3b82f6;\n  --info-text: #93c5fd;\n}\n.dark-theme .header-icon-only:hover:not(:disabled) {\n  background-color: rgba(255, 255, 255, 0.1);\n}\n.dark-theme .header-icon-danger:hover:not(:disabled) {\n  background-color: rgba(244, 67, 54, 0.15);\n}\n.dark-theme .header-icon-streaming.active:hover:not(:disabled) {\n  background-color: rgba(33, 150, 243, 0.15);\n}\n.dark-theme .header-icon-streaming.inactive:hover:not(:disabled) {\n  background-color: rgba(255, 255, 255, 0.1);\n}\n.dark-theme .scroll-to-bottom-button {\n  background-color: rgba(33, 150, 243, 0.85);\n  color: #ffffff;\n  box-shadow: 0 16px 34px rgba(8, 47, 73, 0.55);\n}\n.dark-theme .scroll-to-bottom-button:hover {\n  box-shadow: 0 20px 40px rgba(8, 47, 73, 0.6);\n}\n.dark-theme .message-ai .message-bubble {\n  background-color: rgba(255, 255, 255, 0.04);\n  border-color: rgba(255, 255, 255, 0.08);\n  box-shadow: 0 12px 34px rgba(8, 47, 73, 0.55);\n}\n.dark-theme .message-user .message-bubble {\n  background-color: rgba(33, 150, 243, 0.2);\n  border-color: rgba(33, 150, 243, 0.35);\n  color: var(--text-color);\n}\n.dark-theme .message-action-btn {\n  background-color: rgba(255, 255, 255, 0.08);\n  border-color: rgba(255, 255, 255, 0.16);\n}\n.dark-theme .message-action-btn:hover {\n  background-color: rgba(33, 150, 243, 0.25);\n  border-color: rgba(33, 150, 243, 0.45);\n}\n.dark-theme .message-edit-input {\n  background-color: var(--bg-color);\n  border-color: var(--button-primary-bg);\n}\n.dark-theme .message-search-results .message-bubble {\n  background-color: rgba(33, 150, 243, 0.12);\n  border-color: rgba(33, 150, 243, 0.32);\n}\n.dark-theme .search-result-item {\n  background-color: var(--bg-color);\n}\n.dark-theme .search-toggle-btn:hover {\n  background-color: rgba(255, 255, 255, 0.1);\n}\n.dark-theme .scraping-summary {\n  background-color: rgba(76, 175, 80, 0.1);\n  border-color: rgba(76, 175, 80, 0.3);\n}\n.dark-theme .message-document-context .message-bubble {\n  background-color: rgba(76, 175, 80, 0.12);\n  border-color: rgba(76, 175, 80, 0.3);\n}\n.dark-theme .document-toggle-btn:hover {\n  background-color: rgba(255, 255, 255, 0.1);\n}\n.dark-theme .document-content {\n  background-color: var(--bg-color);\n}\n.dark-theme .conversation-menu-item.datetime {\n  background-color: rgba(255, 255, 255, 0.02);\n}\n.dark-theme .history-item.active {\n  background-color: rgba(33, 150, 243, 0.08);\n}\n.dark-theme .markdown-inline-code {\n  background-color: rgba(255, 255, 255, 0.08);\n  color: #f8bbd9;\n  border-color: rgba(255, 255, 255, 0.15);\n}\n.dark-theme .markdown-code-block {\n  background-color: rgba(255, 255, 255, 0.05);\n  border-color: rgba(255, 255, 255, 0.1);\n}\n.dark-theme .markdown-blockquote {\n  background-color: rgba(33, 150, 243, 0.1);\n}\n.dark-theme .markdown-table-header {\n  background-color: rgba(255, 255, 255, 0.05);\n}\n.dark-theme .enhanced-code-block .code-block-header {\n  background-color: rgba(255, 255, 255, 0.05);\n}\n.dark-theme .code-block-content .react-syntax-highlighter {\n  background-color: rgba(255, 255, 255, 0.02) !important;\n}\n.dark-theme .raw-markdown-content {\n  background-color: rgba(255, 255, 255, 0.02);\n}\n.dark-theme .message-body .thinking-block {\n  background-color: rgba(33, 150, 243, 0.12);\n  border-color: rgba(33, 150, 243, 0.35);\n  color: rgba(255, 255, 255, 0.8);\n}\n.dark-theme .message-body .thinking-block .thinking-header {\n  background-color: rgba(33, 150, 243, 0.16);\n}\n@media (min-width: 1400px) {\n  .chat-header-redesigned {\n    gap: 2rem;\n  }\n  .header-model-section .header-select {\n    min-width: 180px;\n    max-width: 200px;\n  }\n  .header-persona-section .header-select {\n    min-width: 160px;\n    max-width: 180px;\n  }\n}\n@media (max-width: 1200px) {\n  .chat-header-redesigned {\n    grid-template-columns: auto auto 1fr auto;\n    gap: 1rem;\n  }\n  .header-model-section .header-select {\n    max-width: 150px;\n  }\n  .header-persona-section .header-select {\n    max-width: 140px;\n  }\n}\n@media (max-width: 768px) {\n  .chat-header-redesigned {\n    grid-template-columns: 1fr;\n    gap: 1rem;\n    padding: 0.75rem 1rem;\n    min-height: auto;\n  }\n  .header-model-section {\n    justify-self: stretch;\n    order: 1;\n  }\n  .header-model-section .header-select {\n    max-width: none;\n    flex: 1;\n  }\n  .header-persona-section {\n    justify-self: stretch;\n    order: 2;\n  }\n  .header-persona-section .header-select {\n    max-width: none;\n    flex: 1;\n  }\n  .header-history-section {\n    justify-self: stretch;\n    max-width: none;\n    order: 3;\n  }\n  .header-actions-section {\n    justify-self: center;\n    order: 4;\n    gap: 0.75rem;\n  }\n  .header-new-chat-button {\n    width: 40px;\n    height: 40px;\n    padding: 0.5rem;\n  }\n  .header-icon-only {\n    width: 40px;\n    height: 40px;\n  }\n  .modal-overlay {\n    padding: 0.5rem;\n  }\n  .modal-content {\n    max-width: none;\n  }\n  .header-select {\n    font-size: 0.875rem;\n    padding: 0.5rem 0.75rem;\n  }\n  .history-accordion-button {\n    padding: 0.75rem 0;\n  }\n  .history-accordion-icon {\n    opacity: 0.8;\n  }\n  .message {\n    max-width: 90%;\n  }\n  .chat-input-container {\n    padding: 0.75rem;\n  }\n  .chat-input {\n    padding: 0.625rem;\n  }\n  .chat-header {\n    padding: 0.5rem 0.75rem;\n  }\n  .chat-controls {\n    gap: 0.5rem;\n  }\n  .search-results-header {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 0.75rem;\n  }\n  .search-toggle-btn {\n    align-self: flex-end;\n  }\n  .search-results-summary {\n    flex-wrap: wrap;\n  }\n  .message-search-results {\n    max-width: 95%;\n  }\n  .document-context-header {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 0.75rem;\n  }\n  .document-toggle-btn {\n    align-self: flex-end;\n  }\n  .document-context-summary {\n    flex-wrap: wrap;\n  }\n  .message-document-context {\n    max-width: 95%;\n  }\n  .message-actions {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 0.25rem;\n  }\n  .ai-message-actions {\n    align-self: flex-end;\n  }\n  .message-action-btn {\n    min-width: 28px;\n    height: 28px;\n    font-size: 1rem;\n  }\n  .markdown-table-wrapper {\n    font-size: 0.75rem;\n  }\n  .markdown-code-block {\n    font-size: 0.75rem;\n    padding: 0.75rem;\n  }\n}\n@media (max-width: 480px) {\n  .header-actions-section {\n    gap: 0.5rem;\n  }\n  .header-icon-only {\n    width: 36px;\n    height: 36px;\n  }\n  .header-new-chat-button {\n    width: 36px;\n    height: 36px;\n    padding: 0.375rem;\n  }\n  .history-accordion-button {\n    padding: 0.5rem 0;\n  }\n  .message-bubble {\n    max-width: 96%;\n  }\n  .chat-history {\n    padding: 0.75rem 0.75rem 5rem;\n    gap: 0.75rem;\n  }\n  .chat-input-container {\n    padding: 0.5rem;\n  }\n  .chat-header {\n    padding: 0.5rem;\n  }\n  .search-results-summary {\n    font-size: 0.875rem;\n  }\n  .search-toggle-btn {\n    padding: 0.25rem 0.5rem;\n    font-size: 0.75rem;\n  }\n  .search-result-item {\n    padding: 0.5rem;\n  }\n  .document-context-summary {\n    font-size: 0.875rem;\n  }\n  .document-toggle-btn {\n    padding: 0.25rem 0.5rem;\n    font-size: 0.75rem;\n  }\n  .document-content {\n    font-size: 0.75rem;\n    max-height: 200px;\n  }\n  .message-edit-actions {\n    flex-direction: column;\n    gap: 0.25rem;\n  }\n  .message-edit-actions .btn {\n    width: 100%;\n  }\n  .markdown-table-wrapper {\n    font-size: 0.7rem;\n  }\n  .markdown-code-block {\n    font-size: 0.7rem;\n    padding: 0.5rem;\n  }\n}\n",""]);const i=s}}]);